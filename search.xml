<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>classçƒ­åŠ è½½çƒ­æ›´æ–°å®ç°</title>
      <link href="/2019/08/22/spring/class-re-jia-zai-re-geng-xin/"/>
      <url>/2019/08/22/spring/class-re-jia-zai-re-geng-xin/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€éœ€æ±‚æè¿°"><a href="#ä¸€ã€éœ€æ±‚æè¿°" class="headerlink" title="ä¸€ã€éœ€æ±‚æè¿°"></a>ä¸€ã€éœ€æ±‚æè¿°</h2><p><img src="https://i.loli.net/2019/08/24/waHUJ1583f6iOgP.png" alt="æ•ˆæœå±•ç¤º"></p><p>&emsp;&emsp;æœåŠ¡ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¸Œæœ›åœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åŠ è½½æŸäº›class/scalar/jaråˆ°é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œ<br>å³æ‰˜ç®¡åˆ°Springå®¹å™¨ï¼Œå¹¶èƒ½å®ç°å±æ€§ä¾èµ–çš„æ³¨å…¥ã€‚ï¼ˆæœ¬æ¨¡å—åªåŠ è½½classï¼‰ï¼ŒåŒæ—¶ä¹Ÿä¿è¯<strong>çƒ­æ›´æ–°</strong>ã€‚<br>&emsp;&emsp;è¿™äº›å¤–éƒ¨ç½‘ç»œåŠ è½½æ¥çš„classä¸€èˆ¬å®ç°æœåŠ¡é‡Œçš„æŸäº›ä¸šåŠ¡æ¥å£ï¼Œå³å¸Œæœ›åç»­åŠ¨ä½œbeanç»„ä»¶ä½¿ç”¨ã€‚<br>æŒ‡å®šbeanNameå³å¯ï¼Œè¿™é‡Œé»˜è®¤beanNameä¸ºç±»ålowCamelå½¢å¼ã€‚</p><h2 id="äºŒã€æ ¸å¿ƒå®ç°"><a href="#äºŒã€æ ¸å¿ƒå®ç°" class="headerlink" title="äºŒã€æ ¸å¿ƒå®ç°"></a>äºŒã€æ ¸å¿ƒå®ç°</h2><h3 id="â‘ ç›¸å…³ä»£ç "><a href="#â‘ ç›¸å…³ä»£ç " class="headerlink" title="â‘ ç›¸å…³ä»£ç "></a>â‘ <a href="https://github.com/chgl16/hotloading" target="_blank" rel="noopener">ç›¸å…³ä»£ç </a></h3><table><thead><tr><th style="text-align:center">ç±» &amp; æ¥å£</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">FileStoreUtil</td><td style="text-align:center">æ–‡ä»¶ä¿å­˜å·¥å…·ç±»</td></tr><tr><td style="text-align:center">CustomClassLoader</td><td style="text-align:center">è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼ŒæŒ‡å®šçˆ¶åŠ è½½å™¨ä¸ºSpringçš„åŠ è½½å™¨</td></tr><tr><td style="text-align:center">SpringContextUtil</td><td style="text-align:center">æœåŠ¡çš„springå®¹å™¨æ“ä½œå·¥å…·ç±»</td></tr><tr><td style="text-align:center">RegisterBeanUtil</td><td style="text-align:center">åŠ¨æ€æ³¨å†Œbeanåˆ°å®¹å™¨çš„å·¥å…·ç±»ï¼Œä¼šæ³¨å…¥ä¾èµ–</td></tr><tr><td style="text-align:center">DynamicInterface</td><td style="text-align:center">æ¨¡æ‹Ÿéœ€æ±‚å­˜åœ¨æœåŠ¡çš„classæ¥å£</td></tr><tr><td style="text-align:center">DynamicClass</td><td style="text-align:center">æ¨¡æ‹Ÿéœ€æ±‚éœ€è¦åŠ è½½çš„classï¼Œæä¾›å‚è€ƒï¼ŒåŠ è½½çš„æ˜¯ç±»ä¼¼çš„DynamicClass2</td></tr></tbody></table><h3 id="â‘¡å®ç°æ–¹æ³•"><a href="#â‘¡å®ç°æ–¹æ³•" class="headerlink" title="â‘¡å®ç°æ–¹æ³•"></a>â‘¡å®ç°æ–¹æ³•</h3><h5 id="æ–¹æ³•1ï¼š-classæ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°classpathå¯¹åº”çš„åŒ…ç›®å½•ä¸‹ã€‚"><a href="#æ–¹æ³•1ï¼š-classæ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°classpathå¯¹åº”çš„åŒ…ç›®å½•ä¸‹ã€‚" class="headerlink" title="æ–¹æ³•1ï¼š classæ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°classpathå¯¹åº”çš„åŒ…ç›®å½•ä¸‹ã€‚"></a>æ–¹æ³•1ï¼š classæ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°classpathå¯¹åº”çš„åŒ…ç›®å½•ä¸‹ã€‚</h5><p>æ–¹æ³•è¿™ç§æ–¹æ³•å®ç°æ¯”è¾ƒç®€å•ï¼Œä¸éœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œç›´æ¥  </p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åå°„è·å–Classï¼ŒåŠ è½½åˆ°æ–¹æ³•åŒº</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"classå…¨å"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è°ƒç”¨æ³¨å†Œæ–¹æ³•ï¼Œæ‰˜ç®¡åˆ°Springå®¹å™¨</span><span class="token function">register</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls<span class="token punctuation">,</span> String beanName<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½†æ˜¯è¿™ç§æ–¹æ³•æ‹“å±•æ€§å¾ˆå·®ï¼Œä¸€èˆ¬æœåŠ¡æ‰“åŒ…ä¸ºjaråŒ…ï¼Œæ ¹æœ¬æ— æ³•å¾€é‡Œé¢å­˜æ–‡ä»¶ã€‚  </p><h5 id="æ–¹æ³•2ï¼š-è‡ªå®šä¹‰ç±»åŠ è½½å™¨"><a href="#æ–¹æ³•2ï¼š-è‡ªå®šä¹‰ç±»åŠ è½½å™¨" class="headerlink" title="æ–¹æ³•2ï¼š è‡ªå®šä¹‰ç±»åŠ è½½å™¨"></a>æ–¹æ³•2ï¼š è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h5><p>è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦ä¿å­˜åˆ°é¡¹ç›®classpathä¸­classå¯¹åº”çš„ç›®å½•ä¸‹ã€‚å¯ä»¥ä»»æ„ç›®å½•ï¼ŒClass.formName()å¯¹æ¯”åŠ è½½å™¨æœ€å¤§å°±æ˜¯è¿™ä¸ªåŒºåˆ«  </p><blockquote><p>æœ¬é¡¹ç›®ä¿å­˜åˆ°classpath:resource/hotLoadingClassesåªä¸ºæ–¹ä¾¿æµ‹è¯•  </p></blockquote><ul><li><p>CustomClassLoader</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*** è‡ªå®šä¹‰ç±»åŠ è½½å™¨åŠ è½½å¤–éƒ¨class* ä¸éœ€è¦é‡å†™åŠ è½½çš„åŒäº²å§”æ´¾é€»è¾‘** @author chgl16* @date 2019/8/24 16:24*/</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomClassLoader</span> <span class="token keyword">extends</span> <span class="token class-name">ClassLoader</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/**   * ä¸»è¦ä¸ºäº†æŒ‡å®šçˆ¶åŠ è½½å™¨ä¸ºSpringç±»åŠ è½½å™¨   * å› æ­¤åœ¨æ„é€ æ–¹æ³•ä¸­é…ç½®è°ƒç”¨   * åŒæ—¶æ­¤åŠ è½½å™¨å¿…é¡»ç”±Springç±»åŠ è½½å™¨åŠ è½½ï¼Œå³å¿…é¡»å£°æ˜ä¸º@Component   */</span>  <span class="token keyword">public</span> <span class="token function">CustomClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">super</span><span class="token punctuation">(</span>CustomClassLoader<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">/**   * åŠ è½½æŸä¸ªç›®å½•ä¸‹çš„ä¸€ä¸ªclassæ–‡ä»¶ï¼Œè¿”å›ç±»çš„ç±»ç±»å‹   *   * @param name ç±»çš„å…¨åï¼Œå¦‚ java.util.concurrent.ConcurrentHashMap   * @return   */</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span>  Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> <span class="token function">findClass</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// è¿™ä¸ªè·¯å¾„å°±æ˜¯ç½‘ç»œè·¯å¾„ï¼Œå¿…é¡»éƒ½æ˜¯ "/"ï¼Œä¸èƒ½å­˜åœ¨ "\"ï¼Œå¦åˆ™URLè½¬æ¢å¤±è´¥</span>      String myPath <span class="token operator">=</span> <span class="token string">"file:///"</span> <span class="token operator">+</span> FileStoreUtil<span class="token punctuation">.</span>BASE_FOLDER<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">)</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span><span class="token string">"/"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".class"</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">/*       * !!æœ¬æ‰“ç®—ä»¥æ­¤å»æ‰å¯èƒ½å­˜åœ¨çš„åç¼€BeanInfoå’ŒCustomizerçš„classä¿¡æ¯ç±»åŠ è½½å¤±è´¥çš„é—®é¢˜       * ã€‹å®è·µç»“æœï¼šæ— æ³•å»æ‰ï¼Œè¿™æ˜¯springåŠ è½½å™¨æ— æ³•åŠ è½½ï¼Œæœ¬åŠ è½½å™¨è¢«è¿«åŠ è½½é€ æˆçš„é”™è¯¯ï¼Œ       * ã€‹è€Œå¦‚æœclassåœ¨classpathä¸‹æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜ä¸å½±å“ä½¿ç”¨ï¼Œå› æ­¤éšè—äº†æ—¥å¿—       */</span><span class="token comment" spellcheck="true">//        myPath = myPath.replace("BeanInfo", "").replace("Customizer", "");</span>      logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨äº†è‡ªå®šä¹‰åŠ è½½å™¨åŠ è½½è¯¥ç±»: "</span> <span class="token operator">+</span>  myPath<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classBytes <span class="token operator">=</span> null<span class="token punctuation">;</span>      Path path <span class="token operator">=</span> null<span class="token punctuation">;</span>      <span class="token keyword">try</span> <span class="token punctuation">{</span>          path <span class="token operator">=</span> Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URI</span><span class="token punctuation">(</span>myPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          classBytes <span class="token operator">=</span> Files<span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> URISyntaxException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>          e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      Class <span class="token class-name">cls</span> <span class="token operator">=</span> <span class="token function">defineClass</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> classBytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> classBytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> cls<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨åªéœ€è¦é‡å†™findClass(name)æ–¹æ³•å³å¯ï¼Œè°ƒç”¨çš„æ—¶å€™æ˜¯è°ƒç”¨loadClass(name)æ–¹æ³•ï¼Œå› ä¸ºè¿™é‡Œä¸éœ€è¦<br>ç ´ååŒäº²å§”æ´¾é€»è¾‘ï¼Œè°ƒç”¨é“¾ä¸ºloadClass -&gt; findClass -&gt; defineClassã€‚  </p></li></ul><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>è¦ä¿è¯è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨çˆ¶åŠ è½½å™¨æ˜¯SpringåŠ è½½å™¨</strong>ï¼Œå› ä¸ºåŠ è½½çš„classå­˜åœ¨æŸäº›springç‰¹æ€§ç±»ï¼ˆæ¯”å¦‚æ³¨è§£@Autowritedï¼‰,è¿™äº›æ˜¯éœ€è¦SpringåŠ è½½å™¨åŠ è½½çš„ã€‚  </p><p>å®ç°æ–¹æ³•å¾ˆç®€å•ï¼ŒæŠŠCustomClassLoaderæ³¨å†Œä¸º@Componentï¼Œå³è‡ªå®šä¹‰çš„åŠ è½½å™¨è¢«SpringåŠ è½½å™¨åŠ è½½ï¼Œé‚£ä¹ˆæ„é€ æ–¹æ³•çš„super(CustomClassLoader.class.getClassLoader())å°±æ˜¯æŒ‡å®šäº†çˆ¶åŠ è½½å™¨ã€‚  </p><p>ClassLoaderæºç </p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/** * Creates a new class loader using the specified parent class loader for * delegation. * * &lt;p> If there is a security manager, its {@link * SecurityManager#checkCreateClassLoader() * &lt;tt>checkCreateClassLoader&lt;/tt>} method is invoked.  This may result in * a security exception.  &lt;/p> * * @param  parent *         The parent class loader * * @throws  SecurityException *          If a security manager exists and its *          &lt;tt>checkCreateClassLoader&lt;/tt> method doesn't allow creation *          of a new class loader. * * @since  1.2 */</span><span class="token keyword">protected</span> <span class="token function">ClassLoader</span><span class="token punctuation">(</span>ClassLoader parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token function">checkCreateClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>éœ€è¦åŠ è½½çš„classç±»ä¼¼å¦‚ä¸‹ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DynamicClassBO</span> <span class="token keyword">implements</span> <span class="token class-name">DynamicInterface</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> PropertyBean propertyBean<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hi: ç¬¬ä¸€ä¸ªå®ç°ç±»**************************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        propertyBean<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> PropertyBean <span class="token function">getPropertyBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> propertyBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyBean</span><span class="token punctuation">(</span>PropertyBean propertyBean<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyBean <span class="token operator">=</span> propertyBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åŠ è½½è¿™ä¸ªç±»ç”¨åˆ°çš„æ˜¯è‡ªå®šä¹‰åŠ è½½å™¨çš„findClassæ–¹æ³•ï¼Œä½†æ˜¯é‡Œé¢çš„@Autowiredæ ‡æ³¨çš„å±æ€§ä¼šå§”æ´¾åˆ°SpringåŠ è½½å™¨åŠ è½½ã€‚<br>å› æ­¤å¦‚æœå±æ€§ä½¿ç”¨@Autowiredå¦‚æ­¤ï¼Œåœ¨æ„é€ beançš„æ—¶å€™æ˜¯ä¸éœ€è¦æ‰‹åŠ¨æ³¨å…¥å±æ€§çš„ï¼ŒSpringåŠ è½½èƒ¡è‡ªåŠ¨æ³¨å…¥ã€‚  </p><blockquote><p>@Autowiredçš„å±æ€§è¿™é‡Œä¸éœ€è¦setter/getteræ–¹æ³•ï¼Œå¦‚æœæ²¡ç”¨æ­¤æ³¨è§£éœ€è¦æä¾›setteræ–¹æ³•ï¼Œä¸ç„¶æ— æ³•æ„é€ å±æ€§æ³¨å…¥    </p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Classæ³¨å…¥å±æ€§</span>Field<span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>Field field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å®¹å™¨å­˜åœ¨è¿™ä¸ªå±æ€§åˆ™æ³¨å…¥ï¼ŒæŒ‰ç¼–ç ä¹ æƒ¯çš„åå­—ï¼Œæ²¡æœ‰æŒ‰ç±»å‹ã€‚ï¼ˆç”¨æˆ·è¾“å…¥çš„ä¹Ÿæ˜¯åå­—ï¼‰</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/*           @ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»çš„å±æ€§åï¼Œç¬¬äºŒä¸ªæ˜¯å®¹å™¨ä¸­éœ€è¦çš„beançš„beanNam           1. å¦‚æœæ˜¯@Autowiredæ³¨è§£çš„å±æ€§ä¸éœ€è¦è¿™æ ·æ·»åŠ äº†ï¼Œæ³¨é‡Šæ‰ä¸‹é¢ä»£ç            2. å¦‚æœä¸æ˜¯@Autowiredéœ€è¦å¦å¤–æ·»åŠ setteræ–¹æ³•         */</span>        beanDefinitionBuilder<span class="token punctuation">.</span><span class="token function">addPropertyReference</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ul><li><p>ApplicationContext</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HotloadingApplication</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>      ApplicationContext ac <span class="token operator">=</span> SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>HotloadingApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// ä¿å­˜åŒä¸€ä¸ªå®¹å™¨ä½¿ç”¨</span>      SpringContextUtil<span class="token punctuation">.</span><span class="token function">setApplicationContext</span><span class="token punctuation">(</span>ac<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å®¹å™¨åœ¨å¯åŠ¨ç±»å¤„ä¿å­˜åˆ°å·¥å…·ç±»å³å¯ã€‚ä¿è¯å®¹å™¨å”¯ä¸€ã€‚<br>ä»¥ä¸‹è¿™ç§æ–¹æ³•ä¼šé”™è¯¯å¤±è´¥</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> ApplicationContext applicationContext<span class="token punctuation">;</span></code></pre></li></ul><ul><li>RegisterBeanUtil  </li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ³¨å†ŒBean * * @author chgl16 * @date 2019/8/24 16:20 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegisterBeanUtil</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * æ³¨å†Œä¸€ä¸ªClassåˆ°IOCå®¹å™¨ï¼Œå¹¶ä¸”è¿”å›è°ƒç”¨     * classä¸è¦æ±‚åœ¨classpathè·¯å¾„ä¸‹     *     * @param cls  æ³¨å†Œçš„bean Class     * @param beanName æ³¨å†Œçš„bean Id     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Object <span class="token function">register</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls<span class="token punctuation">,</span> String beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å°†applicationContextè½¬æ¢ä¸ºConfigurableApplicationContext</span>        ConfigurableApplicationContext configurableApplicationContext <span class="token operator">=</span> <span class="token punctuation">(</span>ConfigurableApplicationContext<span class="token punctuation">)</span> SpringContextUtil<span class="token punctuation">.</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è·å–beanå·¥å‚å¹¶è½¬æ¢ä¸ºDefaultListableBeanFactory</span>        DefaultListableBeanFactory defaultListableBeanFactory <span class="token operator">=</span> <span class="token punctuation">(</span>DefaultListableBeanFactory<span class="token punctuation">)</span> configurableApplicationContext<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/*            å¦‚æœå­˜åœ¨éœ€è¦çƒ­æ›´æ–°ï¼Œå³å…ˆä»å·¥å‚åˆ å»            è¿™é‡Œä¸èƒ½ä½¿ç”¨SpringContext.getBean(beanName) æˆ–è€… defaultListableBeanFactory.getBean(beanName)åˆ¤æ–­            å› ä¸ºè¿™ä¸ªgetBeanæ–¹æ³•å¿…é¡»ä¿è¯beanå­˜åœ¨å®¹å™¨çš„ï¼Œä¸å­˜åœ¨ä¸ä¼šæœ‰nullè¿”å›ï¼Œç›´æ¥å¼‚å¸¸ä¸­æ–­ç¨‹åºï¼Œå½“ç„¶å¯ä»¥é€‰æ‹©æ•è·å¼‚å¸¸ä¸æŠ›å‡ºä¿è¯ç¨‹åºç»§ç»­æ‰§è¡Œ         */</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            defaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// é€šè¿‡BeanDefinitionBuilderåˆ›å»ºbeanå®šä¹‰</span>        BeanDefinitionBuilder beanDefinitionBuilder <span class="token operator">=</span> BeanDefinitionBuilder<span class="token punctuation">.</span><span class="token function">genericBeanDefinition</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ‰€æœ‰å±æ€§</span>        Field<span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Field field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å®¹å™¨å­˜åœ¨è¿™ä¸ªå±æ€§åˆ™æ³¨å…¥ï¼ŒæŒ‰ç¼–ç ä¹ æƒ¯çš„åå­—ï¼Œæ²¡æœ‰æŒ‰ç±»å‹ã€‚ï¼ˆç”¨æˆ·è¾“å…¥çš„ä¹Ÿæ˜¯åå­—ï¼‰</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»çš„å±æ€§åï¼Œç¬¬äºŒä¸ªæ˜¯å®¹å™¨ä¸­éœ€è¦çš„beançš„beanNam</span>                beanDefinitionBuilder<span class="token punctuation">.</span><span class="token function">addPropertyReference</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// æ³¨å†Œbean</span>        defaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> beanDefinitionBuilder<span class="token punctuation">.</span><span class="token function">getRawBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// è¿”å›</span>        <span class="token keyword">return</span> SpringContextUtil<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ³¨å†Œä¸€ä¸ªClassåˆ°IOCå®¹å™¨ï¼Œå¹¶ä¸”è¿”å›è°ƒç”¨     * æ­¤nameå¯¹åº”çš„classå¿…é¡»åœ¨classpathä¸‹     * è¿™ç§ä¸ä¼šå‡ºç°BeanInfoå’ŒCustomizeçš„åç¼€é—®é¢˜     *     * @param name ç±»çš„å…¨åï¼Œå¦‚java.util.concurrent.ConcurrentHashMap     * @param beanName æ³¨å†Œçš„bean Id     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Object <span class="token function">register</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> String beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å¦‚æœæ­¤nameå¯¹åº”çš„classå¿…é¡»åœ¨classpathä¸‹ï¼Œåˆ™åå°„æˆåŠŸ</span>            cls <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token function">register</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æœ€æ ¸å¿ƒçš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œè¿™äº›springéƒ½å°è£…å¾ˆå¤šäº†ï¼Œspringå®¹å™¨ç›¸å½“äºæŠŠåŠ è½½åˆ°æ–¹æ³•åŒºClassè·å–åˆ›å»ºid-classå¯¹è±¡çš„å½¢å¼ç»´æŠ¤åˆ°ä¸€ä¸ªmapä¸­ï¼Œ<br>è¿™é‡Œçš„builderå…ˆè·å–classå®šä¹‰ï¼ˆåˆ›å»ºè€…æ¨¡å¼æºç å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹ï¼Œå±äºbeanç”Ÿå‘½å‘¨æœŸç¬¬ä¸€æ­¥ï¼‰ç„¶ååŠ å…¥å±æ€§ï¼ˆå°±æ˜¯å±æ€§setteræ³¨å…¥ï¼Œå±äºbeanç”Ÿå‘½å‘¨æœŸçš„ç¬¬äºŒæ­¥ï¼‰ã€‚<br>æœ€åå°±ç®—æ³¨å†Œåˆ°å®¹å™¨äº†ã€‚  </p><blockquote><p>è¿™é‡Œçš„åˆ¤æ–­å®¹å™¨æ˜¯å¦å­˜åœ¨ä¸€ä¸ªbeanè¿™é‡Œä¸èƒ½ä½¿ç”¨SpringContext.getBean(beanName) æˆ–è€… defaultListableBeanFactory.getBean(beanName)åˆ¤æ–­ã€‚<br>å› ä¸ºè¿™ä¸ªgetBeanæ–¹æ³•å¿…é¡»ä¿è¯beanå­˜åœ¨å®¹å™¨çš„ï¼Œä¸å­˜åœ¨ä¸ä¼šæœ‰nullè¿”å›ï¼Œç›´æ¥å¼‚å¸¸ä¸­æ–­ç¨‹åºï¼Œå½“ç„¶å¯ä»¥é€‰æ‹©æ•è·å¼‚å¸¸ä¸æŠ›å‡ºä¿è¯ç¨‹åºç»§ç»­æ‰§è¡Œã€‚<br>ä½¿ç”¨boolean defaultListableBeanFactory.isBeanNameInUse(beanName)æ‰æ˜¯æ­£è§£</p></blockquote><h1 id="ä¸‰ã€é—®é¢˜äº‹é¡¹"><a href="#ä¸‰ã€é—®é¢˜äº‹é¡¹" class="headerlink" title="ä¸‰ã€é—®é¢˜äº‹é¡¹"></a>ä¸‰ã€é—®é¢˜äº‹é¡¹</h1><ol><li>ä¼šæŠ¥é”™XxxBeanInfo.class æˆ–è€… XxxCustomizer.classæ‰¾ä¸åˆ°  <blockquote><p>Xxxè¡¨ç¤ºçš„æ˜¯åŠ è½½çš„ç±»åï¼Œè°ƒè¯•æºç æ˜¾ç¤ºé™¤äº†åŠ è½½DynamicClassBOï¼Œè¿˜åŠ è½½äº†DynamicClassBOBeanInfoå’ŒDynamicClassBOCustomizer  </p></blockquote></li></ol><p>è¿™ä¸¤ä¸ªä¸çŸ¥é“ä¸ºå•¥è¿˜æ˜¯è°ƒç”¨äº†è‡ªå®šä¹‰åŠ è½½å™¨çš„findClassæ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªåº”è¯¥æ˜¯SpringåŠ è½½å™¨åŠ è½½çš„ï¼Œæ˜¯ä¸€äº›beançš„å±æ€§å’Œä¿¡æ¯ç±»ã€‚ä¸è¿‡å¹¶ä¸å½±å“ä½¿ç”¨  </p><pre class=" language-console"><code class="language-console">2019-08-24 22:07:54.476  WARN 4420 --- [nio-8080-exec-8] x.c.hotloading.util.CustomClassLoader    : ä½¿ç”¨äº†è‡ªå®šä¹‰åŠ è½½å™¨åŠ è½½è¯¥ç±»: file:///F:/project/hotloading/src/main/resources/hotLoadingClasses/xyz/cglzwz/hotloading/bo/DynamicClass7BOCustomizer.classjava.nio.file.NoSuchFileException: F:\project\hotloading\src\main\resources\hotLoadingClasses\xyz\cglzwz\hotloading\bo\DynamicClass7BOCustomizer.class    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)    at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:230)    at java.nio.file.Files.newByteChannel(Files.java:361)    at java.nio.file.Files.newByteChannel(Files.java:407)    at java.nio.file.Files.readAllBytes(Files.java:3152)    at xyz.cglzwz.hotloading.util.CustomClassLoader.findClass(CustomClassLoader.java:59)    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)    at java.lang.Class.forName0(Native Method)    at java.lang.Class.forName(Class.java:348)    at com.sun.beans.finder.ClassFinder.findClass(ClassFinder.java:103)    at java.beans.Introspector.findCustomizerClass(Introspector.java:1301)    at java.beans.Introspector.getTargetBeanDescriptor(Introspector.java:1295)    at java.beans.Introspector.getBeanInfo(Introspector.java:425)    at java.beans.Introspector.getBeanInfo(Introspector.java:262)    at java.beans.Introspector.getBeanInfo(Introspector.java:204)    at org.springframework.beans.CachedIntrospectionResults.getBeanInfo(CachedIntrospectionResults.java:248)    at org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:273)    at org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:177)    at org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:174)    at org.springframework.beans.BeanWrapperImpl.getLocalPropertyHandler(BeanWrapperImpl.java:230)    at org.springframework.beans.BeanWrapperImpl.getLocalPropertyHandler(BeanWrapperImpl.java:63)</code></pre><p>å½“ç„¶å¦‚æœä½¿ç”¨æ–¹æ³•1ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚æ¯”è¾ƒä¿å­˜åˆ°å¤–é¢è·¯å¾„çš„classæœ¬èº«å°±æ— æ³•ç”Ÿæˆå¯¹åº”çš„XxxBeanInfoå’ŒXxxCustomizeråˆ°ç›¸åŒç›®å½•ä¸‹ã€‚<br>ç–‘ç‚¹è¿˜æ˜¯ä¸çŸ¥é“ä¸ºæ˜¯ä½œä¸ºçˆ¶åŠ è½½å™¨çš„springåŠ è½½å™¨ä¸åŠ è½½ã€‚  </p><blockquote><p>è¿™ç§å¼‚å¸¸ä¸å½±å“ç¨‹åºæ‰§è¡Œï¼Œä¸ä¼šä¸­æ–­ï¼Œä¸ºè§£å†³æ—¶å¯ä»¥æ•è·å¼‚å¸¸ä¸å¤„ç†å³å¯ã€‚<br><code>`</code>java<br>@Override<br>protected  Class&lt;?&gt; findClass(String name) {<br>    // â€¦    </p></blockquote><pre><code>byte[] classBytes = null;Path path = null;try {    path = Paths.get(new URI(myPath));    classBytes = Files.readAllBytes(path);} catch (IOException | URISyntaxException e) {    // æ•è·ä¸å¤„ç†ï¼Œä¸æ‰“å°    // e.printStackTrace();}Class cls = defineClass(name, classBytes, 0, classBytes.length);return cls;</code></pre><p>}<br><code>`</code>  </p><ol start="2"><li>ä½¿ç”¨devtoolsä¾èµ–åŒ…æœåŠ¡é‡å¯é—®é¢˜ã€‚<br>å¦‚æœé¡¹ç›®åŠ è½½äº†è¿™ä¸ªåŒ…ï¼ŒåŠ è½½æˆåŠŸå®¹å™¨ä¹Ÿä¼šé‡å¯ã€‚åˆ‡è®°å»æ‰è¿™ä¸ªåŒ…ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> ClassLoader </tag>
            
            <tag> åå°„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸ¥æ‰¾ç®—æ³•æ€»ç»“</title>
      <link href="/2019/07/20/shu-ju-jie-gou/cha-zhao-suan-fa-zong-jie/"/>
      <url>/2019/07/20/shu-ju-jie-gou/cha-zhao-suan-fa-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>å¸¸è§çš„æŸ¥æ‰¾ç®—æ³•æœ‰7ç§</p><h2 id="1-é¡ºåºæŸ¥æ‰¾"><a href="#1-é¡ºåºæŸ¥æ‰¾" class="headerlink" title="1. é¡ºåºæŸ¥æ‰¾"></a>1. é¡ºåºæŸ¥æ‰¾</h2><p>é¡ºåºæŸ¥æ‰¾å¯¹åºåˆ—æ²¡æœ‰æ’åºè¦æ±‚<br>ASL = 1/n(1+2+3+â€¦+n) = (n+1)/2;<br>T((n+1)/2)å¤æ‚åº¦ä¸º O(n)</p><h2 id="2-æŠ˜åŠæŸ¥æ‰¾"><a href="#2-æŠ˜åŠæŸ¥æ‰¾" class="headerlink" title="2. æŠ˜åŠæŸ¥æ‰¾"></a>2. æŠ˜åŠæŸ¥æ‰¾</h2><p>ä¹Ÿå«äºŒåˆ†æŸ¥æ‰¾ï¼Œå¿…é¡»æ˜¯æœ‰åºçš„åºåˆ—ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> high <span class="token operator">=</span> a<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span> <span class="token punctuation">{</span>        mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> key<span class="token punctuation">)</span>             <span class="token keyword">return</span> mid<span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> key<span class="token punctuation">)</span>            low <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>             high <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ä¸å­˜åœ¨</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æœ‰åºåï¼Œè¿‡ç¨‹å¯ä»¥è½¬åŒ–ä¸ºä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå¤æ‚åº¦ä¸ºO(log2n)</p><h2 id="3-æ’å€¼æŸ¥æ‰¾"><a href="#3-æ’å€¼æŸ¥æ‰¾" class="headerlink" title="3. æ’å€¼æŸ¥æ‰¾"></a>3. æ’å€¼æŸ¥æ‰¾</h2><p>æ˜¯å¯¹æŠ˜åŠæŸ¥æ‰¾çš„ä¸€ç§ä¹ æƒ¯ä¼˜åŒ–ï¼Œå°±æ˜¯ä¸æ¯æ¬¡éƒ½æ˜¯æŠ˜åŠï¼Œå³ç´¢å¼•ç§»åŠ¨ä¸€åŠã€‚è€Œæ˜¯æ ¹æ®å€¼çš„å·®å’Œç´¢å¼•å·®çš„æ¯”æ¥æƒè¡¡ç´¢å¼•ç§»åŠ¨å¤šå°‘ã€‚<br>ç¿»å­—å…¸çš„ä¾‹å­ä¸¾å¾—å¾ˆå¥½ï¼Œæƒ³æ‰¾appleï¼Œè‚¯å®šä¸€å¼€å§‹ä¸æ˜¯ç¿»åˆ°å­—å…¸ä¸­é—´ï¼Œè€Œæ˜¯çŸ¥é“äº†å€¼aåˆ°Mçš„è·ç¦»å·®å’Œé¡µé¢ç´¢å¼•å·®çš„æ¯”ã€‚ä¼šè‡ªé€‚åº”</p><p>ä¿®æ”¹æŠ˜åŠæŸ¥æ‰¾ä»£ç è¿™å¥å³å¯</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æŠ˜åŠ</span>mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç­‰ä»·äº mid = low + (high - low) / 2;</span><span class="token comment" spellcheck="true">// æ’å€¼</span>mid <span class="token operator">=</span> low <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>key <span class="token operator">-</span> a<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><h2 id="4-æ–æ³¢é‚£å¥‘æŸ¥æ‰¾"><a href="#4-æ–æ³¢é‚£å¥‘æŸ¥æ‰¾" class="headerlink" title="4. æ–æ³¢é‚£å¥‘æŸ¥æ‰¾"></a>4. æ–æ³¢é‚£å¥‘æŸ¥æ‰¾</h2><h2 id="5-æ ‘æŸ¥æ‰¾"><a href="#5-æ ‘æŸ¥æ‰¾" class="headerlink" title="5. æ ‘æŸ¥æ‰¾"></a>5. æ ‘æŸ¥æ‰¾</h2><p>æ ‘æœ‰å¾ˆå¤šï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘ï¼ŒAVLäºŒå‰å¹³è¡¡æ ‘ï¼Œçº¢é»‘æ ‘ï¼ŒBæ ‘ï¼ŒB+æ ‘ç­‰</p><p>AVLæ ‘å³è‹¥å·¦å³å­æ ‘å­˜åœ¨ï¼Œé‚£ä¹ˆä¸¤è€…é«˜åº¦å·®ç»å¯¹å€¼å°äº1ï¼Œè€Œä¸”å·¦å³å­æ ‘ä¹Ÿæ˜¯å¹³è¡¡æ ‘ã€‚ä¸»è¦æ˜¯ä¸ºäº†è§£å†³äºŒå‰æ ‘é€€å˜ä¸ºå•é“¾è¡¨çš„å¯èƒ½ã€‚æ›´â€œåŒ€ç§°â€åŒ–ã€‚</p><p>çº¢é»‘æ ‘ï¼šçº¢é»‘æ ‘å¹¶ä¸æ»¡è¶³AVLæ¡ä»¶ï¼Œæ˜¯ä¸€èˆ¬äºŒå‰æŸ¥æ‰¾æ ‘çš„å˜å½¢ï¼Œå¢åŠ é¢œè‰²é—´éš”ç‰¹ç‚¹ã€‚çº¢é»‘æ ‘æ˜¯ç”¨éä¸¥æ ¼çš„å¹³è¡¡æ¥æ¢å–å¢åˆ èŠ‚ç‚¹æ—¶å€™æ—‹è½¬æ¬¡æ•°çš„é™ä½ï¼Œä»»ä½•ä¸å¹³è¡¡éƒ½ä¼šåœ¨ä¸‰æ¬¡æ—‹è½¬ä¹‹å†…è§£å†³ï¼Œè€ŒAVLæ˜¯ä¸¥æ ¼å¹³è¡¡æ ‘ï¼Œå› æ­¤åœ¨å¢åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒæƒ…å†µï¼Œæ—‹è½¬çš„æ¬¡æ•°æ¯”çº¢é»‘æ ‘è¦å¤šã€‚ <strong>æ‰€ä»¥çº¢é»‘æ ‘çš„æ’å…¥åˆ é™¤æ•ˆç‡æ›´é«˜ã€‚</strong></p><p>B-æ ‘ï¼Œä¹Ÿå°±æ˜¯balance-æ ‘ï¼Œå¤šè·¯æŸ¥æ‰¾æ ‘ï¼Œä¸»è¦æ˜¯ç”¨åœ¨ç£ç›˜æ–‡ä»¶ç³»ç»ŸæŸ¥æ‰¾ä¸Šã€‚   </p><p><img src="https://i.loli.net/2019/07/24/5d38684c864e025342.jpg" alt="Bæ ‘">    </p><p>mé˜¶çš„Bæ ‘çš„ä¸€äº›æ€§è´¨ï¼š  </p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰mæ£µå­æ ‘ï¼ˆå³æœ€å¤šm-1ä¸ªå…³é”®å­—ï¼‰</li><li>æœ‰å¤šå±‚ï¼Œè·Ÿç»“ç‚¹è‡³å°‘ä¸¤ä¸ªå­æ ‘ã€‚ </li><li>é™¤æ ¹ä¹‹å¤–ï¼Œä»»ä½•éç»ˆç»“ç‚¹è‡³å°‘æœ‰m/2æ£µå­æ ‘ã€‚</li></ol><p>B+æ ‘ï¼Œæ˜¯Bæ ‘çš„ä¸€ç§å˜å½¢ï¼Œä¸»è¦ç”¨åœ¨æ•°æ®åº“ç´¢å¼•ä¸Šã€‚</p><p><img src="https://ivanzz1001.github.io/records/assets/img/data_structure/ds_bplus_tree1.jpg" alt="B+æ ‘"><br><strong>mé˜¶B+æ ‘å’ŒBæ ‘çš„å·®å¼‚æ˜¯:</strong></p><ol><li>æœ‰næ£µå­æ ‘çš„èŠ‚ç‚¹å«æœ‰nä¸ªå…³é”®å­—</li><li>èŠ‚ç‚¹çš„å…³é”®å­—ä¼šé‡å¤ä¼ é€’ä¸‹å»ï¼Œå› ä¸ºB+éå¶å­ç»“ç‚¹ä¸åŒ…å«ä¿¡æ¯ï¼Œåªæ˜¯å•çº¯çš„ç´¢å¼•ã€‚è€ŒBæ ‘æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¿¡æ¯ï¼ŒæŸ¥æ‰¾åˆ°å°±è¿”å›äº†ï¼ŒB+æ ‘è¦åˆ°å¶å­èŠ‚ç‚¹ã€‚  </li><li>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤§çš„å…³é”®å­—ï¼Œåœ¨å…¶å¶å­èŠ‚ç‚¹ä¹Ÿæ˜¯æœ€å¤§ã€‚B+æ ‘å¯ä»¥çœ‹ä½œæ˜¯æ²¡æœ‰â€œå³è¾¹æ‹“å±•â€ã€‚</li><li>B+æ ‘å¶å­èŠ‚ç‚¹æœ¬èº«ä¾å…³é”®å­—è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚</li></ol><h2 id="6-åˆ†å—æŸ¥æ‰¾"><a href="#6-åˆ†å—æŸ¥æ‰¾" class="headerlink" title="6. åˆ†å—æŸ¥æ‰¾"></a>6. åˆ†å—æŸ¥æ‰¾</h2><h2 id="7-hashè¡¨æŸ¥æ‰¾"><a href="#7-hashè¡¨æŸ¥æ‰¾" class="headerlink" title="7. hashè¡¨æŸ¥æ‰¾"></a>7. hashè¡¨æŸ¥æ‰¾</h2><p>å¸¸è§çš„å°±æ˜¯Mapï¼Œå°±æ˜¯è®¾è®¡ä¸€ä¸ªå¤§æ•°æ®å’Œä¸€ä¸ªhashå‡½æ•°ï¼Œhash(key)æ˜ å°„åˆ°ç´¢å¼•çš„ä½ç½®å­˜å‚¨ã€‚å¦‚æœæ²¡æœ‰hashå†²çªçš„è¯ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹å°±æ˜¯åšä¸€æ¬¡hashè®¡ç®—è€Œå·²ï¼Œå¤æ‚åº¦O(1)ã€‚  </p><p>hashå†²çªè§£å†³æ–¹æ³•ï¼šå¼€æ”¾åœ°å€æ³•å’Œæ‹‰é“¾æ³•</p><p>å¼€æ”¾åœ°å€æ³•åˆ†ä¸ºï¼š</p><ol><li>çº¿æ€§æ¢æµ‹æ³•: å³f(key + di) = hashçš„diæ˜¯å¢å¹…ä¸º1çš„ã€‚ç›´åˆ°æ‰¾åˆ°ç©ºæ¡¶ä½ç½®</li><li>äºŒæ¬¡æ¢æµ‹æ³•ï¼šf(key + di^2)</li><li>éšæœºæ¢æµ‹æ³•ï¼šä¸‰ç§æ–¹æ³•éƒ½æ˜¯å¯¹diçš„å–æ³•æœ‰åˆ†åˆ«è€Œå·²ã€‚é€‚åˆä¸åŒæƒ…å†µã€‚</li></ol><p>æ‹‰é“¾æ³•ï¼š<br>ä½¿ç”¨ä¸€ä¸ªå•é“¾è¡¨æŠŠå†²çªçš„ä¸²èµ·æ¥ï¼Œæ¡¶çš„ä½ç½®ä¸ºè¡¨å¤´ã€‚hashmapçš„putæ–¹æ³•å¦‚æ˜¯ã€‚å…ˆåˆ¤æ–­keyæ˜¯å¦ä¸ºnull, hashmapæœ‰ä¸“é—¨çš„nullå­˜å‚¨ã€‚ç„¶åæ‰¾åˆ°æ•°ç»„ç´¢å¼•ï¼Œä»è¡¨å¤´éå†ï¼Œkeyå’Œhashä¸€æ ·æ›¿æ¢valueã€‚å¦åˆ™ä½œä¸ºæ–°è¡¨å¤´æ”¾åˆ°æ¡¶å¤„ï¼ŒnextèŠ‚ç‚¹æŒ‡å‘åŸè¡¨å¤´ã€‚</p><blockquote><p>jdk1.8åï¼Œè§£å†³å†²çªæ–¹æ³•ä¸ºå•é“¾è¡¨ç»“åˆçº¢é»‘æ ‘ã€‚çŸ­çš„æ—¶å€™ä½¿ç”¨å•é“¾è¡¨ï¼Œé•¿åº¦è¾¾åˆ°ä¸€å®šæ”¹ä¸ºçº¢é»‘æ ‘ã€‚</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.cnblogs.com/maybe2030/p/4715035.html" target="_blank" rel="noopener">ä¸ƒå¤§æŸ¥æ‰¾ç®—æ³•</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•&amp;æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§’æ€ç³»ç»Ÿæµç¨‹åŠå¹¶å‘ä¼˜åŒ–åˆ†æ</title>
      <link href="/2019/07/19/jia-gou/miao-sha-xi-tong-liu-cheng-ji-bing-fa-you-hua-fen-xi/"/>
      <url>/2019/07/19/jia-gou/miao-sha-xi-tong-liu-cheng-ji-bing-fa-you-hua-fen-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="æµç¨‹åˆ†æ"><a href="#æµç¨‹åˆ†æ" class="headerlink" title="æµç¨‹åˆ†æ"></a>æµç¨‹åˆ†æ</h2><p>ä¹‹å‰çœ‹äº†ä¸‹æ…•è¯¾ç½‘çš„ç§’æ€ç³»ç»Ÿï¼Œä¹ŸåŠ¨æ‰‹å®æˆ˜è¿‡ã€‚åˆ†æä¸‹å¸¸è§çš„ç§’æ€æŠ¢è´­å’ŒæŠ¢çº¢åŒ…ç³»ç»Ÿæµç¨‹å’Œæ¶æ„ä¼˜åŒ–ã€‚<br><img src="https://camo.githubusercontent.com/53caa931ebbbdd55df8b2a9d0ece54875f37ed41/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30372f32302f3564333331373462383539386534343131382e706e67" alt="é¡µé¢æµç¨‹"><br>æä¾›ç»™ç”¨æˆ·çš„å‰ç«¯é¡µé¢ä¸»è¦æœ‰å•†å“åˆ—è¡¨é¡µå’Œå¯¹åº”çš„è¯¦æƒ…é¡µã€‚ç™»å½•ç”¨æˆ·ä¿¡æ¯è¿™é‡Œåªæ˜¯ä½¿ç”¨äº†cookieã€‚æ²¡æœ‰å¦å¤–æ•°æ®åº“å±‚é¢çš„å­˜å‚¨ã€‚  </p><h3 id="1-åˆ—è¡¨é¡µ"><a href="#1-åˆ—è¡¨é¡µ" class="headerlink" title="1.åˆ—è¡¨é¡µ"></a>1.åˆ—è¡¨é¡µ</h3><p><img src="https://camo.githubusercontent.com/5582617dcf6b45abfab2cd27b033befe5e5b1928/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30372f32302f3564333331373462396231613835373135332e706e67" alt="ç§’æ€å•†å“åˆ—è¡¨é¡µ"><br>åˆ—è¡¨é¡µé¢æ¯”è¾ƒç®€å•ã€‚åªæ˜¯æš‚æ—¶è€Œå·²ã€‚ä½†æ˜¯æœ‰å…³é”®çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ã€‚è¿™äº›ä¼šå­˜åœ¨å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ä»¥åçš„è·å–ç³»ç»Ÿæ—¶é—´å¯¹æ¯”ã€‚åˆ¤æ–­æ˜¯å¦å¼€å§‹ç§’æ€æ‰€ç”¨ã€‚  </p><h3 id="2-è¯¦æƒ…é¡µ"><a href="#2-è¯¦æƒ…é¡µ" class="headerlink" title="2.è¯¦æƒ…é¡µ"></a>2.è¯¦æƒ…é¡µ</h3><p><img src="https://i.loli.net/2019/07/20/5d33174b4524e59471.png" alt="ç”¨æˆ·æ ‡è¯†å­˜cookie"><br><img src="https://i.loli.net/2019/07/20/5d3318424464658160.png" alt="ç§’æ€ç­‰å¾…"><br><img src="https://i.loli.net/2019/07/20/5d33174b57e6d99135.png" alt="æš´éœ²ç§’æ€æ¥å£"><br><img src="https://i.loli.net/2019/07/20/5d33174b6eefc24457.png" alt="ç§’æ€æˆåŠŸ"><br><img src="https://i.loli.net/2019/07/20/5d33174b7874972399.png" alt="é‡å¤ç§’æ€"><br><img src="https://i.loli.net/2019/07/20/5d33174b92e6928405.png" alt="è¯¦æƒ…é¡µé¢æµç¨‹">  </p><p>æˆ‘ä»¬å…³æ³¨å®ƒçš„æ ¸å¿ƒæµç¨‹ï¼š</p><h4 id="1-å®¢æˆ·ç«¯è¿›å…¥é¡µé¢åéœ€è¦åˆ¤æ–­æ˜¯å¦å·²ç»ç™»å½•ï¼ˆè¿™é‡Œä½¿ç”¨cookieï¼‰ï¼š"><a href="#1-å®¢æˆ·ç«¯è¿›å…¥é¡µé¢åéœ€è¦åˆ¤æ–­æ˜¯å¦å·²ç»ç™»å½•ï¼ˆè¿™é‡Œä½¿ç”¨cookieï¼‰ï¼š" class="headerlink" title="1. å®¢æˆ·ç«¯è¿›å…¥é¡µé¢åéœ€è¦åˆ¤æ–­æ˜¯å¦å·²ç»ç™»å½•ï¼ˆè¿™é‡Œä½¿ç”¨cookieï¼‰ï¼š"></a>1. å®¢æˆ·ç«¯è¿›å…¥é¡µé¢åéœ€è¦åˆ¤æ–­æ˜¯å¦å·²ç»ç™»å½•ï¼ˆè¿™é‡Œä½¿ç”¨cookieï¼‰ï¼š</h4><ul><li>å…ˆä»kookieåˆ¤æ–­æ˜¯å¦æœ‰ç”¨æˆ·æ ‡è¯†çš„æ‰‹æœºå·ç </li><li>æœ‰çš„è¯ä¸‹ä¸€æ­¥ï¼Œæ²¡æœ‰å¡«å…¥ï¼Œç„¶åå¡«å†™ç™»å½•ï¼ˆè¿™é‡Œæ²¡æœ‰ç”¨åˆ°DBï¼‰ï¼ŒæˆåŠŸåä¿å­˜è¯¥cookieï¼ˆkey-value, expireï¼‰</li></ul><h4 id="2-è·å–æœåŠ¡å™¨ç³»ç»Ÿæ—¶é—´ï¼š"><a href="#2-è·å–æœåŠ¡å™¨ç³»ç»Ÿæ—¶é—´ï¼š" class="headerlink" title="2. è·å–æœåŠ¡å™¨ç³»ç»Ÿæ—¶é—´ï¼š"></a>2. è·å–æœåŠ¡å™¨ç³»ç»Ÿæ—¶é—´ï¼š</h4><ul><li>å› ä¸ºä¸åŒç”¨æˆ·å®¢æˆ·ç«¯çš„æ—¶é—´å¯èƒ½ä¸åŒã€‚éœ€è¦ç»Ÿä¸€ä»æœåŠ¡å™¨getã€‚ç„¶åä¸åˆ—è¡¨é¡µè·å–åˆ°çš„è¯¥å•†å“çš„ç§’æ€å¼€å§‹ç»“æŸæ—¶é—´å¯¹æ¯”ã€‚</li><li>æœªå¼€å§‹çš„å¯åŠ¨è®¡æ—¶å™¨ï¼›å·²ç»“æŸçš„ä¸å†overï¼Œè¿›è¡Œä¸­çš„ä¸‹ä¸€æ­¥è·å–æš´éœ²æ¥å£</li></ul><h4 id="3-è·å–æš´éœ²çš„ç§’æ€æ¥å£ï¼š"><a href="#3-è·å–æš´éœ²çš„ç§’æ€æ¥å£ï¼š" class="headerlink" title="3. è·å–æš´éœ²çš„ç§’æ€æ¥å£ï¼š"></a>3. è·å–æš´éœ²çš„ç§’æ€æ¥å£ï¼š</h4><ul><li>è¿™ä¸ªä¸€èˆ¬æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œå¯ä»¥ç®€å•å¯¹å•†å“idåŠ ç›hashå³å¯ã€‚</li><li>å› ä¸ºå·²ç»å±äºç§’æ€æ—¶é—´å†…äº†ï¼Œè·å–åˆ°æ¥å£ï¼Œä¹ŸåŒ…å«å•†å“ç›®å‰ä¿¡æ¯ï¼Œå³åº“å­˜é‡ï¼Œè¿˜æœ‰åˆ™æŒ‰é’®æ˜¾ç¤ºå¯ä»¥ç§’æ€ã€‚</li></ul><h4 id="4-æ‰§è¡Œç§’æ€ï¼š"><a href="#4-æ‰§è¡Œç§’æ€ï¼š" class="headerlink" title="4. æ‰§è¡Œç§’æ€ï¼š"></a>4. æ‰§è¡Œç§’æ€ï¼š</h4><ul><li>æ‰§è¡Œç§’æ€éœ€è¦ç»™æœåŠ¡ç«¯æä¾›ï¼ˆå•†å“id, ç”¨æˆ·æ ‡è¯†phoneï¼Œæ¥å£hashï¼‰ã€‚</li><li>æœåŠ¡å™¨ç«¯å¯¹å‚æ•°éªŒè¯ï¼Œå¦‚hashæ˜¯å¦æ­£ç¡®ã€‚éƒ½ğŸ†—æ‰§è¡Œç§’æ€æ“ä½œã€‚å‡åº“å­˜+è®°å½•ç”¨æˆ·è´­ä¹°ä¿¡æ¯ã€‚åŒæ—¶æŒ‰é’®å˜ç°ï¼Œæ— æ³•å†ç‚¹å‡»ã€‚å¦‚æœé‡å¤è´­ä¹°è¿”å›é”™è¯¯é‡å¤ã€‚è¿™äº›éƒ½æ˜¯å°è£…åœ¨ä¸ªvo/dtoä¸­è¿”å›å³å¯ã€‚</li></ul><hr><h2 id="æŠ€æœ¯åˆ†æ"><a href="#æŠ€æœ¯åˆ†æ" class="headerlink" title="æŠ€æœ¯åˆ†æ"></a>æŠ€æœ¯åˆ†æ</h2><ul><li>å‰ç«¯ï¼šBootstrap + Jquery + Cookie</li><li>åç«¯ï¼šSSM/Spring Boot + MySQL</li><li>æ¨¡æ¿ï¼šJsp/Thymeleaf + Restfulæ¥å£</li><li>é«˜å¹¶å‘ï¼šç¼“å­˜Redis + æ¶ˆæ¯é˜Ÿåˆ—MQ + æ•°æ®åº“å­˜å‚¨è¿‡ç¨‹procedure</li></ul><hr><h2 id="é«˜å¹¶å‘ä¼˜åŒ–"><a href="#é«˜å¹¶å‘ä¼˜åŒ–" class="headerlink" title="é«˜å¹¶å‘ä¼˜åŒ–"></a>é«˜å¹¶å‘ä¼˜åŒ–</h2><p><img src="https://i.loli.net/2019/07/21/5d34347cb1b9e85353.png" alt="è¯¦æƒ…é¡µé€»è¾‘å¯ä¼˜åŒ–åˆ†æ"><br>å…¶ä¸­çº¢è‰²çš„æ˜¯å¯ä»¥è€ƒè™‘ä¼˜åŒ–çš„éƒ¨åˆ†</p><h4 id="1-é¡µé¢é™æ€èµ„æº"><a href="#1-é¡µé¢é™æ€èµ„æº" class="headerlink" title="1. é¡µé¢é™æ€èµ„æº"></a>1. é¡µé¢é™æ€èµ„æº</h4><ul><li>åŠ¨é™æ€åˆ†ç¦»ï¼Œä½¿ç”¨CDNæˆ–è€…NginxæœåŠ¡å™¨  </li></ul><h4 id="2-ç³»ç»Ÿæ—¶é—´"><a href="#2-ç³»ç»Ÿæ—¶é—´" class="headerlink" title="2. ç³»ç»Ÿæ—¶é—´"></a>2. ç³»ç»Ÿæ—¶é—´</h4><ul><li>è¿™é‡Œåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ<em>return new Date().getTime</em>è·å–ç³»ç»Ÿæ—¶é—´ï¼Œä¸€èˆ¬æ— éœ€ä¼˜åŒ–ã€‚  </li></ul><h4 id="3-åœ°å€æš´éœ²æ¥å£"><a href="#3-åœ°å€æš´éœ²æ¥å£" class="headerlink" title="3. åœ°å€æš´éœ²æ¥å£"></a>3. åœ°å€æš´éœ²æ¥å£</h4><p><img src="https://i.loli.net/2019/07/21/5d3442668b72a24330.png" alt="redisç¼“å­˜æ–¹å¼"></p><ul><li>å› ä¸ºç§’æ€çš„æ—¶å€™ç”¨æˆ·ä¼šå¤§é‡é‡å¤åˆ·æ–°é¡µé¢ï¼Œè€Œè¿™ä¸ªç§’æ€å•†å“å¯¹è±¡çš„ä¸€äº›ä¿¡æ¯å­˜åœ¨æ•°æ®åº“ï¼Œå¦‚åº“å­˜å¼€å§‹ç»“æŸæ—¶é—´ã€‚æ¯”è¾ƒåæ­£ç¡®æ‰èƒ½ç»™ä»–ç”Ÿæˆæš´éœ²æ¥å£ã€‚åæ­£æ˜¯æ“ä½œæ•°æ®åº“äº†ï¼Œè¿™ä¸ªå¯ä»¥ä½¿ç”¨Redisç¼“å­˜è¿™äº›ç§’æ€å¯¹è±¡ä¿¡æ¯ã€‚ä¸€è‡´æ€§ç»´æŠ¤é‡‡ç”¨è¶…æ—¶ç¼“å­˜å³å¯ã€‚å› ä¸ºå•†å“ä¿¡æ¯åŸºæœ¬ä¸ä¼šçŸ­æ—¶é—´æ”¹å˜ã€‚</li><li>å…·ä½“å¯è§<a href="https://cglzwz.xyz/2019/07/18/redis/redis-hou-duan-huan-cun-liang-da-de-shu-ju-ku-cha-xun/">Redisåç«¯ç¼“å­˜é‡å¤§çš„æ•°æ®åº“æŸ¥è¯¢</a>  </li></ul><h4 id="4-æ‰§è¡Œç§’æ€æ“ä½œ"><a href="#4-æ‰§è¡Œç§’æ€æ“ä½œ" class="headerlink" title="4. æ‰§è¡Œç§’æ€æ“ä½œ"></a>4. æ‰§è¡Œç§’æ€æ“ä½œ</h4><p>è¿™æ˜¯ä¼˜åŒ–çš„é‡ç‚¹<br><img src="https://i.loli.net/2019/07/21/5d34347af057a94216.png" alt="äº‹åŠ¡æ‰§è¡Œæµç¨‹"><br>ç§’æ€è¿™äº›éƒ½æ˜¯ä¸€èˆ¬ä¸¤ä¸ªæ“ä½œï¼š <strong>å‡åº“å­˜</strong> å’Œ <strong>è®°å½•ç”¨æˆ·è´­ä¹°ä¿¡æ¯</strong> ã€‚</p><p><img src="https://i.loli.net/2019/07/21/5d3443331f8bd20360.png" alt="å•æ¡updateå‹åŠ›æµ‹è¯•"><br><img src="https://i.loli.net/2019/07/21/5d3443331341127657.png" alt="äº‹åŠ¡å¤„ç†åˆ†æ"><br>ä½†æ˜¯å› ä¸ºupdateè¡Œçº§é”çš„å½±å“ï¼Œä¸€ä¸ªäº‹åŠ¡ç»“æŸæ‰ä¼šé‡Šæ”¾è¡Œçº§é”ã€‚åŠ ä¸Šç½‘ç»œå»¶æ—¶å’ŒGCï¼Œä¼šå¾ˆæ…¢ã€‚å¦‚æœå®ç°è¿˜æ˜¯åœ¨æ•°æ®åº“æ–¹é¢ï¼Œä¼˜åŒ–ä¸»è¦æ˜¯å‡å°‘äº‹åŠ¡é”çš„æ—¶é—´ã€‚</p><ul><li>ä¼˜åŒ–æ–¹æ¡ˆ1ï¼š å¯ä»¥å°†äº‹åŠ¡çš„ä¸¤ä¸ªæ“ä½œäº¤æ¢é¡ºåºï¼Œå› ä¸ºè¡Œçº§é”æ˜¯åœ¨updateæ“ä½œä¸­çš„ã€‚æ”¾åˆ°åé¢ä¸ä¼šæ•´ä¸ªäº‹åŠ¡æ—¶é—´éƒ½ç‹¬å ï¼Œå¯ä»¥ç¨å¾®å¿«ç‚¹ã€‚</li><li>ä¼˜åŒ–æ–¹æ¡ˆ2ï¼š ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ã€‚æŠŠäº‹åŠ¡çš„æ‰§è¡Œç§»åˆ°MySQLæœåŠ¡ç«¯æ‰§è¡Œã€‚å¯ä»¥ä¼˜åŒ–è¡Œçº§é”çš„æŒæœ‰æ—¶é—´ã€‚ä½†æ˜¯å­˜å‚¨è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ã€‚ä¸€èˆ¬ä¸å¸¸ç”¨ï¼Œå½“ç„¶å¯¹äºé€»è¾‘ç®€å•ç§’æ€ç³»ç»Ÿæ¥è¯´æ˜¯å¯ä»¥ï¼Œç”¨JMeterå‹åŠ›æµ‹è¯•å¯ä»¥è¾¾åˆ°6000QPSã€‚</li><li>ä¼˜åŒ–æ–¹æ¡ˆ3ï¼šå¦‚ä¸‹ï¼Œä½¿ç”¨redisç¼“å­˜åº“å­˜ï¼Œå¯ä»¥ä½¿ç”¨listï¼Œå› ä¸ºpopæ˜¯åŸå­æ€§çš„ã€‚popæˆåŠŸåˆ™è®°å½•ç”¨æˆ·è´­ä¹°è¡Œä¸ºä»¥ä¿¡æ¯å½¢å¼æŠ•æ”¾åˆ°MQä¸­ï¼Œå¼‚æ­¥å‰Šå³°ï¼Œå†å†™å…¥MySQLï¼Œç”¨çš„éƒ½æ˜¯é›†ç¾¤ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥éå¸¸å¿«ã€‚  </li></ul><p><img src="https://i.loli.net/2019/07/21/5d3434814a39a34274.png" alt="å¾®ä¿¡æŠ¢çº¢åŒ…æ–¹æ¡ˆ">  </p><p>ä½†æ˜¯ä¹Ÿæœ‰é—®é¢˜ï¼Œè™½ç„¶è§£å†³äº†MySQLäº‹åŠ¡æ€§å¼ºå¤§çš„æ›¿æ¢ã€‚ä½†æ˜¯å¦‚æœæ•°æ®ä¿®æ”¹äº†ï¼Œredisçš„ä¸€è‡´æ€§é—®é¢˜éš¾ä»¥ä¿è¯ã€‚è€Œä¸”é‡å¤ç§’æ€ï¼Œredisæ ¹æœ¬ä¸çŸ¥é“ï¼Œéœ€è¦å¦å¤–ä½¿ç”¨ä¸€ä¸ªNOSQLé›†ç¾¤è®°å½•è°è´­ä¹°äº†ç»´æŠ¤å¤„ç†ã€‚æ­¤å¤–å¦‚æœMQé”™è¯¯ç­‰ï¼Œéƒ½å¾ˆéš¾å›æ»šè§£å†³ï¼Œç­‰ç­‰<br><img src="https://i.loli.net/2019/07/21/5d34347bbb73962692.png" alt="è¯¥æ–¹æ¡ˆæˆæœ¬åˆ†æ"></p><p><img src="https://i.loli.net/2019/07/21/5d34347b454b289775.png" alt="ä¼˜åŒ–æ€»ç»“"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.imooc.com/learn/632" target="_blank" rel="noopener">æ…•è¯¾. Javaé«˜å¹¶å‘ç§’æ€APIä¹‹é«˜å¹¶å‘ä¼˜åŒ–</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¶æ„ </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisåç«¯ç¼“å­˜é‡å¤§çš„æ•°æ®åº“æŸ¥è¯¢</title>
      <link href="/2019/07/18/redis/redis-hou-duan-huan-cun-liang-da-de-shu-ju-ku-cha-xun/"/>
      <url>/2019/07/18/redis/redis-hou-duan-huan-cun-liang-da-de-shu-ju-ku-cha-xun/</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p><img src="https://i.loli.net/2019/07/21/5d341a2367c3511375.png" alt="ç§’æ€ä¼˜åŒ–"><br>åœ¨ç§’æ€ç³»ç»Ÿä¸­ï¼Œçº¢è‰²éƒ¨åˆ†æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå¯¹äºåœ°å€æš´éœ²æ¥å£é‚£å—ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·æ ¹æ®idå®¢æˆ·ç«¯è®¿é—®æŸ¥çœ‹é¡µé¢æ˜¯å¦å¯ä»¥ç§’æ€äº†ï¼Œå¦‚æœå¯ä»¥ç§’æ€ï¼Œä¼šæš´éœ²ä¸€ä¸ªåŠ¨æ€hashæ¥å£ã€‚æ‰€æœ‰ä¹Ÿæ˜¯åˆ·æ–°å¾ˆé¢‘ç¹çš„ã€‚  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> Exposer <span class="token function">exportSeckillUrl</span><span class="token punctuation">(</span><span class="token keyword">long</span> seckillId<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Seckill seckill <span class="token operator">=</span> seckillDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>seckill <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Exposer</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Date startTime <span class="token operator">=</span> seckill<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Date endTime <span class="token operator">=</span> seckill<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Date nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> endTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Exposer</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> seckillId<span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> endTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ç³»ç»Ÿæ—¶é—´åœ¨ç§’æ€ä¹‹å†…ï¼Œæš´éœ²ç§’æ€æ¥å£</span>    String md5 <span class="token operator">=</span> <span class="token function">getMD5</span><span class="token punctuation">(</span>seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Exposer</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> md5<span class="token punctuation">,</span> seckillId<span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> endTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¸»è¦æ˜¯è¦è®¿é—®æ•°æ®åº“ï¼Œè·å–ç§’æ€å¯¹è±¡çš„ä¿¡æ¯ï¼ˆå¼€å§‹ç»“æŸæ—¶é—´ï¼Œä»¥ä½œåˆ¤æ–­æ˜¯å¦è¿›è¡Œï¼‰ï¼Œè¿˜æœ‰éªŒè¯å•†å“idæ˜¯å¦æ˜¯å‡çš„ã€‚<br>åæ­£å°±æ˜¯å¯¹æ•°æ®åº“çš„è®¿é—®æ˜¯å¾ˆå¤§çš„ã€‚  </p><p>å¯ä»¥å…ˆè®©ç”¨æˆ·å»ç¼“å­˜redisæ‰¾ï¼Œæ‰¾ä¸åˆ°å†å»æ•°æ®åº“æ‰¾ï¼Œæ•°æ®åº“æ‰¾åˆ°äº†çš„è¯è¿”å›ç”¨æˆ·åä¹Ÿé¡ºä¾¿å†™å…¥ç¼“å­˜ã€‚ä»¥åå¯ä»¥å»ç¼“æ‰¾äº†ã€‚ä¸€è‡´æ€§ç»´æŠ¤å¯ä»¥ç”¨ç®€å•çš„è¶…æ—¶ç¼“å­˜å®ç°ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>æŠŠä¸Šé¢çš„æš´éœ²ç§’æ€æ¥å£ä¸šåŠ¡ä»åªæ˜¯ä»æ•°æ®åº“è·å–æ”¹ä¸ºå¦‚ä¸‹:  </p><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> Exposer <span class="token function">exportSeckillUrl</span><span class="token punctuation">(</span><span class="token keyword">long</span> seckillId<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å…ˆè®¿é—®redisç¼“å­˜</span>    Seckill seckill <span class="token operator">=</span> redisDao<span class="token punctuation">.</span><span class="token function">getSeckill</span><span class="token punctuation">(</span>seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>seckill <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ç¼“å­˜æ²¡æœ‰ï¼Œè®¿é—®æ•°æ®åº“è·å–</span>        seckill <span class="token operator">=</span> seckillDao<span class="token punctuation">.</span><span class="token function">queryById</span><span class="token punctuation">(</span>seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>seckill <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ•°æ®åº“ä¹Ÿæ²¡æœ‰ï¼Œå‡çš„id</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Exposer</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æ•°æ®åº“æœ‰ï¼Œå­˜å…¥redisã€‚ç„¶åä¸‹é¢æ“ä½œå¤„ç†ç»™ç”¨æˆ·</span>            redisDao<span class="token punctuation">.</span><span class="token function">putSeckill</span><span class="token punctuation">(</span>seckill<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    Date startTime <span class="token operator">=</span> seckill<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Date endTime <span class="token operator">=</span> seckill<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Date nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> endTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Exposer</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> seckillId<span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> endTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ç³»ç»Ÿæ—¶é—´åœ¨ç§’æ€ä¹‹å†…ï¼Œæš´éœ²ç§’æ€æ¥å£</span>    String md5 <span class="token operator">=</span> <span class="token function">getMD5</span><span class="token punctuation">(</span>seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Exposer</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> md5<span class="token punctuation">,</span> seckillId<span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> endTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ€è·¯å¦‚ä¸Šï¼Œå…ˆå»ç¼“å­˜æ‰¾ï¼Œæ²¡æœ‰å†å»æ•°æ®åº“ï¼Œæ•°æ®åº“æ²¡æœ‰å°±æ˜¯ä¸å­˜åœ¨äº†ã€‚æœ‰çš„è¯å†™å…¥ç¼“å­˜ã€‚ç„¶åå†å¤„ç†è¿”å›ç»™ç”¨æˆ·ã€‚</p><p>Redisæ“ä½œå®ç°</p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> com<span class="token punctuation">.</span>dyuproject<span class="token punctuation">.</span>protostuff<span class="token punctuation">.</span>LinkedBuffer<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>dyuproject<span class="token punctuation">.</span>protostuff<span class="token punctuation">.</span>ProtostuffIOUtil<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>dyuproject<span class="token punctuation">.</span>protostuff<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>RuntimeSchema<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>Logger<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>LoggerFactory<span class="token punctuation">;</span><span class="token keyword">import</span> redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span>Jedis<span class="token punctuation">;</span><span class="token keyword">import</span> redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span>JedisPool<span class="token punctuation">;</span><span class="token keyword">import</span> xyz<span class="token punctuation">.</span>cglzwz<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>Seckill<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * redisæ“ä½œ * @author chgl16 * @date 2019/7/21 14:50 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisDao</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> JedisPool jedisPool<span class="token punctuation">;</span>    <span class="token keyword">private</span> RuntimeSchema<span class="token operator">&lt;</span>Seckill<span class="token operator">></span> schema <span class="token operator">=</span> RuntimeSchema<span class="token punctuation">.</span><span class="token function">createFrom</span><span class="token punctuation">(</span>Seckill<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">RedisDao</span><span class="token punctuation">(</span>String ip<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">)</span> <span class="token punctuation">{</span>        jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ä»redisé‡Œè·å–Seckillçš„byte[]ï¼Œååºåˆ—åŒ–     * @param seckillId     * @return     */</span>    <span class="token keyword">public</span> Seckill <span class="token function">getSeckill</span><span class="token punctuation">(</span><span class="token keyword">long</span> seckillId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ä»æ± å­è·å–ä¸€ä¸ªè¿æ¥</span>            Jedis jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ„å»ºå­˜å‚¨è¡¨ç¤ºçš„key</span>                String key <span class="token operator">=</span> <span class="token string">"seckill:"</span> <span class="token operator">+</span> seckillId<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// é‡‡ç”¨æ¯”jdkæä¾›çš„Serializableæ¥å£é«˜æ•ˆçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>bytes <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// ç¼“å­˜è·å–åˆ°</span>                    <span class="token comment" spellcheck="true">// åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span>                    Seckill seckill <span class="token operator">=</span> schema<span class="token punctuation">.</span><span class="token function">newMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// æŠŠæ•°æ®èµ‹äºˆåˆ°ç©ºå¯¹è±¡ä¸­</span>                    ProtostuffIOUtil<span class="token punctuation">.</span><span class="token function">mergeFrom</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> seckill<span class="token punctuation">,</span> schema<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> seckill<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * redisä¸­æ²¡æœ‰ï¼ŒæŠŠseckillå¯¹è±¡åºåˆ—åŒ–æˆå­—èŠ‚æ•°ç»„å‘é€åˆ°redis     * @param seckill     * @return     */</span>    <span class="token keyword">public</span> String <span class="token function">putSeckill</span><span class="token punctuation">(</span>Seckill seckill<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Jedis jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// æ„é€ key</span>                String key <span class="token operator">=</span> <span class="token string">"seckill:"</span> <span class="token operator">+</span> seckill<span class="token punctuation">.</span><span class="token function">getSeckillId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// åºåˆ—åŒ–å¯¹è±¡</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> ProtostuffIOUtil<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span>seckill<span class="token punctuation">,</span> schema<span class="token punctuation">,</span>                        LinkedBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span>LinkedBuffer<span class="token punctuation">.</span>DEFAULT_BUFFER_SIZE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼šè¶…æ—¶ç¼“å­˜ 1h</span>                <span class="token keyword">int</span> timeout <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// ç¼“å­˜åˆ°redisï¼Œresultä¸ºæ“ä½œæˆåŠŸå¤±è´¥æç¤º</span>                String result <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">setex</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> result<span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ•´åˆSpringçš„è¯æ³¨å…¥ä¸€ä¸‹beanï¼Œå› ä¸ºå±æ€§jedisPoolåªèƒ½æ„é€ æ³¨å…¥å®Œæˆåˆå§‹åŒ–ã€‚å¯ä»¥å¦‚ä¸‹</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- æ„é€ æ³¨å…¥redisï¼Œå®Œæˆå±æ€§æ³¨å…¥ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>redisDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>xyz.cglzwz.cache.RedisDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>127.0.0.1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>6379<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><ol><li>ä½¿ç”¨Jediså®¢æˆ·ç«¯ï¼Œä»JedisPoolä¸­getResource()è·å–ä¸€ä¸ªè¿æ¥ã€‚ç„¶åè¿›è¡Œæ“ä½œã€‚</li><li>è¿™é‡Œçš„key-valueéƒ½æ˜¯Stringï¼Œä½†æ˜¯å¯¹è¿æ¥redisæ“ä½œéƒ½éœ€è¦æ”¹ä¸ºbyte[]ï¼ŒRedisçš„Stringæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œå¯¹Javaå¯¹è±¡çš„åºåˆ—åŒ–å­˜å‚¨ä¹Ÿå¾ˆå¥½ã€‚</li><li>è¿™é‡Œä½¿ç”¨çš„åºåˆ—åŒ–æ–¹æ³•ä¸æ˜¯jdkæä¾›çš„Serializableæ¥å£ï¼Œè€Œæ˜¯ä½¿ç”¨é«˜æ•ˆçš„protostuffï¼Œå‹ç¼©ç‡å’Œé€Ÿåº¦æ›´å¿«ï¼Œå› æ­¤å¯¹å¹¶å‘æ›´å¥½ã€‚ååºåˆ—åŒ–çš„è¿‡ç¨‹æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼ˆæ²¡æœ‰å±æ€§å€¼ï¼‰ï¼Œç„¶åç”¨schemaå°†ä»ç¼“å­˜ä¸­è·å–åˆ°çš„åºåˆ—åŒ–çš„å¯¹è±¡bytesèµ‹è¿›å»ã€‚</li></ol><p>ä¾èµ–:</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- 5. redisç›¸å…³--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- é«˜æ•ˆçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ– --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.dyuproject.protostuff<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>protostuff-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.dyuproject.protostuff<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>protostuff-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><ol start="4"><li>è¿™é‡Œçš„ä¸€è‡´æ€§å¤„ç†é‡‡ç”¨çš„æ˜¯è¶…æ—¶ç¼“å­˜ã€‚è¿™ç§é€‚åˆé‚£ç§ç§’æ€å•†å“ï¼Œæ•°æ®åº“å¯¹åº”çš„ä¿¡æ¯å¾ˆå°‘æ”¹åŠ¨ã€‚æ‰€æœ‰å³ä¾¿è¶…æ—¶ï¼ˆè¿™é‡Œè®¾ç½®äº†ä¸€ä¸ªå°æ—¶ï¼‰ä»ç¼“å­˜åˆ å»ï¼Œå†ä»æ•°æ®åº“è·å–æ›´æ–°åˆ°ç¼“å­˜ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚ä¹Ÿæ˜¯ç»´æŠ¤ä¸€è‡´æ€§éå¸¸å¸¸ç”¨å’Œç®€å•çš„ä¸€ç§ç­–ç•¥æ–¹æ¡ˆã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åºåˆ—åŒ–ä¸ååºåˆ—åŒ– </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springå£°æ˜å¼äº‹åŠ¡</title>
      <link href="/2019/07/14/spring/spring-sheng-ming-shi-shi-wu/"/>
      <url>/2019/07/14/spring/spring-sheng-ming-shi-shi-wu/</url>
      
        <content type="html"><![CDATA[<h2 id="Springå£°æ˜å¼äº‹åŠ¡"><a href="#Springå£°æ˜å¼äº‹åŠ¡" class="headerlink" title="Springå£°æ˜å¼äº‹åŠ¡"></a>Springå£°æ˜å¼äº‹åŠ¡</h2><p><img src="https://img.mukewang.com/5d1577a7000126cc12800720.jpg" alt="ä½¿ç”¨æ–¹å¼">  </p><p>äº‹åŠ¡æ˜¯å¯¹äºå¤šä¸ªSQLæ‰§è¡Œæ‰æœ‰å¿…è¦ï¼Œä¸€ä¸ªå°±ç®—äº†ã€‚æ¨èä½¿ç”¨ç¬¬ä¸‰ç§@Transactionalï¼Œæ¯•ç«Ÿäº‹åŠ¡å£°æ˜æ˜¯å¾ˆä¸¥è°¨é‡è¦çš„ç‚¹ã€‚è¿™ä¸ªå¯è¯»æ€§ç­‰æ›´å¥½ã€‚</p><h2 id="æ³¨è§£å£°æ˜é…ç½®æ–¹å¼"><a href="#æ³¨è§£å£°æ˜é…ç½®æ–¹å¼" class="headerlink" title="æ³¨è§£å£°æ˜é…ç½®æ–¹å¼"></a>æ³¨è§£å£°æ˜é…ç½®æ–¹å¼</h2><p>spring-service.xml  </p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd       http://www.springframework.org/schema/context       http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>xyz.cglzwz.service<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><h2 id="Springå£°æ˜äº‹åŠ¡å›æ»š"><a href="#Springå£°æ˜äº‹åŠ¡å›æ»š" class="headerlink" title="Springå£°æ˜äº‹åŠ¡å›æ»š"></a>Springå£°æ˜äº‹åŠ¡å›æ»š</h2><p>Springå£°æ˜äº‹åŠ¡å›æ»šçš„é»˜è®¤æƒ…å†µæ˜¯ <strong>æŠ›å‡ºè¿è¡ŒæœŸå¼‚å¸¸</strong></p><h2 id="äº‹åŠ¡çš„åµŒå¥—ä¼ æ’­"><a href="#äº‹åŠ¡çš„åµŒå¥—ä¼ æ’­" class="headerlink" title="äº‹åŠ¡çš„åµŒå¥—ä¼ æ’­"></a>äº‹åŠ¡çš„åµŒå¥—ä¼ æ’­</h2><p>å¤šä¸ªäº‹åŠ¡åµŒå¥—ï¼Œå½“å†…/å¤–å›æ»šæäº¤éƒ½å‡ºç°çš„æ—¶å€™ï¼Œä¸åŒæƒ…å†µæœ‰ä¸åŒç»“æœã€‚ç°åœ¨æš‚æ—¶æ²¡æ‰“ç†ã€‚è¿™ä¸ªä¹Ÿå’Œäº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å…³ï¼ŒMySQLé»˜è®¤æ˜¯å¯é‡å¤è¯»ã€‚<br><a href="http://xiaorui.cc/2017/01/14/%E8%AE%A9%E4%BA%BA%E6%97%A0%E8%AF%AD%E7%9A%84mysql%E5%B5%8C%E5%A5%97%E4%BA%8B%E5%8A%A1/" target="_blank" rel="noopener">ä¸€ä¸ªåšä¸»çš„åˆ†äº«</a>ã€‚<br>è¿™é‡Œå†…å±‚äº‹åŠ¡ä¸€æ—¦start transactionå°±å¼ºåˆ¶å‰é¢çš„å¤–å±‚äº‹åŠ¡æäº¤äº†ã€‚</p><h2 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h2><p><a href="https://www.jianshu.com/p/4e3edbedb9a8" target="_blank" rel="noopener">ç®€ä¹¦ä¸€ä¸ªåšå®¢</a>å¾…éªŒè¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‹åŠ¡ </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLè¡¨é”è¡Œé”</title>
      <link href="/2019/07/13/mysql/mysql-xing-suo-biao-suo/"/>
      <url>/2019/07/13/mysql/mysql-xing-suo-biao-suo/</url>
      
        <content type="html"><![CDATA[<h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><p>MySQL Innodbæ”¯æŒè¡Œé”ï¼Œè€ŒMyISAMåªæ”¯æŒè¡¨é”ã€‚è¿™ä¸¤ç§ä¸»è¦æ˜¯ç²’åº¦çš„å·®åˆ«ã€‚é”æ˜¯äº‹åŠ¡çš„å…³é”®ä¿è¯ã€‚</p><ul><li>è¡¨é”ï¼š<br>å¼€é”€å°å®ç°ç®€å•ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šåŠ›åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªæ¦‚ç‡é«˜ï¼Œå¹¶å‘åº¦æœ€ä½</li><li>è¡Œé”ï¼š<br>å¼€é”€å¤§å®ç°å¤æ‚ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ï¼Œå¹¶å‘åº¦é«˜<blockquote><p>å½“ç„¶è¿˜æœ‰ä»‹äºä¸¤è€…ä¹‹é—´çš„é¡µé”ã€‚æ€§è´¨ä¹Ÿå±…ä¸­ã€‚</p></blockquote></li></ul><h2 id="è¡¨é”"><a href="#è¡¨é”" class="headerlink" title="è¡¨é”"></a>è¡¨é”</h2><p>MySQLçš„è¡¨çº§é”æœ‰ä¸¤ç§æ¨¡å¼ï¼šè¡¨å…±äº«è¯»é”ï¼ˆTable Read Lockï¼‰å’Œè¡¨ç‹¬å å†™é”ï¼ˆTable Write Lockï¼‰<br>ä¸€èˆ¬æ˜¯SELECTåŠ å…±äº«é”ï¼Œè€ŒINSERT, UPDATE, DELETEåŠ ç‹¬å é”</p><h2 id="è¡Œé”"><a href="#è¡Œé”" class="headerlink" title="è¡Œé”"></a>è¡Œé”</h2><p>è¡Œé”æ˜¯æ ¹æ®ç´¢å¼•å®ç°çš„<br>1.è¡Œé”å¿…é¡»æœ‰ç´¢å¼•æ‰èƒ½å®ç°ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é”å…¨è¡¨ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯è¡Œé”äº†ã€‚<br>2.ä¸¤ä¸ªäº‹åŠ¡ä¸èƒ½é”åŒä¸€ä¸ªç´¢å¼•ã€‚  </p><p>ä¾‹å¦‚ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- äº‹åŠ¡Aå…ˆæ‰§è¡Œï¼š  </span><span class="token keyword">select</span> math <span class="token keyword">from</span> zje <span class="token keyword">where</span> math<span class="token operator">></span><span class="token number">60</span> <span class="token keyword">for</span> <span class="token keyword">update</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">-- äº‹åŠ¡Bå†æ‰§è¡Œï¼š  </span><span class="token keyword">select</span> math <span class="token keyword">from</span> zje <span class="token keyword">where</span> math<span class="token operator">&lt;</span><span class="token number">60</span> <span class="token keyword">for</span> <span class="token keyword">update</span>ï¼›</code></pre><p>éƒ½æ˜¯ä½¿ç”¨äº†mathç´¢å¼•ï¼ŒAå…ˆçš„è¯ï¼Œäº‹åŠ¡Bä¼šè¢«é˜»å¡ï¼Œäº‹åŠ¡Bæ¢æˆå…¶ä»–ç´¢å¼•å°±ä¸ä¼šé˜»å¡ï¼Œéƒ½æ˜¯è¿˜æ˜¯ä¸èƒ½æœ‰é‡å¤äº¤æ¥çš„è¡Œï¼Œä¸ç„¶è¿˜æ˜¯é˜»å¡ã€‚</p><p>åˆæ¯”å¦‚å•†å“ç§’æ€æˆ–è€…æŠ¢çº¢åŒ…çš„æ—¶å€™ï¼Œå¯¹åº“å­˜æ•°é‡åšå¦‚ä¸‹æ“ä½œ</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> t_seckill <span class="token keyword">SET</span> num <span class="token operator">=</span> num <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">AND</span> num <span class="token operator">></span> <span class="token number">0</span></code></pre><p>idä½œä¸ºç´¢å¼•ï¼Œä¸åŒç»ˆç«¯çš„äº‹åŠ¡éƒ½å¯¹å…¶ä¿®æ”¹çš„è¯ï¼Œå› ä¸ºæ˜¯åŒä¸€ä¸ªç´¢å¼•ï¼ŒåŒä¸€æ¡è®°å½•ï¼Œè¿™é‡Œéƒ½æ˜¯ä¸²è¡Œçš„ã€‚å¤§é‡é˜»å¡ã€‚è¿™ä¹Ÿæ˜¯é«˜å¹¶å‘éœ€è¦ä¼˜åŒ–çš„é‡ç‚¹ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://blog.csdn.net/mysteryhaohao/article/details/51669741" target="_blank" rel="noopener">MySQLå­¦ä¹ ä¹‹â€”â€”é”(è¡Œé”ã€è¡¨é”ã€é¡µé”ã€ä¹è§‚é”ã€æ‚²è§‚é”ç­‰)</a> </li><li><a href="https://blog.csdn.net/nicajonh/article/details/78814987" target="_blank" rel="noopener">è¡Œé”ä¸è¡¨é”è¯¦è§£</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java8æ–°ç‰¹æ€§</title>
      <link href="/2019/07/12/java/java8-xin-te-xing-lambda/"/>
      <url>/2019/07/12/java/java8-xin-te-xing-lambda/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Java8æ˜¯é‡Œç¨‹ç¢‘çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸ä»…ä¼˜åŒ–é«˜æ•ˆï¼Œä¹Ÿå¸¦æ¥äº†å¾ˆå¤šå¥½ç”¨çš„æ–°ç‰¹æ€§ã€‚<br>å‡½æ•°å¼ç¼–ç¨‹å¤§å¤§å‡å°‘ä»£ç é‡å’Œä¾¿äºç»´æŠ¤ã€‚  </p><h2 id="1-æ¥å£æœ‰é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•"><a href="#1-æ¥å£æœ‰é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•" class="headerlink" title="1.æ¥å£æœ‰é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•"></a>1.æ¥å£æœ‰é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•</h2><p>åœ¨æ­¤ä¹‹å‰ï¼Œæ¥å£çš„æ–¹æ³•é»˜è®¤æ˜¯ public abstract ä¿®é¥°çš„ã€‚<br>å¦‚æœä¸€ä¸ªæ¥å£æœ‰å¤šä¸ªæ–¹æ³•ï¼Œæ¯æ¬¡å³ä¾¿æˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ä¸ªï¼Œä¹Ÿéœ€è¦å®ç°å…¨éƒ¨ï¼Œè€Œæ–°ç‰¹æ€§å¸¦æ¥çš„é»˜è®¤æ¥å£æ–¹æ³•å®Œç¾è§£å†³äº†è¿™ä¸ªã€‚å…¶å®å°±æ˜¯æ¥å£ä¹Ÿæœ‰å®ç°çš„æ–¹æ³•ã€‚  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAnimal</span> <span class="token punctuation">{</span>    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">breath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"breath!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>ä½¿ç”¨defaultå…³é”®å­—ä¿®é¥°   </p></blockquote><p>é™æ€æ–¹æ³•  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">interface</span> <span class="token class-name">DefaulableFactory</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Interfaces now allow static methods</span>    <span class="token keyword">static</span> Defaulable <span class="token function">create</span><span class="token punctuation">(</span> Supplier<span class="token operator">&lt;</span> Defaulable <span class="token operator">></span> supplier <span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> supplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="2-å‡½æ•°å¼æ¥å£FunctonIntefaceé…åˆLambda"><a href="#2-å‡½æ•°å¼æ¥å£FunctonIntefaceé…åˆLambda" class="headerlink" title="2.å‡½æ•°å¼æ¥å£FunctonIntefaceé…åˆLambda"></a>2.å‡½æ•°å¼æ¥å£FunctonIntefaceé…åˆLambda</h2><p>å¦‚æœä¸€ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå½“ç„¶å¯ä»¥æœ‰å¤šä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•ã€‚è¿™ç§æ¥å£ç§°ä¸ºå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼è§£å†³ä¹‹å‰å¦å¤–å†™å®ç°ç±»æˆ–è€…åŒ¿å†…éƒ¨ç±»çš„éº»çƒ¦ã€‚   </p><p>æ¯”å¦‚Runnableå’ŒCallable</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * When an object implementing interface &lt;code>Runnable&lt;/code> is used     * to create a thread, starting the thread causes the object's     * &lt;code>run&lt;/code> method to be called in that separately executing     * thread.     * &lt;p>     * The general contract of the method &lt;code>run&lt;/code> is that it may     * take any action whatsoever.     *     * @see     java.lang.Thread#run()     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Callable</span><span class="token operator">&lt;</span>V<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Computes a result, or throws an exception if unable to do so.     *     * @return computed result     * @throws Exception if unable to compute a result     */</span>    V <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™ä¸¤ä¸ªå…¸å‹çš„åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå°±æ˜¯å‡½æ•°å¼æ¥å£ã€‚å¯ä»¥ä½¿ç”¨@java.lang.FunctionIntefaceæ³¨è§£æ ‡æ³¨ã€‚å½“ç„¶è¿™åªæ˜¯ä¸ªæ ‡æ³¨æ³¨è§£ï¼Œå¯æœ‰å¯æ— ã€‚  </p><h4 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h4><p>Lambdaè¡¨è¾¾å¼ä¹Ÿç§°ä¸ºé—­åŒ…ï¼Œä¹Ÿæ˜¯åŒ¿åå‡½æ•°ã€‚<br>å¯¹äºä¹‹å‰çš„Runnableï¼ŒCallableè¿™ç§æŠ½è±¡å‡ºæ¥çš„ç­–ç•¥æ¨¡å‹æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š  </p><ol><li>å¦å¤–æ–°å»ºä¸€ä¸ªç±»å®ç°æ¥å£ï¼Œç„¶åä»¥æ­¤åˆ›å»ºå¯¹è±¡   </li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Work</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// do something</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="2"><li>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»<br>å› ä¸ºæ¯æ¬¡éƒ½å¦å¤–å®šä¹‰ä¸€ä¸ªå®ç°ç±»å¾ˆéº»çƒ¦ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªæ˜¯ä½¿ç”¨ä¸€æ¬¡ã€‚å› æ­¤å¯ä»¥ç®€å•çš„å†™ä¸ºåŒ¿åå†…éƒ¨ç±»çš„å½¢å¼ã€‚    </li></ol><pre class=" language-java"><code class="language-java">Inteface instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Inteface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> T <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// do something</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿™æ˜¯ç›´æ¥new æ¥å£ï¼Œç„¶åå®ç°å³å¯ã€‚æ¯”å¦‚  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// do something</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><hr><br>å¯¹æ¯”ä»¥ä¸Šä¸¤ç§ç¼–ç é‡è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå½“ç„¶è¿™ä¸¤ç§å¯¹æ¥å£çš„æŠ½è±¡æ–¹æ³•æ•°é‡æ²¡æœ‰é™å®šï¼Œä½†æ˜¯å¦‚æœæŠ½è±¡æ–¹æ³•åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œä½¿ç”¨LambdaåŒ¿åå‡½æ•°æ›´ä¼˜ç§€ã€‚    </p><p>ç‰¹åˆ«æ˜¯å¯¹äºå¸¸ç”¨çš„Runnablã€Callable<t>ä»¥åŠæ¯”è¾ƒå™¨Comparator<t>æ¥å£</t></t></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Runnable work <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>             <span class="token comment" spellcheck="true">// do something</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>work<span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>éå¸¸ç®€å•ï¼Œåªéœ€è¦ (æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨) -&gt; {å®ç°ä»£ç }<br>å¦‚æœå®ç°ä»£ç åªæœ‰ä¸€å¥ï¼Œå¤§èŠ±æ‹¬å·éƒ½å¯ä»¥çœç•¥ã€‚  </p><h2 id="å…¶ä»–æ”¹è¿›"><a href="#å…¶ä»–æ”¹è¿›" class="headerlink" title="å…¶ä»–æ”¹è¿›"></a>å…¶ä»–æ”¹è¿›</h2><p>é™¤äº†è¿™ä¸ªå¸¸ç”¨çš„æ–°ç‰¹æ€§ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸€äº›æ”¹è¿›ã€‚  </p><ol><li>Date/time APIæ”¹è¿›</li><li>å¼•å…¥Streamæµï¼Œç»“åˆLambdaæ›´ä¼˜</li><li>å…¶ä»–æ”¹è¿›</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLä¸­æ–‡ä¹±ç </title>
      <link href="/2019/07/11/mysql/mysql-zhong-wen-luan-ma/"/>
      <url>/2019/07/11/mysql/mysql-zhong-wen-luan-ma/</url>
      
        <content type="html"><![CDATA[<h2 id="æ’å…¥ä¹±ç "><a href="#æ’å…¥ä¹±ç " class="headerlink" title="æ’å…¥ä¹±ç "></a>æ’å…¥ä¹±ç </h2><p>å³ä¾¿æ•°æ®åº“å’Œè¡¨å¦‚ä¸‹utf8ç¼–ç é…ç½®</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">`</span>db_name<span class="token punctuation">`</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER SET</span> utf8<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>tb_name<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1000</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span></code></pre><p>è¿™æ ·INSERT INTO <code>tb_name</code>..ä¾ç„¶ä¸­æ–‡ä¹±ç   </p><p>SQLException: /xx /xxè¿™ç§</p><p>å¦‚ä¸‹å¯ä»¥æŸ¥çœ‹å†…éƒ¨ç¼–ç ï¼š</p><pre class=" language-bash"><code class="language-bash">mysql<span class="token operator">></span> show variables like <span class="token string">'%character%'</span><span class="token punctuation">;</span>+--------------------------+----------------------------------------+<span class="token operator">|</span> Variable_name            <span class="token operator">|</span> Value                                  <span class="token operator">|</span>+--------------------------+----------------------------------------+<span class="token operator">|</span> character_set_client     <span class="token operator">|</span> gbk                                    <span class="token operator">|</span><span class="token operator">|</span> character_set_connection <span class="token operator">|</span> gbk                                    <span class="token operator">|</span><span class="token operator">|</span> character_set_database   <span class="token operator">|</span> utf8                                   <span class="token operator">|</span><span class="token operator">|</span> character_set_filesystem <span class="token operator">|</span> binary                                 <span class="token operator">|</span><span class="token operator">|</span> character_set_results    <span class="token operator">|</span> gbk                                    <span class="token operator">|</span><span class="token operator">|</span> character_set_server     <span class="token operator">|</span> utf8mb4                                <span class="token operator">|</span><span class="token operator">|</span> character_set_system     <span class="token operator">|</span> utf8                                   <span class="token operator">|</span><span class="token operator">|</span> character_sets_dir       <span class="token operator">|</span> G:\mysql-8.0.16-winx64\share\charsets\ <span class="token operator">|</span>+--------------------------+----------------------------------------+8 rows <span class="token keyword">in</span> set, 1 warning <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span></code></pre><p>å¯ä»¥æš‚æ—¶ä¿®æ”¹ï¼Œä½†æ˜¯ä»…é™æœ¬sessionæœ‰æ•ˆï¼Œå½“ç„¶å¯ä»¥SET global charâ€¦ï¼Œä½†æ˜¯é‡å¯æœåŠ¡å°±æ²¡äº†ã€‚</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SET</span> character_set_client<span class="token operator">=</span>utf8<span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre><p>é•¿æœŸæœ‰æ•ˆè¦æ”¹æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œmy.iniä¹‹ç±»åœ¨å®‰è£…ç›®å½•æ˜¯æ²¡æœ‰çš„ï¼Œç½‘ä¸Šåˆè¯´åœ¨Cç›˜çš„æ•°æ®åŒºçš„ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°ã€‚</p><p>æœ€åå‘ç°åœ¨Windowsä¸Šçš„é«˜ç‰ˆæœ¬MySQLï¼Œè§£å†³ä¸­æ–‡ä¹±ç ï¼ŒçœŸçš„åªèƒ½åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé»˜è®¤è¢«è¯†åˆ«çš„my.inié…ç½®æ–‡ä»¶ï¼Œåœ¨é‡Œé¢åšæ ¹æœ¬é…ç½®ã€‚å¦‚ä¸‹<br>my.ini</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>character-set-server<span class="token operator">=</span>utf8<span class="token punctuation">[</span>client<span class="token punctuation">]</span>default-character-set<span class="token operator">=</span>utf8</code></pre><p>é‡å¯æœåŠ¡å³å¯æˆåŠŸ</p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p><a href="https://www.cnblogs.com/reyinever/p/8551977.html" target="_blank" rel="noopener">Windowså®‰è£…Mysql</a></p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Comparableå’ŒComparatoræ¥å£</title>
      <link href="/2019/07/11/java/comparable-he-comparator-jie-kou/"/>
      <url>/2019/07/11/java/comparable-he-comparator-jie-kou/</url>
      
        <content type="html"><![CDATA[<h2 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable</h2><p>è¿™æ˜¯ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦åšå¯¹æ¯”çš„ç±»å¯ä»¥å®ç°å®ƒï¼Œæ¯”å¦‚Stringï¼ŒDoubleï¼ŒIntegerç­‰éƒ½å®ç°äº†å®ƒã€‚<br>ä»¥ä¸‹æ˜¯Stringçš„éƒ¨åˆ†æºç </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">String</span> <span class="token keyword">implements</span> <span class="token class-name">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Serializable</span><span class="token punctuation">,</span> Comparable<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">,</span> CharSequence <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Compares two strings lexicographically.     * The comparison is based on the Unicode value of each character in     * the strings. The character sequence represented by this     * {@code String} object is compared lexicographically to the     * character sequence represented by the argument string. The result is     * a negative integer if this {@code String} object     * lexicographically precedes the argument string. The result is a     * positive integer if this {@code String} object lexicographically     * follows the argument string. The result is zero if the strings     * are equal; {@code compareTo} returns {@code 0} exactly when     * the {@link #equals(Object)} method would return {@code true}.     * &lt;p>     * This is the definition of lexicographic ordering. If two strings are     * different, then either they have different characters at some index     * that is a valid index for both strings, or their lengths are different,     * or both. If they have different characters at one or more index     * positions, let &lt;i>k&lt;/i> be the smallest such index; then the string     * whose character at position &lt;i>k&lt;/i> has the smaller value, as     * determined by using the &amp;lt; operator, lexicographically precedes the     * other string. In this case, {@code compareTo} returns the     * difference of the two character values at position {@code k} in     * the two string -- that is, the value:     * &lt;blockquote>&lt;pre>     * this.charAt(k)-anotherString.charAt(k)     * &lt;/pre>&lt;/blockquote>     * If there is no index position at which they differ, then the shorter     * string lexicographically precedes the longer string. In this case,     * {@code compareTo} returns the difference of the lengths of the     * strings -- that is, the value:     * &lt;blockquote>&lt;pre>     * this.length()-anotherString.length()     * &lt;/pre>&lt;/blockquote>     *     * @param   anotherString   the {@code String} to be compared.     * @return  the value {@code 0} if the argument string is equal to     *          this string; a value less than {@code 0} if this string     *          is lexicographically less than the string argument; and a     *          value greater than {@code 0} if this string is     *          lexicographically greater than the string argument.     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>String anotherString<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> len1 <span class="token operator">=</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> len2 <span class="token operator">=</span> anotherString<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> lim <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>len1<span class="token punctuation">,</span> len2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span> v1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token keyword">char</span> v2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> anotherString<span class="token punctuation">.</span>value<span class="token punctuation">;</span>        <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> lim<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">char</span> c1 <span class="token operator">=</span> v1<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">char</span> c2 <span class="token operator">=</span> v2<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>c1 <span class="token operator">!=</span> c2<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> c1 <span class="token operator">-</span> c2<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            k<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> len1 <span class="token operator">-</span> len2<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿™ä¸ªStringå®ç°çš„compareToæ–¹æ³•å¹¶ä¸æ˜¯å¯¹æ¯”ä¸¤ä¸ªæ•°å€¼å‹å­—ç¬¦ä¸²çš„å¤§å°ï¼Œè€Œæ˜¯åˆ¤æ–­ä»–ä»¬æ‹¼æ¥æˆçš„æ•°é‚£ç§å°ï¼Œå¯¹åº”çš„å°çš„åœ¨å‰é¢ã€‚æ¯”å¦‚  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span> <span class="token punctuation">{</span>        String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">"24"</span><span class="token punctuation">,</span> <span class="token string">"12"</span><span class="token punctuation">,</span> <span class="token string">"999"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>String s <span class="token operator">:</span> arr<span class="token punctuation">)</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>s <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è¾“å‡º</span><span class="token comment" spellcheck="true">// 1 12 2 24 999 </span></code></pre><p>è¿™é‡Œçš„12åœ¨2çš„å‰é¢ï¼Œæ˜¯å› ä¸º 122 &lt; 212ã€‚åŒç†1 &lt; 12æ˜¯å› ä¸º 112 &lt; 121<br>é»˜è®¤æ˜¯å‡åº</p><p>å†çœ‹çœ‹Integerçš„  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Compares two {@code Integer} objects numerically.     *     * @param   anotherInteger   the {@code Integer} to be compared.     * @return  the value {@code 0} if this {@code Integer} is     *          equal to the argument {@code Integer}; a value less than     *          {@code 0} if this {@code Integer} is numerically less     *          than the argument {@code Integer}; and a value greater     *          than {@code 0} if this {@code Integer} is numerically     *           greater than the argument {@code Integer} (signed     *           comparison).     * @since   1.2     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>Integer anotherInteger<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> anotherInteger<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Compares two {@code int} values numerically.     * The value returned is identical to what would be returned by:     * &lt;pre>     *    Integer.valueOf(x).compareTo(Integer.valueOf(y))     * &lt;/pre>     *     * @param  x the first {@code int} to compare     * @param  y the second {@code int} to compare     * @return the value {@code 0} if {@code x == y};     *         a value less than {@code 0} if {@code x &lt; y}; and     *         a value greater than {@code 0} if {@code x > y}     * @since 1.7     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å…¶å®ç®€å•ç‚¹å°±æ˜¯return this.value - other.value;<br>å› ä¸º this.value - other.value &gt; 0çš„è¯ï¼Œè¿”å› &gt; 0çš„æ•°å°±æ˜¯å‡åºï¼Œè¿”å›å°äºé›¶çš„æ•°å°±æ˜¯é™åºã€‚é»˜è®¤éƒ½æ˜¯å‡åºçš„ã€‚æ‰€æœ‰å¯¹äºè¿™äº›å…¶å®å†…éƒ¨å·²ç»å®ç°äº†Comparable<t>æ¥å£çš„ç±»ç»„æˆçš„æ•°ç»„æˆ–è€…åˆ—è¡¨ï¼Œå¯ä»¥ç›´æ¥ç”¨  </t></p><pre class=" language-java"><code class="language-java">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>Integer<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å› ä¸ºå†…éƒ¨å°±ç”¨Comparableæ¥å£æ–¹å¼è®¾å®šäº†é¡ºåºï¼Œå› æ­¤æ— åºä½¿ç”¨Comparatorå‚æ•° </p><p>æ¯”å¦‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Interval</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token operator">&lt;</span>Interval<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> start<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> end<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Interval</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> end<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>Interval interval<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">-</span> interval<span class="token punctuation">.</span>start<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Interval [start="</span> <span class="token operator">+</span> start <span class="token operator">+</span> <span class="token string">", end="</span> <span class="token operator">+</span> end <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä½¿ç”¨</p><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>Interval<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Interval<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å‡åº        </span>Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="Comparator"><a href="#Comparator" class="headerlink" title="Comparator"></a>Comparator</h2><p>è¿™ä¸ªä¸€èˆ¬æ˜¯ç”¨æ¥åšå‚æ•°çš„ã€‚æ¯•ç«Ÿä»»ä½•ç±»å‹çš„ç±»éƒ½å®ç°Comparableä¸å¤ªæ»¡è¶³é¢å‘å¯¹è±¡çš„åˆç”¨å¤ç”¨åŸåˆ™ï¼Œå› ä¸ºä¼˜å…ˆä½¿ç”¨æ„æˆå±æ€§è€Œä¸æ˜¯ç»§æ‰¿æˆ–è€…å®ç°ã€‚å½“ç„¶Comparableè¿™ç§å·¥å…·å‹æ¥å£å®ç°ä¹Ÿæ²¡å•¥ã€‚è€ŒComparatoræ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥è‡ªå®šä¹‰å¤šä¸ªéœ€è¦çš„æ¯”è¾ƒå™¨ï¼Œå®ç°è¿™ä¸ªæ¥å£ï¼Œå¹¶ä¸”å®ç°compare(Object obj1, Object obj2)æ–¹æ³•å³å¯ã€‚  </p><p>éƒ¨åˆ†æºç </p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Comparator</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Compares its two arguments for order.  Returns a negative integer,     * zero, or a positive integer as the first argument is less than, equal     * to, or greater than the second.&lt;p>     *     * In the foregoing description, the notation     * &lt;tt>sgn(&lt;/tt>&lt;i>expression&lt;/i>&lt;tt>)&lt;/tt> designates the mathematical     * &lt;i>signum&lt;/i> function, which is defined to return one of &lt;tt>-1&lt;/tt>,     * &lt;tt>0&lt;/tt>, or &lt;tt>1&lt;/tt> according to whether the value of     * &lt;i>expression&lt;/i> is negative, zero or positive.&lt;p>     *     * The implementor must ensure that &lt;tt>sgn(compare(x, y)) ==     * -sgn(compare(y, x))&lt;/tt> for all &lt;tt>x&lt;/tt> and &lt;tt>y&lt;/tt>.  (This     * implies that &lt;tt>compare(x, y)&lt;/tt> must throw an exception if and only     * if &lt;tt>compare(y, x)&lt;/tt> throws an exception.)&lt;p>     *     * The implementor must also ensure that the relation is transitive:     * &lt;tt>((compare(x, y)&amp;gt;0) &amp;amp;&amp;amp; (compare(y, z)&amp;gt;0))&lt;/tt> implies     * &lt;tt>compare(x, z)&amp;gt;0&lt;/tt>.&lt;p>     *     * Finally, the implementor must ensure that &lt;tt>compare(x, y)==0&lt;/tt>     * implies that &lt;tt>sgn(compare(x, z))==sgn(compare(y, z))&lt;/tt> for all     * &lt;tt>z&lt;/tt>.&lt;p>     *     * It is generally the case, but &lt;i>not&lt;/i> strictly required that     * &lt;tt>(compare(x, y)==0) == (x.equals(y))&lt;/tt>.  Generally speaking,     * any comparator that violates this condition should clearly indicate     * this fact.  The recommended language is "Note: this comparator     * imposes orderings that are inconsistent with equals."     *     * @param o1 the first object to be compared.     * @param o2 the second object to be compared.     * @return a negative integer, zero, or a positive integer as the     *         first argument is less than, equal to, or greater than the     *         second.     * @throws NullPointerException if an argument is null and this     *         comparator does not permit null arguments     * @throws ClassCastException if the arguments' types prevent them from     *         being compared by this comparator.     */</span>    <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>T o1<span class="token punctuation">,</span> T o2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Interval</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> start<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> end<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Interval</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> end<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Interval [start="</span> <span class="token operator">+</span> start <span class="token operator">+</span> <span class="token string">", end="</span> <span class="token operator">+</span> end <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">MyComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token operator">&lt;</span>Interval<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>Interval a<span class="token punctuation">,</span> Interval b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span>start <span class="token operator">-</span> b<span class="token punctuation">.</span>start<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿™æ ·ä¹Ÿå¯ä»¥å®šä¹‰å¾ˆå¤šä¸ªï¼Œobj.value - obj2.value &gt; 0 è¿”å›æ­£æ•°åˆ™æ˜¯å‡åºï¼Œè¿”å›è´Ÿæ•°æ˜¯é™åºã€‚  </p><p>è¿™é‡Œè°ƒç”¨å°±éœ€è¦å¦‚ä¸‹äº†ã€‚ä¸æ·»åŠ æ¯”è¾ƒå™¨å‚æ•°Listç±»å‹ç±»æ²¡æœ‰å®ç°Comparableæ¥å£ä¼šæŠ¥é”™çš„ã€‚</p><pre class=" language-java"><code class="language-java">Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä½¿ç”¨java.util.Arrays.sortä»¥åŠjava.util.Collections.sortä¸¤ä¸ªæ–¹æ³•éƒ½æ”¯æŒè®¾ç½®æ’åºé¡ºåºã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•:  </p><ol><li>æ•°ç»„/åˆ—è¡¨ç±»å‹ç±»å®ç°Comparable<t>æ¥å£ï¼Œå®ç°compareTo(T other)æ–¹æ³•</t></li><li>å¦å¤–å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå™¨ç±»å®ç°Comparator<t>æ¥å£ï¼Œå®ç°compare(T t1, T t2)æ–¹æ³•ã€‚</t></li></ol><p>é»˜è®¤å®ç°çš„æ˜¯å‡åº  </p><ol><li>å‡åºä½¿ç”¨ return t1.value - t2.valueï¼Œreturn this.value - other.valueå³å¯  </li><li>å‡åºä½¿ç”¨ return t2.value - t1.valueï¼Œreturn other.value - this.valueå³å¯  </li><li>è§„èŒƒç‚¹æ­£æ•°è¿”å›1ï¼Œè´Ÿæ•°è¿”å›-1ï¼Œç›¸ç­‰ä¸º0  </li></ol><p>å¦‚æœä¸¤ç§éƒ½æ²¡æœ‰ä½¿ç”¨ï¼Œå´sortå°±ä¼šæŠ¥é”™ï¼Œå¦‚æœä¸¤è€…éƒ½ç”¨äº†ï¼ŒComparatorçš„ä¼šè¦†ç›–æ‰Comparableçš„</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Comparable </tag>
            
            <tag> Comparator </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥å¿—é‡‡é›†ç³»ç»Ÿæ€è·¯</title>
      <link href="/2019/07/10/za-ji/ri-zhi-cai-ji-xi-tong-si-lu/"/>
      <url>/2019/07/10/za-ji/ri-zhi-cai-ji-xi-tong-si-lu/</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>æœåŠ¡å™¨ä¸Šçš„æ—¥å¿—ä¼šå®æ—¶ç”Ÿæˆï¼Œäº‰å¯¹è¿™äº›æ—¥å¿—è®°å½•ï¼Œæœ‰äº›æœ‰ç”¨çš„æ•°æ®éœ€è¦é‡‡é›†è®°å½•å…¥åº“ã€‚å› æ­¤æœ‰å¾ˆå¤šæ€è·¯æ–¹æ¡ˆã€‚</p><h3 id="1-ELK"><a href="#1-ELK" class="headerlink" title="1. ELK"></a>1. ELK</h3><p>è¿™ä¸ªå¾ˆå¸¸è§ã€‚æ˜¯ Elasticsearchã€Logstash å’Œ Kibana ä¸‰ç§è½¯ä»¶äº§å“çš„é¦–å­—æ¯ç¼©å†™ã€‚è¿™ä¸‰è€…éƒ½æ˜¯å¼€æºè½¯ä»¶ï¼Œé€šå¸¸é…åˆä½¿ç”¨</p><ul><li>Elasticsearchï¼šåˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œå…·æœ‰é«˜å¯ä¼¸ç¼©ã€é«˜å¯é å’Œæ˜“ç®¡ç†ç­‰ç‰¹ç‚¹ã€‚åŸºäº Apache Lucene æ„å»ºï¼Œèƒ½å¯¹å¤§å®¹é‡çš„æ•°æ®è¿›è¡Œæ¥è¿‘å®æ—¶çš„å­˜å‚¨ã€æœç´¢å’Œåˆ†ææ“ä½œã€‚é€šå¸¸è¢«ç”¨ä½œæŸäº›åº”ç”¨çš„åŸºç¡€æœç´¢å¼•æ“ï¼Œä½¿å…¶å…·æœ‰å¤æ‚çš„æœç´¢åŠŸèƒ½ï¼›</li><li>Logstashï¼šæ•°æ®æ”¶é›†å¼•æ“ã€‚å®ƒæ”¯æŒåŠ¨æ€çš„ä»å„ç§æ•°æ®æºæœé›†æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€åˆ†æã€ä¸°å¯Œã€ç»Ÿä¸€æ ¼å¼ç­‰æ“ä½œï¼Œç„¶åå­˜å‚¨åˆ°ç”¨æˆ·æŒ‡å®šçš„ä½ç½®ï¼›</li><li>Kibanaï¼šæ•°æ®åˆ†æå’Œå¯è§†åŒ–å¹³å°ã€‚é€šå¸¸ä¸ Elasticsearch é…åˆä½¿ç”¨ï¼Œå¯¹å…¶ä¸­æ•°æ®è¿›è¡Œæœç´¢ã€åˆ†æå’Œä»¥ç»Ÿè®¡å›¾è¡¨çš„æ–¹å¼å±•ç¤ºï¼›</li></ul><h3 id="2-Filebeat-Kafka-Logstash"><a href="#2-Filebeat-Kafka-Logstash" class="headerlink" title="2. Filebeat + Kafka + Logstash"></a>2. Filebeat + Kafka + Logstash</h3><p>å…¶å®Filebeatä¹Ÿç®—æ˜¯ELK åè®®æ ˆçš„æ–°æˆå‘˜ï¼Œä¸€ä¸ªè½»é‡çº§å¼€æºæ—¥å¿—æ–‡ä»¶æ•°æ®æœé›†å™¨ï¼ŒåŸºäº Logstash-Forwarder æºä»£ç å¼€å‘ï¼Œæ˜¯å¯¹å®ƒçš„æ›¿ä»£ã€‚åœ¨éœ€è¦é‡‡é›†æ—¥å¿—æ•°æ®çš„ server ä¸Šå®‰è£… Filebeatï¼Œå¹¶æŒ‡å®šæ—¥å¿—ç›®å½•æˆ–æ—¥å¿—æ–‡ä»¶åï¼ŒFilebeat å°±èƒ½è¯»å–æ•°æ®ï¼Œè¿…é€Ÿå‘é€åˆ° Logstash è¿›è¡Œè§£æï¼Œäº¦æˆ–ç›´æ¥å‘é€åˆ° Elasticsearch è¿›è¡Œé›†ä¸­å¼å­˜å‚¨å’Œåˆ†æã€‚  </p><p>Filebeatçš„è¾“å…¥æ˜¯æœ¬æœºçš„æ—¥å¿—æ–‡ä»¶ï¼Œä¸èƒ½è¿œç¨‹ä¸»æœºä½œä¸ºè¾“å…¥çš„ï¼Œå…¥ä¾µå¼æ˜¯å®ƒçš„ä¸€ä¸ªå¼Šç«¯ã€‚ä½†æ˜¯ä½“é‡å¾ˆè½»é‡ã€‚æ”¯æŒå¤šå¹³å°ã€‚è¾“å‡ºæ¨¡å‹å¾ˆå¤šã€‚å¯ä»¥æ¥Kafkaï¼Œä¹Ÿå¯ä»¥æ˜¯ç›´æ¥çš„Elasticsearchï¼ˆé»˜è®¤ï¼‰æˆ–è€…Logstashç­‰ç­‰ã€‚  </p><p>è¿™é‡Œæ˜¯å°†Filebeatè¾“å‡ºä½œä¸ºKafkaçš„ç”Ÿäº§è€…è€…ï¼Œå¯¹åº”topicçš„æ¶ˆè´¹è€…æ¥åˆ°Logstashåšæ•°æ®æ­£åˆ™æˆªå–è¿‡æ»¤ï¼Œç„¶åå†è¾“å‡ºåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ“ä½œã€‚Filebeatæ¯30ç§’ä¸€æ¬¡å¿ƒè·³ã€‚ä¼šå°†æ–°ç”Ÿæˆæ—¥å¿—ï¼ˆä¸Šæ¬¡å°¾è¡Œä¹‹åï¼‰çš„ä¸€æ¬¡æ‰“åŒ…ä¸ºä¸€ä¸ªå¤§jsonè¾“å‡ºã€‚é‡Œé¢ä¹Ÿä¼šæ·»åŠ å¾ˆå¤šè‡ªèº«çš„ä¸€äº›å±æ€§ï¼Œæ—¥å¿—éƒ½åœ¨messageå±æ€§é‡Œï¼Œæ˜¯ä¸ªä¸²ã€‚ä½†æ˜¯Filebeatæ¯æ¬¡ä¸èƒ½å‘é€æœ€åä¸€è¡Œã€‚æ˜¯ä¸ªç¼ºé™·ã€‚</p><p>è¿™äº›éƒ½å¯ä»¥åšé›†ç¾¤ï¼Œä¸åŒçš„æ—¥å¿—æ–‡ä»¶è¿è¡Œå¤šä¸ªFilebeatä¹Ÿå¯ä»¥å·²ï¼Œåˆ†åˆ«åˆ¶å®šä¸åŒçš„é…ç½®æ–‡ä»¶å³å¯ã€‚è¾“å‡ºé›†ç¾¤æä¾›æ›´å‹å¥½ï¼Œç›´æ¥host: [ip1: port, ip2:port2â€¦.]</p><h3 id="3-HDFS-Hive"><a href="#3-HDFS-Hive" class="headerlink" title="3. HDFS + Hive"></a>3. HDFS + Hive</h3><p>å…ˆå°†æ—¥å¿—æ–‡ä»¶æ‹‰å…¥HDFSï¼Œåšå…³è”æ‰¹é‡æ’å…¥Hiveï¼Œå¯¹å¤§æ–‡ä»¶ï¼Œå¤§æ•°æ®æŸ¥è¯¢æ›´ä¼˜ç§€</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¿—é‡‡é›† </tag>
            
            <tag> Filebeat </tag>
            
            <tag> Kafka </tag>
            
            <tag> Logstash </tag>
            
            <tag> HDFS </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisç»“åˆSpringçš„ä¸€äº›å›é¡¾</title>
      <link href="/2019/07/05/spring/mybatis-jie-he-spring-hui-gu/"/>
      <url>/2019/07/05/spring/mybatis-jie-he-spring-hui-gu/</url>
      
        <content type="html"><![CDATA[<h2 id="MyBatisç»“åˆSpring"><a href="#MyBatisç»“åˆSpring" class="headerlink" title="MyBatisç»“åˆSpring"></a>MyBatisç»“åˆSpring</h2><blockquote><p>å¥½ä¹…æ²¡æ‰“è¿™ä»£ç äº†ï¼Œå›é¡¾ä¸€ä¸‹ã€‚  </p></blockquote><p>ä¸¤è€…æ•´åˆä¸ä»…å¯ä»¥å‡å°‘ä»£ç é‡ï¼Œå‡å°‘é…ç½®ã€‚ä¹Ÿå¯ä»¥ä¿æŒMyBatisçš„çµæ´»æ€§ã€‚</p><h3 id="1-ä¾èµ–"><a href="#1-ä¾èµ–" class="headerlink" title="1. ä¾èµ–"></a>1. ä¾èµ–</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>è¿™ä¸ªæ•´åˆä¾èµ–æ˜¯MyBatisç¤¾åŒºæä¾›çš„ï¼ŒSpringåªæ˜¯ä¸ºäº†æ—©æœŸçš„Batisæä¾›äº†æ•´åˆä¾èµ–ã€‚ç°åœ¨å¥½åƒè¿˜æœ‰MyBatis-Plusäº†..</p><h3 id="2-mybatis-config-xml"><a href="#2-mybatis-config-xml" class="headerlink" title="2. mybatis-config.xml"></a>2. mybatis-config.xml</h3><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE configuration        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-config.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- é…ç½®å…¨å±€å±æ€§ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ’å…¥è·å–è‡ªå¢ä¸»é”® --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>useGeneratedKeys<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨åˆ—åˆ«åæ›¿ä»£åˆ—å --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>useColumnLabel<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨é©¼å³°æ˜ å°„ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mapUnderscoreToCamelCase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æ•°æ®æºè¿æ¥æ± ã€ç±»å‹åˆ«åtypeAliasesã€mappersæ˜ å°„å™¨ä½ç½®ç­‰ç”±Springæ•´åˆ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><p>è¿™æ˜¯æœ€ç®€åŒ–çš„MyBatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œåªæ˜¯é…äº†å‡ ä¸ªå¸¸ç”¨çš„settingã€‚æ•°æ®åº“ï¼Œåˆ«åï¼Œmapperæ˜ å°„å™¨ä½ç½®è¿™äº›éƒ½ç•™ç»™Springæ•´åˆäº†ã€‚</p><h3 id="3-XxxDao-xml"><a href="#3-XxxDao-xml" class="headerlink" title="3. XxxDao.xml"></a>3. XxxDao.xml</h3><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>xyz.cglzwz.dao.SeckillDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reduceNumber<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- xmlä¼šè§£æ&lt;ä¸ºè¯­æ³•ï¼Œå› æ­¤å¯ä»¥ç”¨&lt;!CDATA[]]>å…é™¤ --></span>        UPDATE `t_seckill` SET `number` = `number` - 1            WHERE `seckill_id` = #{seckillId} AND `number` > 0                AND `start_time` <span class="token cdata">&lt;![CDATA[ &lt;= ]]></span> #{killTime}                AND `end_time` >= #{killTime}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Seckill<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>long<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        SELECT `seckill_id`, `name`, `number`, `start_time`, `end_time`,            `create_time` FROM `t_seckill`            WHERE `seckill_id` = #{seckillId}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryAll<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Seckill<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        SELECT `seckill_id`, `name`, `number`, `start_time`, `end_time`,            `create_time` FROM `t_seckill`            ORDER BY `create_time` DESC            LIMIT #{offset}, #{limit}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>mapperæ˜¯å…¶å®ç®—æ˜¯åªè¦å†™æ¥å£ï¼Œä¸ç”¨å®ç°ç±»çš„å®ç°ç±»äº†ã€‚æœ‰ç‚¹æ‹—å£ã€‚<br>æ¯”å¦‚ï¼š</p><pre class=" language-java"><code class="language-java">   Seckill <span class="token function">queryById</span><span class="token punctuation">(</span><span class="token keyword">long</span> seckillId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* ç»“æœé›†    è¡Œä¸º           å‚æ•°      */</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Seckill<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>long<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        SELECT `seckill_id`, `name`, `number`, `start_time`, `end_time`,            `create_time` FROM `t_seckill`            WHERE `seckill_id` = #{seckillId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p>è¿™ç§Daoæ¥å£çš„ä¸€ä¸ªæ–¹æ³•ï¼ŒMyBatisæ˜¯åº•å±‚å°è£…äº†JDBCï¼Œä¸ç”¨å†™è¿™ä¸ªçš„å®ç°æ˜¯å› ä¸ºæˆ‘ä»¬è¿™ä¸ªmapperçš„è¿™ä¸ªå°±ç›¸å½“äºå®ç°äº†ï¼Œç±»ä¼¼JDBCï¼Œæœ‰äº†å‚æ•°ï¼ŒPreparedStatementè¡Œä¸ºå°±æ˜¯SQLï¼Œè¿”å›å€¼å°±æ˜¯ç»“æœé›†ResultSetï¼Œä¿¡æ¯å®Œæ•´äº†ï¼Œå¯ä»¥äº¤ç»™åº•å±‚JDBCå®ç°ã€‚</p><p>æ­¤å¤–ç”±Spring æ¥ç®¡è¿™äº›mapperï¼Œæ˜¯å¯ä»¥ç›´æ¥ç”Ÿæˆå¯¹åº”DAOçš„å®ç°ç±»è‡ªåŠ¨æ³¨å…¥IOCçš„ã€‚</p><h3 id="4-spring-dao-xmlæ•´åˆ"><a href="#4-spring-dao-xmlæ•´åˆ" class="headerlink" title="4. spring-dao.xmlæ•´åˆ"></a>4. spring-dao.xmlæ•´åˆ</h3><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd       http://www.springframework.org/schema/context       http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- é…ç½®æ•´åˆMyBatisè¿‡ç¨‹ --></span>    <span class="token comment" spellcheck="true">&lt;!-- 1. æ•°æ®åº“å‚æ•°ï¼Œpropertiså±æ€§ï¼š${username} --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- 2. è¿æ¥æ±  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mchange.v2.c3p0.ComboPooledDataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- é…ç½®è¿æ¥æ± å±æ€§ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driverClass<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${driver}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbcUrl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${url}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${username}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${password}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- c3p0è¿æ¥æ± çš„ç§æœ‰å±æ€§ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>minPoolSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxPoolSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>autoCommitOnClose<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- è·å–è¿æ¥è¶…æ—¶æ—¶é—´ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkoutTimeout<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- è·å–è¿æ¥å¤±è´¥å¯ä»¥é‡è¯•æ¬¡æ•° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>acquireRetryAttempts<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- 3.é…ç½®SqlSessionFactoryå¯¹è±¡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- é…ç½®MyBatiså…¨å±€é…ç½®æ–‡ä»¶:mybatis-config.xml --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:mybatis-config.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ‰«æentityåŒ…ï¼Œä½¿ç”¨åˆ«åï¼Œå¯¹åº”namespaceç®€åŒ– --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>typeAliasesPackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>xyz.cglzwz.entity<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ‰«ææ˜ å°„å™¨mapper.xmlæ–‡ä»¶ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mapperLocations<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classpath:mapper/*.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- 4.é…ç½®æ‰«æDaoæ¥å£åŒ…ï¼ŒåŠ¨æ€å®ç°Daoæ¥å£ï¼Œå¹¶æ³¨å…¥Springå®¹å™¨ä¸­ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ³¨å…¥sqlSessionFactory --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactoryBeanName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ç»™å‡ºæ‰«æDaoæ¥å£åŒ… --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>xyz.cglzwz.dao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>æ•°æ®åº“ä¿¡æ¯å’Œè¿æ¥æ± æ˜¯æ ‡é…çš„ï¼Œæ ¸å¿ƒæ˜¯sqlSessionFactoryå’ŒDaoå®ç°æ³¨å…¥ã€‚è¿™äº›classéƒ½æ˜¯mybatis-springæ•´åˆä¾èµ–æä¾›ã€‚å¹³æ—¶åŸºæœ¬æ˜¯çº¦å®šä¹ æƒ¯å¤§äºé…ç½®ã€‚è¿™äº›åŒ…æ‰«æè·¯å¾„éƒ½æ˜¯ä¹ æƒ¯çº¦å®šã€‚</p><h2 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h2><ol><li><a href="http://www.mybatis.org/mybatis-3/zh/configuration.html#mappers" target="_blank" rel="noopener">MyBatiså®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLæŸ¥è¯¢åˆ†æœˆè®¡ç®—æ€»é”€é‡</title>
      <link href="/2019/07/04/sql/sql-cha-xun-fen-yue-ji-suan-zong-xiao-liang/"/>
      <url>/2019/07/04/sql/sql-cha-xun-fen-yue-ji-suan-zong-xiao-liang/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†åˆ«ç»Ÿè®¡æ¯ä¸ªæœˆä»½çš„æ•°é‡å’Œ"><a href="#åˆ†åˆ«ç»Ÿè®¡æ¯ä¸ªæœˆä»½çš„æ•°é‡å’Œ" class="headerlink" title="åˆ†åˆ«ç»Ÿè®¡æ¯ä¸ªæœˆä»½çš„æ•°é‡å’Œ"></a>åˆ†åˆ«ç»Ÿè®¡æ¯ä¸ªæœˆä»½çš„æ•°é‡å’Œ</h2><pre class=" language-sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1<span class="token punctuation">;</span>                                 <span class="token operator">+</span><span class="token comment" spellcheck="true">----+---------------------+------+</span><span class="token operator">|</span> id <span class="token operator">|</span> <span class="token keyword">date</span>                <span class="token operator">|</span> num  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+---------------------+------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">05</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">100</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">200</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">200</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">600</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">09</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">500</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+---------------------+------+</span><span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></code></pre><h2 id="æ–¹æ³•1ï¼Œä½¿ç”¨MONTH-date-ã€YEAR-date-ã€SUM-num-å†…ç½®å‡½æ•°"><a href="#æ–¹æ³•1ï¼Œä½¿ç”¨MONTH-date-ã€YEAR-date-ã€SUM-num-å†…ç½®å‡½æ•°" class="headerlink" title="æ–¹æ³•1ï¼Œä½¿ç”¨MONTH(date)ã€YEAR(date)ã€SUM(num)å†…ç½®å‡½æ•°"></a>æ–¹æ³•1ï¼Œä½¿ç”¨MONTH(date)ã€YEAR(date)ã€SUM(num)å†…ç½®å‡½æ•°</h2><pre class=" language-sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">select</span> month<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">)</span> <span class="token keyword">as</span> æœˆä»½<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token keyword">as</span> æ€»é‡ <span class="token keyword">from</span> t1 <span class="token keyword">where</span> year<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'2019'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> month<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">+</span><span class="token comment" spellcheck="true">--------+--------+</span><span class="token operator">|</span> æœˆä»½   <span class="token operator">|</span> æ€»é‡   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">--------+--------+</span><span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>    <span class="token number">300</span> <span class="token operator">|</span><span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span><span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span>    <span class="token number">600</span> <span class="token operator">|</span><span class="token operator">|</span>      <span class="token number">5</span> <span class="token operator">|</span>    <span class="token number">500</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">--------+--------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></code></pre><h2 id="æ–¹æ³•2ï¼Œ-ä½¿ç”¨caseå…³é”®å­—"><a href="#æ–¹æ³•2ï¼Œ-ä½¿ç”¨caseå…³é”®å­—" class="headerlink" title="æ–¹æ³•2ï¼Œ ä½¿ç”¨caseå…³é”®å­—"></a>æ–¹æ³•2ï¼Œ ä½¿ç”¨caseå…³é”®å­—</h2>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±‚æ— åºåºåˆ—å‰kå¤§çš„æ•°</title>
      <link href="/2019/07/03/shu-ju-jie-gou/qian-k-da-de-shu/"/>
      <url>/2019/07/03/shu-ju-jie-gou/qian-k-da-de-shu/</url>
      
        <content type="html"><![CDATA[<p>è€ƒå¯Ÿçš„æ˜¯æ’åºç®—æ³•ï¼Œæœ€ç›´æ¥çš„æ˜¯å…¨éƒ¨æ’ä¸€éã€‚ä¼˜åŒ–å¯ä»¥å…ˆè€ƒè™‘å†’æ³¡æ¬¡æ•°ï¼Œç„¶åæ˜¯å¿«æ’çš„å˜å½¢ã€‚ä»¥åŠå †æ’åº</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> xyz<span class="token punctuation">.</span>cglzwz<span class="token punctuation">.</span>demo<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * æŸ¥æ‰¾å‰kå¤§ * @author Mechrevo * */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        KSort instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//instance.solution1(a, 4);</span>        instance<span class="token punctuation">.</span><span class="token function">solution2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        instance<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å†’æ³¡kæ¬¡,  O(k * n)     * @param a     * @param k     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">solution1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> a<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">></span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å¿«æ’æ€æƒ³ï¼Œæ¥è¿‘O(n)     * @param a     * @param k     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">solution2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>mid <span class="token operator">==</span> k <span class="token operator">||</span> k <span class="token operator">-</span> mid <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mid <span class="token operator">></span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">solution2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> left<span class="token punctuation">,</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function">solution2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">,</span> k <span class="token operator">-</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> a<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> temp <span class="token operator">=</span> left<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> pivot<span class="token punctuation">)</span>                right<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">>=</span> pivot<span class="token punctuation">)</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// è½´æ¢</span>        a<span class="token punctuation">[</span>temp<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> pivot<span class="token punctuation">;</span>        <span class="token keyword">return</span> left<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        a<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">^</span> a<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">^</span> a<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">^</span> a<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">:</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•&amp;æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå„ç§å¤šè¡¨è¿æ¥</title>
      <link href="/2019/07/02/mysql/mysql-ge-chong-duo-biao-lian-jie/"/>
      <url>/2019/07/02/mysql/mysql-ge-chong-duo-biao-lian-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å¯¹ä¸¤ä¸ªè¡¨è¿›è¡Œè¿æ¥æ“ä½œæ—¶ï¼Œæ ¹æ®ä¸åŒçš„éœ€è¦ï¼Œé€‰æ‹©ä¸åŒçš„è¿æ¥æ–¹å¼ã€‚</p><h3 id="1-äº¤å‰è¿æ¥"><a href="#1-äº¤å‰è¿æ¥" class="headerlink" title="1. äº¤å‰è¿æ¥"></a>1. äº¤å‰è¿æ¥</h3><p>è¿™ä¸ªæ¯”è¾ƒæ™®éç®€å•ï¼Œå¦‚æœè¦åˆ—å‡ºä¸¤ä¸ªè¡¨æ‰€æœ‰è®°å½•çš„æ‰€æœ‰è¿æ¥ç»„åˆï¼Œä½¿ç”¨äº¤å‰è¿æ¥ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tb1<span class="token punctuation">,</span> tb2</code></pre><h3 id="2-è‡ªç„¶è¿æ¥"><a href="#2-è‡ªç„¶è¿æ¥" class="headerlink" title="2. è‡ªç„¶è¿æ¥"></a>2. è‡ªç„¶è¿æ¥</h3><p>å¦‚æœè¦åˆ—å‡ºä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰åŒåå­—æ®µç›¸ç­‰çš„è®°å½•ï¼Œå¹¶ä¸”å»é™¤é‡å¤å­—æ®µï¼Œä½¿ç”¨è‡ªç„¶è¿æ¥ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tb1 <span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> tb2<span class="token punctuation">;</span></code></pre><h3 id="3-å†…è¿æ¥"><a href="#3-å†…è¿æ¥" class="headerlink" title="3. å†…è¿æ¥"></a>3. å†…è¿æ¥</h3><p>å¦‚æœè¦å¯¹æ»¡è¶³æ¡ä»¶çš„è®°å½•è¿›è¡Œè¿æ¥ï¼Œä½¿ç”¨ Î¸-è¿æ¥ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tb1 <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> tb2 <span class="token keyword">on</span> condition<span class="token punctuation">;</span></code></pre><h3 id="4-å¤–è¿æ¥"><a href="#4-å¤–è¿æ¥" class="headerlink" title="4. å¤–è¿æ¥"></a>4. å¤–è¿æ¥</h3><p>å¤–è¿æ¥åˆ†ä¸ºå¤–å·¦è¿æ¥å’Œå¤–å³è¿æ¥<br>å¦‚æœæ—¢è¦åˆ—å‡ºä¸¤è¡¨ç›¸åŒ¹é…çš„è®°å½•ï¼Œ<strong>åŒæ—¶åˆè¦åˆ—å‡ºæ²¡æœ‰åŒ¹é…é¡¹çš„è®°å½•</strong>ï¼Œä½¿ç”¨å¤–è¿æ¥ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tb1 <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> tb2<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tb1 <span class="token keyword">RIGHT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> tb2<span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ—¶é—´æ­£å¸¸ï¼Œæ’å…¥è®°å½•å°8ä¸ªå°æ—¶</title>
      <link href="/2019/06/30/mysql/mysql-shi-jian-zheng-chang-cha-ru-ji-lu-xiao-8-ge-xiao-shi/"/>
      <url>/2019/06/30/mysql/mysql-shi-jian-zheng-chang-cha-ru-ji-lu-xiao-8-ge-xiao-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>æ’å…¥DATETIMEæˆ–è€…TIMESTAMPç±»å‹çš„å­—æ®µã€‚Javaç¨‹åºçš„æ—¶é—´æ­£å¸¸ï¼ŒMySQLæ•°æ®åº“æ—¶é—´SELECT NOW();ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚ä½†æ˜¯æ’å…¥åå°8ä¸ªå°æ—¶ã€‚</p><p>ä¸çŸ¥é“æ˜¯ä¸æ˜¯é«˜ç‰ˆæœ¬MySQLçš„é—®é¢˜ã€‚æ¯•ç«Ÿç¨‹åºå’Œæ•°æ®åº“è‡ªèº«çš„æ—¶é—´éƒ½æ˜¯æ­£å¸¸çš„ã€‚ä¼°è®¡æ˜¯URLé—®é¢˜ï¼Œä½¿ç”¨çš„æ˜¯UTCï¼Œå°å…«ä¸ªæ—¶åŒºã€‚ä½†æ˜¯ä»¥å¾€éƒ½æ²¡æœ‰é—®é¢˜ã€‚    </p><pre class=" language-bash"><code class="language-bash">url <span class="token operator">=</span> jdbc:mysql:///db?serverTimezone<span class="token operator">=</span>UTC</code></pre><p>UTCæ˜¯åè°ƒä¸–ç•Œæ—¶é—´æ—¶ï¼Œå°±æ˜¯0ç»åº¦æ—¶é—´ï¼Œæ‰€æœ‰æˆ‘ä»¬ä¸œå…«åŒºå¿«8ä¸ªå°æ—¶ã€‚ä½†æ˜¯ä¹‹å‰å¥½åƒæ²¡æœ‰é—®é¢˜ã€‚ç½‘ä¸Šè¯´æ”¹time_zoneå˜é‡æµ‹è¯•æ²¡ç”¨ã€‚  </p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><pre class=" language-bash"><code class="language-bash">url <span class="token operator">=</span> jdbc:mysql:///db?serverTimezone<span class="token operator">=</span>Asia/Shanghai</code></pre><p>å°±è¿™æ ·ä¸€æ­¥å°±å¯ä»¥äº†ã€‚</p><p>æµ‹è¯•äº†é…ç½®å…¨å±€çš„</p><pre class=" language-xml"><code class="language-xml">default-time-zone = '+8:00'</code></pre><p>æ²¡æœ‰æ„ä¹‰</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL explainçš„ä½¿ç”¨å’ŒæŸ¥çœ‹ä»‹ç»</title>
      <link href="/2019/06/28/mysql/mysql-explain-sql/"/>
      <url>/2019/06/28/mysql/mysql-explain-sql/</url>
      
        <content type="html"><![CDATA[<h2 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- å»ºè¡¨</span>mysql<span class="token operator">></span> <span class="token keyword">create</span> <span class="token keyword">table</span> t1 <span class="token punctuation">(</span>    <span class="token operator">-</span><span class="token operator">></span> id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">date</span> <span class="token keyword">timestamp</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> num <span class="token keyword">bigint</span><span class="token punctuation">)</span><span class="token keyword">Engine</span><span class="token operator">=</span><span class="token keyword">Innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.05</span> sec<span class="token punctuation">)</span><span class="token comment" spellcheck="true">-- è®°å½•</span>mysql<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+---------------------+------+</span><span class="token operator">|</span> id <span class="token operator">|</span> <span class="token keyword">date</span>                <span class="token operator">|</span> num  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+---------------------+------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">05</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">100</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">200</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">200</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">600</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">09</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>  <span class="token number">500</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+---------------------+------+</span><span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+</span><span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> t1    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span class="token comment" spellcheck="true">-- sqlæŸ¥è¯¢æƒ…å†µ</span>mysql<span class="token operator">></span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span><span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> t1    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> const <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment" spellcheck="true">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></code></pre><ol><li>idï¼šæ˜¯åºå·ï¼Œåªæœ‰1è¡¨ç¤ºè¿™ä¸ªSQLé‡Œé¢ç›´æ¥æ‰§è¡Œäº†1ä¸ªSQLè€Œå·²ï¼Œæœ‰ç‚¹æ‹—å£ã€‚å¦‚æœé‡Œé¢æ˜¯æœ‰å­æŸ¥è¯¢ç­‰ï¼Œå°±æœ‰å¤šä¸ªè®°å½•äº†</li><li>select_typeï¼šSIMPLE(ç®€å•SELECT,ä¸ä½¿ç”¨UNIONæˆ–å­æŸ¥è¯¢ç­‰)ï¼Œè¿˜æœ‰å¾ˆå¤šã€‚</li><li>tableï¼šæ˜¯æŸ¥çœ‹æ“ä½œçš„è¡¨</li><li><strong>type</strong>: è¿™ä¸ªå¾ˆé‡è¦ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ä¹‹ç±»çš„ã€‚ALL, index,  range, ref, eq_ref, const, system, NULLï¼ˆä»å·¦åˆ°å³ï¼Œæ€§èƒ½ä»å·®åˆ°å¥½ï¼Œå³è¾¹å¯ä»¥è¯´æ˜¯åŒ…æ‹¬äº†å·¦è¾¹çš„ï¼‰</li><li>possible_keyï¼šå¯èƒ½ç”¨åˆ°çš„ç´¢å¼•</li><li>keyï¼šå®é™…ç”¨åˆ°çš„ç´¢å¼•ï¼Œè¿™é‡Œæ˜¯ä¸»é”®ç´¢å¼•</li><li>key_lenï¼šç´¢å¼•é•¿åº¦å­—èŠ‚æ•°ï¼Œè¿™é‡Œæ˜¯int</li><li>refï¼šè¡¨ç¤ºä¸Šè¿°è¡¨çš„è¿æ¥åŒ¹é…æ¡ä»¶ï¼Œå³å“ªäº›åˆ—æˆ–å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼</li><li><strong>rows</strong>ï¼š è¡¨ç¤ºMySQLæ ¹æ®è¡¨ç»Ÿè®¡ä¿¡æ¯åŠç´¢å¼•é€‰ç”¨æƒ…å†µï¼Œä¼°ç®—çš„æ‰¾åˆ°æ‰€éœ€çš„è®°å½•æ‰€éœ€è¦è¯»å–çš„è¡Œæ•°</li><li>filtered: ä¸€ä¸ªç™¾åˆ†æ¯”çš„å€¼ï¼Œå’Œrows åˆ—çš„å€¼ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥ä¼°è®¡å‡ºæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’(QEP)ä¸­çš„å‰ä¸€ä¸ªè¡¨çš„ç»“æœé›†ï¼Œä»è€Œç¡®å®šjoinæ“ä½œçš„å¾ªç¯æ¬¡æ•°ã€‚å°è¡¨é©±åŠ¨å¤§è¡¨ï¼Œå‡è½»è¿æ¥çš„æ¬¡æ•°ã€‚</li><li>Extra:</li></ol>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæšä¸¾</title>
      <link href="/2019/06/26/java/java-mei-ju/"/>
      <url>/2019/06/26/java/java-mei-ju/</url>
      
        <content type="html"><![CDATA[<h2 id="æšä¸¾ç±»"><a href="#æšä¸¾ç±»" class="headerlink" title="æšä¸¾ç±»"></a>æšä¸¾ç±»</h2><p>æœ‰äº›æƒ…å†µä¸‹æŸäº›å¯¹è±¡æˆ–è€…å±æ€§çš„å€¼æ•°é‡æ˜¯æœ‰é™å›ºå®šçš„ã€‚æ¯”å¦‚å­£èŠ‚ï¼Œå“åº”çŠ¶æ€ã€‚æ˜¯å¯ä»¥ä¸€ä¸€åˆ—ä¸¾çš„ã€‚å¯¹æ¯”ç›´æ¥ä½¿ç”¨å¸¸é‡ï¼Œæšä¸¾æ›´å¥½çš„å°è£…ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ›´å¥½ã€‚</p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><ol><li>ä¸€ä¸ªæ˜ŸæœŸ  </li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªæ˜ŸæœŸçš„æšä¸¾ç±»</span><span class="token keyword">public</span> <span class="token keyword">enum</span> WeekEnum <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åœ¨ç¬¬ä¸€è¡Œæ˜¾å¼åœ°åˆ—å‡º7ä¸ªæšä¸¾å®ä¾‹(æšä¸¾å€¼)ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ  public static final ä¿®é¥°</span>    SUNDAY<span class="token punctuation">,</span> MONDAY<span class="token punctuation">,</span> TUESDAY<span class="token punctuation">,</span> WEDNESDAY<span class="token punctuation">,</span> THURSDAY<span class="token punctuation">,</span> FRIDAY<span class="token punctuation">,</span> SATURDAY<span class="token punctuation">;</span><span class="token punctuation">}</span> </code></pre><ol start="2"><li>çŠ¶æ€å“åº”  </li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> xyz<span class="token punctuation">.</span>cglzwz<span class="token punctuation">.</span>enums<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">enum</span> SeckillStatusEnum <span class="token punctuation">{</span>    <span class="token function">SUCCESS</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"ç§’æ€æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">END</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"ç§’æ€ç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">REPERT_KILL</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"é‡å¤ç§’æ€"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">DATA_REWRITE</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"æ•°æ®ç¯¡æ”¹"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">INNER_ERROR</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"ç³»ç»Ÿå¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> status<span class="token punctuation">;</span>    <span class="token keyword">private</span> String statusInfo<span class="token punctuation">;</span>    <span class="token function">SeckillStatusEnum</span><span class="token punctuation">(</span><span class="token keyword">int</span> status<span class="token punctuation">,</span> String statusInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>statusInfo <span class="token operator">=</span> statusInfo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">getStatusInfo</span><span class="token punctuation">(</span><span class="token keyword">int</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>SeckillStatusEnum seckillStatusEnum <span class="token operator">:</span> SeckillStatusEnum<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>seckillStatusEnum<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> status<span class="token punctuation">)</span>                <span class="token keyword">return</span> seckillStatusEnum<span class="token punctuation">.</span>statusInfo<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> status<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token keyword">int</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getStatusInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> statusInfo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStatusInfo</span><span class="token punctuation">(</span>String statusInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>statusInfo <span class="token operator">=</span> statusInfo<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>è¿™é‡Œçš„æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½æœ‰å¸¦å‚ï¼Œå› æ­¤è¦å…ˆå®šä¹‰å¥½å¯¹åº”çš„æ„é€ å‡½æ•°ï¼Œå‚æ•°åˆ—åˆ«è¦ä¸€è‡³ã€‚ä¸ç„¶æŠ¥é”™ã€‚<br>XxxEnum.values() è¿”å›ä¸€ä¸ªåŒ…å«å…¨éƒ¨æšä¸¾å€¼çš„æ•°ç»„ï¼Œå¯ä»¥ç”¨æ¥éå†æ‰€æœ‰æšä¸¾å€¼;</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://www.jianshu.com/p/46dbd930f6a2" target="_blank" rel="noopener">ç®€ä¹¦. Java ä¸­çš„æšä¸¾ (enum)</a></li><li><a href="https://blog.csdn.net/qq_27093465/article/details/52180865" target="_blank" rel="noopener">CSDN. Java æšä¸¾(enum) è¯¦è§£7ç§å¸¸è§çš„ç”¨æ³•</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> enum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8.xé«˜ç‰ˆæœ¬MySQLè¿æ¥é…ç½®</title>
      <link href="/2019/06/26/mysql/gao-ban-ben-mysql-lian-jie-pei-zhi/"/>
      <url>/2019/06/26/mysql/gao-ban-ben-mysql-lian-jie-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="driver"><a href="#driver" class="headerlink" title="driver"></a>driver</h2><p>é«˜ç‰ˆæœ¬çš„ä¾èµ–æ˜¯</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><pre class=" language-yaml"><code class="language-yaml">driver=com.mysql.cj.jdbc.Driver</code></pre><p>ä¸­é—´å¤šäº†ä¸ªcjçš„åŒ…</p><h2 id="url"><a href="#url" class="headerlink" title="url"></a>url</h2><pre class=" language-yaml"><code class="language-yaml">url=jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/db<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding</span>=utf8<span class="token important">&amp;serverTimezone</span>=UTC</code></pre><p>æ¯”å¦‚åŠ æœåŠ¡å™¨æ—¶é—´æ ‡å‡†ç±»å‹ï¼Œä¸ç„¶è¿è¡ŒæŠ¥é”™ã€‚<br>com.mysql.cj.core.exceptions.<em>InvalidConnectionAttributeException: The server time zone value â€˜?Ğ¹???????â€™</em></p><h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><p>ç”¨æˆ·ä¸è¦å†™å‡ºusernameã€‚å› ä¸ºåœ¨Springè·å–jdbc.propertiesçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ <em>${user}</em>ï¼Œä½¿ç”¨ ${username} ä¼šè·å–åˆ°ç³»ç»Ÿç”¨æˆ·åï¼Œä¸€ä¸ªå°bug</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä½¿ç”¨MD5åŠ å¯†</title>
      <link href="/2019/06/25/java/java-shi-yong-md5-jia-mi/"/>
      <url>/2019/06/25/java/java-shi-yong-md5-jia-mi/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨åˆ°äº†springçš„ä¸€ä¸ªå·¥å…·ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span>DigestUtils<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MD5Test</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String slat <span class="token operator">=</span> <span class="token string">"xafd65!@#$%6"</span><span class="token punctuation">;</span>        String key <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span>        String base <span class="token operator">=</span> key <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> slat<span class="token punctuation">;</span>        String md5 <span class="token operator">=</span> DigestUtils<span class="token punctuation">.</span><span class="token function">md5DigestAsHex</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>md5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å°è£…ä¸€ä¸‹</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> String slat <span class="token operator">=</span> <span class="token string">"@#$%XCDFFASAVDA56asdfaf"</span><span class="token punctuation">;</span><span class="token keyword">private</span> String <span class="token function">getMD5</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>    String base <span class="token operator">=</span> message <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> slat<span class="token punctuation">;</span>    String md5 <span class="token operator">=</span> DigestUtils<span class="token punctuation">.</span><span class="token function">md5DigestAsHex</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> md5<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MD5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache Thriftåˆè¯†</title>
      <link href="/2019/06/24/thrift/thrift-chu-shi/"/>
      <url>/2019/06/24/thrift/thrift-chu-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="Apache-Thrift"><a href="#Apache-Thrift" class="headerlink" title="Apache Thrift"></a>Apache Thrift</h2><p>Facebookå¼€å‘çš„ï¼Œä¸€ä¸ªRPCé€šè®¯çš„ç‹è€…ã€‚æ¯”XMLï¼ŒJSONä¼ è¾“æ›´ä¼˜ç§€ã€‚åŸºäºä¸€ä¸ªSocketã€‚    </p><p>xx.thriftæ˜¯å…¶æ–‡ä»¶æ ¼å¼ï¼Œé‡Œé¢æ˜¯å¯¹æ¥å£æ–¹æ³•çš„æå†™ï¼Œéœ€è¦æœ¬åœ°ç¼–è¯‘æˆxx.javaæ¥å£æ–‡ä»¶ã€‚æ‰€ä»¥éœ€è¦å®‰è£…ä¸€äº›ç¼–è¯‘åŸç†çš„è¯æ³•è¯­æ³•è¯­ä¹‰ç¯å¢ƒçš„å·¥å…·ï¼Œæ¯”å¦‚flexï¼Œbisonç­‰ç­‰ã€‚    </p><p>æœ¬åœ°çš„IDEAå¯ä»¥å®‰è£…è¿™ä¸ªThriftæ’ä»¶ï¼ŒæŠŠxx.thriftç¼–è¯‘ä¸ºxx.javaæ¥å£ã€‚<br>ç„¶åï¼Œå†™ä¸€ä¸ªéœ€è¦ä¼ è¾“çš„ç±»å®ç°è¿™ä¸ªæ¥å£å°±å¯ä»¥äº†ã€‚å¯åŠ¨ThriftæœåŠ¡ç«¯ï¼Œå°±ç±»ä¼¼äºServerSocketï¼Œç„¶åæœ¬åœ°å®¢æˆ·ç«¯å¯ä»¥è¿æ¥ï¼Œè°ƒç”¨è®¿é—®é‡Œé¢çš„æ–¹æ³•ã€‚</p><h2 id="REST-VS-RPC"><a href="#REST-VS-RPC" class="headerlink" title="REST VS RPC"></a>REST VS RPC</h2><p>å…¶å®ä¸ªäººæ„Ÿè§‰RESTä¹Ÿæ˜¯ä¸€ç§RPCï¼Œåªæ˜¯å…¶åè®®æ˜¯HTTPã€‚ä½†æ˜¯RPCæ¡†æ¶åº•å±‚åè®®é™¤äº†æœ‰socketï¼Œç®¡é“ä¹‹ç±»çš„ä¹Ÿæœ‰HTTPã€‚æ„Ÿè§‰RPCæ˜¯ä¸ªçˆ¶é›†åˆä¸€æ ·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Thrift </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RPC </tag>
            
            <tag> Thrift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMè°ƒå‚å’ŒGCæ—¥å¿—ç®€è®°</title>
      <link href="/2019/06/20/jvm/jvm-diao-can-he-gc-ri-zhi/"/>
      <url>/2019/06/20/jvm/jvm-diao-can-he-gc-ri-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="åƒåœ¾å›æ”¶å†…å­˜åˆ†é…"><a href="#åƒåœ¾å›æ”¶å†…å­˜åˆ†é…" class="headerlink" title="åƒåœ¾å›æ”¶å†…å­˜åˆ†é…"></a>åƒåœ¾å›æ”¶å†…å­˜åˆ†é…</h2><p><img src="https://i.loli.net/2019/06/20/5d0b46f5876bf87452.png" alt="åƒåœ¾å›æ”¶å†…å­˜åŒº">  </p><h4 id="1-Minor-GC"><a href="#1-Minor-GC" class="headerlink" title="1. Minor GC"></a>1. Minor GC</h4><p>&emsp;&emsp;å½“EdenåŒºæ»¡çš„æ—¶å€™å›è§¦å‘ä¸€æ¬¡Minor GCï¼ˆSurvivoråŒºæ»¡ä¸ä¼šï¼‰ã€‚è¿™æ¬¡GCä»…ä»…å›æ”¶å¹´è½»ä»£ã€‚<br>&emsp;&emsp;ä½¿ç”¨çš„æ˜¯å¤åˆ¶ç®—æ³•ï¼Œå°±æ˜¯æŠŠEdenå’ŒSurvivor1ä¸­å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°Survivor2ä¸Šï¼Œç„¶åæ¸…ç©ºã€‚(å¯ä»¥è‚¯å®šçš„æ˜¯EdenåŒºçš„å¯¹è±¡æ²¡äº†ã€‚Survivor1å’Œå’ŒSurvivor2å¯èƒ½æ¥å›copy)<br>&emsp;&emsp;æ¯è¿›è¡Œä¸€æ¬¡Minor GCï¼ˆå¹´è½»ä»£å›æ”¶ï¼‰ï¼Œå¯¹è±¡çš„å¹´é¾„å°±å¢åŠ 1å²ï¼ˆåˆå§‹ä¸º0ï¼‰ï¼Œå½“å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼ˆé»˜è®¤15å²ï¼‰ï¼Œå°±ä¼šè¢«ç§»åˆ°è€å¹´ä»£ã€‚  </p><h4 id="2-Full-GC"><a href="#2-Full-GC" class="headerlink" title="2. Full GC"></a>2. Full GC</h4><ul><li>å½“å¹´è€ä»£æ»¡æ—¶ä¼šå¼•å‘Full GCï¼ŒFull GCå°†ä¼šåŒæ—¶å›æ”¶å¹´è½»ä»£ã€å¹´è€ä»£  </li><li>å½“æ°¸ä¹…ï¼ˆæ–¹æ³•åŒºï¼‰ä»£æ»¡æ—¶ä¹Ÿä¼šå¼•å‘Full GCï¼Œä¼šå¯¼è‡´Classã€Methodå…ƒä¿¡æ¯çš„å¸è½½  </li></ul><h2 id="GCæ—¥å¿—"><a href="#GCæ—¥å¿—" class="headerlink" title="GCæ—¥å¿—"></a>GCæ—¥å¿—</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test1</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b1<span class="token punctuation">,</span> b2<span class="token punctuation">,</span> b3<span class="token punctuation">,</span> b4<span class="token punctuation">;</span>        b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> MB<span class="token punctuation">]</span><span class="token punctuation">;</span>        b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> MB<span class="token punctuation">]</span><span class="token punctuation">;</span>        b3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> MB<span class="token punctuation">]</span><span class="token punctuation">;</span>        b4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> MB<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç¼–è¯‘è¿™ä¸ªç®€å•çš„æ¡ˆä¾‹ï¼Œæ‰§è¡Œ</p><pre class=" language-bash"><code class="language-bash">$ java -Xms20M -Xmx21M -Xmn10M  -XX:SurvivorRatio<span class="token operator">=</span>8 -XX:+PrintGCDetails Test1</code></pre><pre class=" language-bash"><code class="language-bash">Heap PSYoungGen      total 9216K, used 7456K <span class="token punctuation">[</span>0x00000000ff600000, 0x0000000100000000, 0x0000000100000000<span class="token punctuation">)</span>  eden space 8192K, 91% used <span class="token punctuation">[</span>0x00000000ff600000,0x00000000ffd48038,0x00000000ffe00000<span class="token punctuation">)</span>  from space 1024K, 0% used <span class="token punctuation">[</span>0x00000000fff00000,0x00000000fff00000,0x0000000100000000<span class="token punctuation">)</span>  to   space 1024K, 0% used <span class="token punctuation">[</span>0x00000000ffe00000,0x00000000ffe00000,0x00000000fff00000<span class="token punctuation">)</span> ParOldGen       total 10240K, used 4096K <span class="token punctuation">[</span>0x00000000fea00000, 0x00000000ff400000, 0x00000000ff600000<span class="token punctuation">)</span>  object space 10240K, 40% used <span class="token punctuation">[</span>0x00000000fea00000,0x00000000fee00010,0x00000000ff400000<span class="token punctuation">)</span> Metaspace       used 2626K, capacity 4486K, committed 4864K, reserved 1056768K  class space    used 281K, capacity 386K, committed 512K, reserved 1048576K</code></pre><ol><li><em>-verbose:gc</em> æˆ–è€… <em>-XX:+PrintGC</em> éƒ½å¯ä»¥è¾“å‡ºGCç®€è¦ä¿¡æ¯ã€‚ <em>-XX:+PrintGCDetails</em> å¯ä»¥æ‰“å°è¯¦ç»†ä¿¡æ¯ã€‚</li><li><em>-Xms20M</em> æ˜¯åˆå§‹åŒ–å †çš„å¤§å°ä¸º20Mï¼Œ<em>-Xmx21M</em> æ˜¯å †æœ€å¤§æ˜¯21Mï¼Œ<em>-Xmn10M</em> æ˜¯å¹´è½»ä»£åˆ†é…10M  </li><li><em>-XX:SurvivorRatio=8</em> æ˜¯æŒ‡æ–°ç”Ÿä»£EdenåŒº:ä¸€ä¸ªSurvivor = 8ï¼Œï¼ˆä¸¤ä¸ªSurvivorå¤§å°ä¸€æ ·ï¼‰ã€‚é»˜è®¤æ˜¯8ï¼Œåˆ™ä¸¤ä¸ªSurvivoråŒºä¸ä¸€ä¸ªEdenåŒºçš„æ¯”å€¼ä¸º2:8,ä¸€ä¸ªSurvivoråŒºå æ•´ä¸ªå¹´è½»ä»£çš„1/10ã€‚è°ƒå°è¿™ä¸ªå‚æ•°å°†å¢å¤§survivoråŒºï¼Œè®©å¯¹è±¡å°½é‡åœ¨survitoråŒºå‘†é•¿ä¸€ç‚¹ï¼Œå‡å°‘è¿›å…¥å¹´è€ä»£çš„å¯¹è±¡ã€‚å»æ‰æ•‘åŠ©ç©ºé—´çš„æƒ³æ³•æ˜¯è®©å¤§éƒ¨åˆ†ä¸èƒ½é©¬ä¸Šå›æ”¶çš„æ•°æ®å°½å¿«è¿›å…¥å¹´è€ä»£ï¼ŒåŠ å¿«å¹´è€ä»£çš„å›æ”¶é¢‘ç‡ï¼Œå‡å°‘å¹´è€ä»£æš´æ¶¨çš„å¯èƒ½æ€§ï¼Œè¿™ä¸ªæ˜¯é€šè¿‡å°†-XX:SurvivorRatio è®¾ç½®æˆæ¯”è¾ƒå¤§çš„å€¼ï¼ˆæ¯”å¦‚65536)æ¥åšåˆ°ã€‚</li></ol><p>&emsp;&emsp;ä»æ‰“å°æƒ…å†µå¯ä»¥çœ‹å‡ºå„ä¸ªåŒºçš„å¤§å°ï¼Œä»¥åŠä½¿ç”¨æƒ…å†µã€‚fromå¯¹åº”Survivor1, toæ˜¯Survivor2ã€‚è¿™é‡Œæ²¡æœ‰GC(Minor GC)è¿‡ã€‚å› ä¸ºé‚£ä¸ª<em>new byte[6 </em> MB]<em> å¤§å¯¹è±¡ç›´æ¥è¢«åˆå§‹åŒ–åˆ°è€å¹´ä»£å»äº†ï¼Œæ‰€ä»¥å¹´è½»ä»£å¤Ÿç”¨ã€‚å¯ä»¥ä½¿ç”¨ </em>System.gc()* å»ºè®®è§¦å‘ä¸€æ¬¡GC<br>&emsp;&emsp;ä¸çŸ¥é“ä¸ºå•¥PSYougGençš„totalæ‰9216K(1024x9)ï¼Œè€Œåé¢çš„edenï¼Œfromï¼ŒtoåŠ èµ·æ¥åˆšåˆšå¥½10M</p><blockquote><p>è¿™é‡Œæˆ‘ä»¬é…ç½®çš„10Mç”¨çš„æ˜¯ç›´æ¥çš„1024ï¼Œå°±æ˜¯ç›¸å¯¹äº2è¿›åˆ¶å¯¹2è¿›åˆ¶äº†ã€‚<br>å› ä¸ºå¹³æ—¶äººä»¬ä¼šæŠŠ1024å½“åš1000ï¼Œæ¯”å¦‚å‚¨å­˜SDå¡å°±æ˜¯ï¼Œ4GBè¯´çš„æ˜¯ç”¨äº†1000æ›¿æ¢çš„åçš„è§’åº¦çš„ï¼Œæ‰€ä»¥å†å˜ä¸ºäºŒè¿›åˆ¶å°±å°äº†ï¼Œ4GBï¼ˆ1000è§†è§’ï¼‰= 4 <em> 1000 </em> 1000B = 4 <em> 1000 </em> 1000 / 1024 / 1024G = 3.814ï¼Œç„¶åå¡ç³»ç»Ÿåˆ†åŒºå ç”¨äº†äº›ï¼Œå°±å¤§æ¦‚å‰©ä¸‹3.6GBï¼ˆ1024è§†è§’ï¼‰</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="http://www.ityouknow.com/jvm/2017/09/18/GC-Analysis.html" target="_blank" rel="noopener">Jvm ç³»åˆ—(äº”):Java GC åˆ†æ . çº¯æ´çš„å¾®ä¿¡</a></li><li><a href="https://blog.csdn.net/chen77716/article/details/5695893" target="_blank" rel="noopener">JVMæ€§èƒ½è°ƒä¼˜ . çº¯ç²¹çš„ç å†œ . CSDN</a></li><li><a href="https://www.jianshu.com/p/1045d8a24765" target="_blank" rel="noopener">JVMåƒåœ¾å›æ”¶æœºåˆ¶å…¥é—¨ . ç®€ä¹¦</a></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå­˜å‚¨å¼•æ“MyISAMå’ŒInnoDBçš„åŒºåˆ«</title>
      <link href="/2019/06/18/mysql/myisam-he-innodb-de-qu-bie/"/>
      <url>/2019/06/18/mysql/myisam-he-innodb-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th style="text-align:center">MyISAM</th><th style="text-align:center">InnoDB</th></tr></thead><tbody><tr><td style="text-align:center">ä¸æ”¯æŒäº‹åŠ¡</td><td style="text-align:center">æ”¯æŒäº‹åŠ¡</td></tr><tr><td style="text-align:center">ä¸æ”¯æŒå¤–é”®</td><td style="text-align:center">æ”¯æŒå¤–é”®</td></tr><tr><td style="text-align:center">åªæœ‰è¡¨çº§é”</td><td style="text-align:center">æœ‰é»˜è®¤çš„è¡Œçº§é”ï¼Œç²’åº¦å°ï¼Œå¹¶å‘æ›´ä¼˜</td></tr><tr><td style="text-align:center">æ”¯æŒå…¨æ–‡ç´¢å¼•</td><td style="text-align:center">5.6åå¼€å§‹æ”¯æŒ</td></tr><tr><td style="text-align:center">è¡¨è®°å½•æ•°count(*)æœ‰ä¸“é—¨çš„è®¡æ•°å™¨</td><td style="text-align:center">select * é€æ¡è®¡ç®—</td></tr><tr><td style="text-align:center">SELECTæŸ¥è¯¢æ›´ä¼˜</td><td style="text-align:center">INSERTã€UPDATEæ›´ä¼˜</td></tr><tr><td style="text-align:center">éèšé›†ç´¢å¼•</td><td style="text-align:center">èšé›†ç´¢å¼•</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ç‰‡åˆ†ç±»æ‰¹é‡æµ‹è¯•</title>
      <link href="/2019/06/16/tensorflow/tu-pian-fen-lei-pi-liang-ce-shi/"/>
      <url>/2019/06/16/tensorflow/tu-pian-fen-lei-pi-liang-ce-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ¸å¿ƒå®ç°"><a href="#æ ¸å¿ƒå®ç°" class="headerlink" title="æ ¸å¿ƒå®ç°"></a>æ ¸å¿ƒå®ç°</h2><p>ä¿å­˜äº†æ¨¡å‹åï¼Œéœ€è¦å¯¹æ¨¡å‹æµ‹è¯•ï¼Œå›¾ç‰‡é›†è·¯å¾„ä¸º</p><pre class=" language-python"><code class="language-python">path <span class="token operator">=</span> <span class="token string">'../data/*.jpg'</span></code></pre><p>å¯¼å…¥æ¨¡å‹åï¼Œæµ‹è¯•çš„åŸç†å°±æ˜¯æ›¿æ¢ï¼ŒæŠŠè®­ç»ƒçš„å›¾ç‰‡æ”¹ä¸ºæµ‹è¯•çš„å›¾ç‰‡ã€‚<br>æ¨¡å‹ä¸­è¿˜æŠ¥é”™äº†æœ€åä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºlogitsï¼ŒæŠŠå…¶ä»æ¨¡å‹ä¸­è¯»å–å‡ºæ¥ï¼Œæ›´æ”¹å›¾ç‰‡ï¼Œå†è¿è¡Œæ¨¡å‹å‡ ä¸ªå¾—å‡ºç»“æœã€‚</p><blockquote><p>æµ‹è¯•é›†å›¾ç‰‡å‘½åæŒ‰ç…§è·¯é£<em>1xx.jpg</em>ï¼Œç½—å®¾<em>2xx.jpg</em>â€¦<br>å°±æ˜¯æ‰“ä¸ªæ ‡ç­¾è€Œå·²ï¼Œ<em>paths[i][-7:]</em> è¯»å–å‡º1,2,3â€¦ï¼Œå’Œæ¨¡å‹ç»“æœå¯¹æ¯”å³å¯ã€‚</p></blockquote><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> skimage <span class="token keyword">import</span> io<span class="token punctuation">,</span>transform<span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> globpath <span class="token operator">=</span> <span class="token string">'../data/*.jpg'</span>image_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'è·¯é£'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">'ç½—å®¾'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token string">'å¨œç¾'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token string">'ä¹”å·´'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token string">'ç´¢éš†'</span><span class="token punctuation">}</span>w<span class="token operator">=</span><span class="token number">100</span>h<span class="token operator">=</span><span class="token number">100</span>c<span class="token operator">=</span><span class="token number">3</span><span class="token keyword">def</span> <span class="token function">read_one_image</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>    img <span class="token operator">=</span> io<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>path<span class="token punctuation">)</span>    img <span class="token operator">=</span> transform<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token keyword">with</span> tf<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sess<span class="token punctuation">:</span>    data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true"># ç›®å½•åˆ—è¡¨</span>    paths <span class="token operator">=</span> glob<span class="token punctuation">.</span>glob<span class="token punctuation">(</span>path<span class="token punctuation">)</span>    <span class="token keyword">for</span> img <span class="token keyword">in</span> paths<span class="token punctuation">:</span>        data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>read_one_image<span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span>    saver <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>import_meta_graph<span class="token punctuation">(</span><span class="token string">'../../finalmodel/rate_07_model/model.ckpt.meta'</span><span class="token punctuation">)</span>    saver<span class="token punctuation">.</span>restore<span class="token punctuation">(</span>sess<span class="token punctuation">,</span>tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>latest_checkpoint<span class="token punctuation">(</span><span class="token string">'../../finalmodel/rate_07_model/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    graph <span class="token operator">=</span> tf<span class="token punctuation">.</span>get_default_graph<span class="token punctuation">(</span><span class="token punctuation">)</span>    x <span class="token operator">=</span> graph<span class="token punctuation">.</span>get_tensor_by_name<span class="token punctuation">(</span><span class="token string">"x:0"</span><span class="token punctuation">)</span>    feed_dict <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span>data<span class="token punctuation">}</span>    logits <span class="token operator">=</span> graph<span class="token punctuation">.</span>get_tensor_by_name<span class="token punctuation">(</span><span class="token string">"logits_eval:0"</span><span class="token punctuation">)</span>    classification_result <span class="token operator">=</span> sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>logits<span class="token punctuation">,</span>feed_dict<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#æ‰“å°å‡ºé¢„æµ‹çŸ©é˜µ</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\né¢„æµ‹çŸ©é˜µ:\n"</span><span class="token punctuation">,</span> classification_result<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#æ‰“å°å‡ºé¢„æµ‹çŸ©é˜µæ¯ä¸€è¡Œæœ€å¤§å€¼çš„ç´¢å¼•</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\nç®€ç•¥ç»“æœ:\n"</span><span class="token punctuation">,</span> tf<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>classification_result<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eval<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å…·ä½“æƒ…å†µ: "</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#æ ¹æ®ç´¢å¼•é€šè¿‡å­—å…¸å¯¹åº”äººç‰©çš„åˆ†ç±»</span>    output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    output <span class="token operator">=</span> tf<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>classification_result<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eval<span class="token punctuation">(</span><span class="token punctuation">)</span>    count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># output[i]æ˜¯æµ‹è¯•ç»“æœç¼–ç ï¼Œpaths[i])[-7]æ˜¯åŸå®šå›¾ç‰‡ç¼–å·ï¼ˆè·¯é£1ï¼‰</span>        flag <span class="token operator">=</span> <span class="token boolean">False</span>        <span class="token keyword">if</span> str<span class="token punctuation">(</span>output<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> paths<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            flag <span class="token operator">=</span> <span class="token boolean">True</span>            count <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç¬¬ "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span>  <span class="token string">" å¼  ("</span> <span class="token operator">+</span>   paths<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">") äººç‰©é¢„æµ‹: "</span> <span class="token operator">+</span> image_dict<span class="token punctuation">[</span>output<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\nå‡†ç¡®ç‡: {:.2f}%"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>count <span class="token operator">/</span> len<span class="token punctuation">(</span>output<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h2><p><img src="https://i.loli.net/2019/06/16/5d05f229ab70989012.png" alt="æµ‹è¯•ç»“æœ"></p>]]></content>
      
      
      <categories>
          
          <category> TensorFlow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonç»˜å›¾matplotlibç±»åº“</title>
      <link href="/2019/06/09/python/python-hui-tu-matplotlib/"/>
      <url>/2019/06/09/python/python-hui-tu-matplotlib/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><ol><li>ç®€å•ç”»å›¾  </li></ol><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment" spellcheck="true">#è‡ªå˜é‡xçš„èŒƒå›´ä»¥åŠæ­¥å¹…</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"First"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Second"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Third"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#å‚æ•°ï¼šlocè®¾ç½®æ˜¾ç¤ºçš„ä½ç½®ï¼Œ0æ˜¯è‡ªé€‚åº”ï¼›ncolè®¾ç½®æ˜¾ç¤ºçš„åˆ—æ•°</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ncol<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>   plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><ol start="2"><li>ç”»æœºå™¨å­¦ä¹ ç»“æœå›¾  </li></ol><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ï¼Œå¯å°†n_epochè®¾ç½®æ›´å¤§ä¸€äº›</span>n_epoch<span class="token operator">=</span><span class="token number">20</span>batch_size<span class="token operator">=</span><span class="token number">32</span>sess<span class="token operator">=</span>tf<span class="token punctuation">.</span>InteractiveSession<span class="token punctuation">(</span><span class="token punctuation">)</span>  sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>global_variables_initializer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è‡ªå®šä¹‰ä¿å­˜æ•°æ®åˆ—è¡¨</span>trainlosslist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>trainacclist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>validationlosslist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>validationacclist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> epoch <span class="token keyword">in</span> range<span class="token punctuation">(</span>n_epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>    start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#training</span>    train_loss<span class="token punctuation">,</span> train_acc<span class="token punctuation">,</span> n_batch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>    <span class="token keyword">for</span> x_train_a<span class="token punctuation">,</span> y_train_a <span class="token keyword">in</span> minibatches<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        _<span class="token punctuation">,</span>err<span class="token punctuation">,</span>ac<span class="token operator">=</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span>train_op<span class="token punctuation">,</span>loss<span class="token punctuation">,</span>acc<span class="token punctuation">]</span><span class="token punctuation">,</span> feed_dict<span class="token operator">=</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span> x_train_a<span class="token punctuation">,</span> y_<span class="token punctuation">:</span> y_train_a<span class="token punctuation">}</span><span class="token punctuation">)</span>        train_loss <span class="token operator">+=</span> err<span class="token punctuation">;</span> train_acc <span class="token operator">+=</span> ac<span class="token punctuation">;</span> n_batch <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"   train loss: %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>train_loss<span class="token operator">/</span> n_batch<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"   train acc: %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>train_acc<span class="token operator">/</span> n_batch<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># æ·»åŠ åˆ°åˆ—è¡¨</span>    trainlosslist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>train_loss<span class="token operator">/</span> n_batch<span class="token punctuation">)</span>    trainacclist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>train_acc<span class="token operator">/</span> n_batch<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#validation</span>    val_loss<span class="token punctuation">,</span> val_acc<span class="token punctuation">,</span> n_batch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>    <span class="token keyword">for</span> x_val_a<span class="token punctuation">,</span> y_val_a <span class="token keyword">in</span> minibatches<span class="token punctuation">(</span>x_val<span class="token punctuation">,</span> y_val<span class="token punctuation">,</span> batch_size<span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        err<span class="token punctuation">,</span> ac <span class="token operator">=</span> sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span>loss<span class="token punctuation">,</span>acc<span class="token punctuation">]</span><span class="token punctuation">,</span> feed_dict<span class="token operator">=</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span> x_val_a<span class="token punctuation">,</span> y_<span class="token punctuation">:</span> y_val_a<span class="token punctuation">}</span><span class="token punctuation">)</span>        val_loss <span class="token operator">+=</span> err<span class="token punctuation">;</span> val_acc <span class="token operator">+=</span> ac<span class="token punctuation">;</span> n_batch <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"   validation loss: %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>val_loss<span class="token operator">/</span> n_batch<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"   validation acc: %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>val_acc<span class="token operator">/</span> n_batch<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># æ·»åŠ åˆ°åˆ—è¡¨</span>    validationlosslist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val_loss<span class="token operator">/</span> n_batch<span class="token punctuation">)</span>    validationacclist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val_acc<span class="token operator">/</span> n_batch<span class="token punctuation">)</span>sess<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ç»˜å›¾</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n_epoch<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>trainacclist<span class="token punctuation">)</span><span class="token punctuation">[</span>x<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"train-acc"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>validationacclist<span class="token punctuation">)</span><span class="token punctuation">[</span>x<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"validation-acc"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>trainlosslist<span class="token punctuation">)</span><span class="token punctuation">[</span>x<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"train-loss"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>validationlosslist<span class="token punctuation">)</span><span class="token punctuation">[</span>x<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"validation-loss"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ç”»ä¸¤æ¡åŸºå‡†çº¿(1å’Œ0ï¼Œä¹Ÿä¸èƒ½ç›´æ¥å†™)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token operator">/</span>x<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"one"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token operator">-</span>x<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"zero"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å‚æ•°ï¼šlocè®¾ç½®æ˜¾ç¤ºçš„ä½ç½®ï¼Œ0æ˜¯è‡ªé€‚åº”ï¼›ncolè®¾ç½®æ˜¾ç¤ºçš„åˆ—æ•°</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ncol<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>   plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><blockquote><p>ä¸»è¦yå˜é‡å¦‚æœæ˜¯åˆ—è¡¨è¦ä½¿ç”¨np.array(list)åšè½¬åŒ–ï¼Œä¸ç„¶æŠ¥é”™ï¼š<br><em>TypeError: only integer scalar arrays can be converted to a scalar index</em></p></blockquote><p><img src="https://i.loli.net/2019/06/09/5cfc7d83226c795923.png" alt="æ•ˆæœå›¾"></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå®ç°æ–‡ä»¶æ‰¹é‡é‡å‘½å</title>
      <link href="/2019/06/08/python/python-shi-xian-wen-jian-pi-liang-chong-ming-ming/"/>
      <url>/2019/06/08/python/python-shi-xian-wen-jian-pi-liang-chong-ming-ming/</url>
      
        <content type="html"><![CDATA[<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token comment" spellcheck="true"># éœ€è¦æ‰¹é‡æ”¹åçš„æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹</span>path_name<span class="token operator">=</span><span class="token string">'photo/è·¯é£/'</span><span class="token comment" spellcheck="true"># å‘½åä»1å¼€å§‹</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">for</span> item <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>path_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># è¿›å…¥åˆ°æ–‡ä»¶å¤¹å†…ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡Œå¾ªç¯éå†</span>    <span class="token comment" spellcheck="true"># os.path.join(path_name, item)è¡¨ç¤ºæ‰¾åˆ°æ¯ä¸ªæ–‡ä»¶çš„ç»å¯¹è·¯å¾„å¹¶è¿›è¡Œæ‹¼æ¥æ“ä½œ</span>    os<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path_name<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path_name<span class="token punctuation">,</span> <span class="token punctuation">(</span>str<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    i <span class="token operator">+=</span> <span class="token number">1</span>`</code></pre><blockquote><p>æ³¨æ„çš„æ˜¯å¦‚æœæ–°åå­—å¦‚2.pngåœ¨åŸæ–‡ä»¶å­˜åœ¨ï¼Œä¼šæŠ¥é”™ã€‚å¯ä»¥å…ˆç»Ÿä¸€æ”¹åç¼€ä¸ºtxtç­‰å•¥çš„ï¼ˆç›®å½•ä¸‹ä¸å­˜åœ¨çš„ï¼‰ï¼Œç„¶åå†è¿è¡Œä¸€æ¬¡ä¸ºæƒ³è¦çš„å³å¯ã€‚</p></blockquote><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="https://i.loli.net/2019/06/08/5cfb3dbcc037a11759.png" alt="æ‰¹é‡é‡å‘½åå"></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonæ ¹æ®å…³é”®è¯çˆ¬å–Googleæœç´¢çš„å›¾ç‰‡</title>
      <link href="/2019/06/07/python/python-gen-ju-guan-jian-ci-pa-qu-google-sou-suo-de-tu-pian/"/>
      <url>/2019/06/07/python/python-gen-ju-guan-jian-ci-pa-qu-google-sou-suo-de-tu-pian/</url>
      
        <content type="html"><![CDATA[<h2 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h2><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># -*- coding: UTF-8 -*-</span><span class="token keyword">import</span> os<span class="token punctuation">,</span>shutil<span class="token keyword">import</span> re<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver  <span class="token keyword">import</span> time  <span class="token keyword">import</span> urllib <span class="token keyword">import</span> requests<span class="token comment" spellcheck="true">#è¾“å‡ºç›®å½•</span>OUTPUT_DIR <span class="token operator">=</span> <span class="token string">'photo'</span><span class="token comment" spellcheck="true">#å…³é”®å­—æ•°ç»„ï¼šå°†åœ¨è¾“å‡ºç›®å½•å†…åˆ›å»ºä»¥ä»¥ä¸‹å…³é”®å­—ä»¬å‘½åçš„txtæ–‡ä»¶</span>SEARCH_KEY_WORDS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'è·¯é£'</span><span class="token punctuation">,</span><span class="token string">'å¨œç¾'</span><span class="token punctuation">,</span> <span class="token string">'ç´¢éš†'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”å·´'</span><span class="token punctuation">,</span> <span class="token string">'ç½—å®¾'</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># é¡µæ•°</span>PAGE_NUM <span class="token operator">=</span> <span class="token number">12</span>repeateNum <span class="token operator">=</span> <span class="token number">0</span>preLen <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">getSearchUrl</span><span class="token punctuation">(</span>keyWord<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>isEn<span class="token punctuation">(</span>keyWord<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'https://www.google.com.hk/search?q='</span> <span class="token operator">+</span> keyWord <span class="token operator">+</span> <span class="token string">'&amp;safe=strict&amp;source=lnms&amp;tbm=isch'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'https://www.google.com.hk/search?q='</span> <span class="token operator">+</span> keyWord <span class="token operator">+</span> <span class="token string">'&amp;safe=strict&amp;hl=zh-CN&amp;source=lnms&amp;tbm=isch'</span><span class="token keyword">def</span> <span class="token function">isEn</span><span class="token punctuation">(</span>keyWord<span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> all<span class="token punctuation">(</span>ord<span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">128</span> <span class="token keyword">for</span> c <span class="token keyword">in</span> keyWord<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å¯åŠ¨Firefoxæµè§ˆå™¨  </span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>OUTPUT_DIR<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span>    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>OUTPUT_DIR<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">output</span><span class="token punctuation">(</span>SEARCH_KEY_WORD<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">global</span> repeateNum    <span class="token keyword">global</span> preLen    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æœç´¢'</span> <span class="token operator">+</span> SEARCH_KEY_WORD <span class="token operator">+</span> <span class="token string">'å›¾ç‰‡ä¸­ï¼Œè¯·ç¨å...'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># å¦‚æœæ­¤å¤„ä¸ºæœæœï¼Œæœç´¢éƒé‡‘é¦™ï¼Œæ­¤å¤„å¯é…ç½®ä¸ºï¼šhttp://pic.sogou.com/pics?query=%D3%F4%BD%F0%CF%E3&amp;di=2&amp;_asf=pic.sogou.com&amp;w=05009900&amp;sut=9420&amp;sst0=1523883106480</span>    <span class="token comment" spellcheck="true"># çˆ¬å–é¡µé¢åœ°å€ï¼Œè¯¥å¤„ä¸ºgoogleå›¾ç‰‡æœç´¢url  </span>    url <span class="token operator">=</span> getSearchUrl<span class="token punctuation">(</span>SEARCH_KEY_WORD<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># å¦‚æœæ˜¯æœæœï¼Œæ­¤å¤„é…ç½®ä¸ºï¼š'//div[@id="imgid"]/ul/li/a/img'</span>    <span class="token comment" spellcheck="true"># ç›®æ ‡å…ƒç´ çš„xpathï¼Œè¯¥å¤„ä¸ºgoogleå›¾ç‰‡æœç´¢ç»“æœå†…imgæ ‡ç­¾æ‰€åœ¨è·¯å¾„</span>    xpath <span class="token operator">=</span> <span class="token string">'//div[@id="rg"]/div/div/a/img'</span>    <span class="token comment" spellcheck="true"># æµè§ˆå™¨æ‰“å¼€çˆ¬å–é¡µé¢  </span>    driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>      outputFile <span class="token operator">=</span> OUTPUT_DIR <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> SEARCH_KEY_WORD <span class="token operator">+</span> <span class="token string">'.txt'</span>    outputSet <span class="token operator">=</span> set<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># æ¨¡æ‹Ÿæ»šåŠ¨çª—å£ä»¥æµè§ˆä¸‹è½½æ›´å¤šå›¾ç‰‡  </span>    pos <span class="token operator">=</span> <span class="token number">0</span>      m <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true"># å›¾ç‰‡ç¼–å·  </span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>PAGE_NUM<span class="token punctuation">)</span><span class="token punctuation">:</span>          pos <span class="token operator">+=</span> i<span class="token operator">*</span><span class="token number">600</span> <span class="token comment" spellcheck="true"># æ¯æ¬¡ä¸‹æ»š600  </span>        js <span class="token operator">=</span> <span class="token string">"document.documentElement.scrollTop=%d"</span> <span class="token operator">%</span> pos          driver<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span>js<span class="token punctuation">)</span>          time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> element <span class="token keyword">in</span> driver<span class="token punctuation">.</span>find_elements_by_xpath<span class="token punctuation">(</span>xpath<span class="token punctuation">)</span><span class="token punctuation">:</span>            img_url <span class="token operator">=</span> element<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> img_url <span class="token keyword">is</span> <span class="token operator">not</span> None <span class="token operator">and</span> img_url<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                outputSet<span class="token punctuation">.</span>add<span class="token punctuation">(</span>img_url<span class="token punctuation">)</span>        <span class="token keyword">if</span> preLen <span class="token operator">==</span> len<span class="token punctuation">(</span>outputSet<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> repeateNum <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>                repeateNum <span class="token operator">=</span> <span class="token number">0</span>                preLen <span class="token operator">=</span> <span class="token number">0</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                repeateNum <span class="token operator">=</span> repeateNum <span class="token operator">+</span> <span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            repeateNum <span class="token operator">=</span> <span class="token number">0</span>            preLen <span class="token operator">=</span> len<span class="token punctuation">(</span>outputSet<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å†™å…¥'</span> <span class="token operator">+</span> SEARCH_KEY_WORD <span class="token operator">+</span> <span class="token string">'å›¾ç‰‡ä¸­ï¼Œè¯·ç¨å...'</span><span class="token punctuation">)</span>    file <span class="token operator">=</span> open<span class="token punctuation">(</span>outputFile<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>    index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> val <span class="token keyword">in</span> outputSet<span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># ä¿å­˜urlåˆ°txtæ–‡ä»¶</span>        file<span class="token punctuation">.</span>write<span class="token punctuation">(</span>val <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>        index <span class="token operator">+=</span> <span class="token number">1</span>        r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>val<span class="token punctuation">)</span>        img_name <span class="token operator">=</span> str<span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.png'</span>        <span class="token comment" spellcheck="true"># ä¿å­˜å›¾ç‰‡</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'photo/'</span> <span class="token operator">+</span> SEARCH_KEY_WORD <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> img_name<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">)</span>         file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>SEARCH_KEY_WORD<span class="token operator">+</span><span class="token string">'å›¾ç‰‡æœç´¢å†™å…¥å®Œæ¯•'</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>len<span class="token punctuation">(</span>outputSet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> val <span class="token keyword">in</span> SEARCH_KEY_WORDS<span class="token punctuation">:</span>    output<span class="token punctuation">(</span>val<span class="token punctuation">)</span>driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><p>æ”¹é…ç½®</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># è¾“å‡ºç›®å½•</span>OUTPUT_DIR <span class="token operator">=</span> <span class="token string">'photo'</span><span class="token comment" spellcheck="true"># å…³é”®å­—æ•°ç»„ï¼šå°†åœ¨è¾“å‡ºç›®å½•å†…åˆ›å»ºä»¥ä»¥ä¸‹å…³é”®å­—ä»¬å‘½åçš„txtæ–‡ä»¶ï¼Œå›¾ç‰‡å¦å¤–ä¿å­˜</span>SEARCH_KEY_WORDS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'è·¯é£'</span><span class="token punctuation">,</span><span class="token string">'å¨œç¾'</span><span class="token punctuation">,</span> <span class="token string">'ç´¢éš†'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”å·´'</span><span class="token punctuation">,</span> <span class="token string">'ç½—å®¾'</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># æ£€ç´¢é¡µæ•°</span>PAGE_NUM <span class="token operator">=</span> <span class="token number">12</span></code></pre><blockquote><p>è¾“å‡ºç›®å½•â€™photoâ€™è¿™é‡Œå’Œclimbpic.pyæ˜¯åŒç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ç›¸å¯¹è·¯å¾„ã€‚<br>å…³é”®å­—ç”¨åˆ—è¡¨ä¿å­˜ï¼Œé¡µæ•°æ˜¯æœç´¢çš„æ·±åº¦ï¼Œè¶Šå¤§å›¾ç‰‡è¶Šå¤šã€‚</p></blockquote></li><li><p>å›¾ç‰‡ä¿å­˜</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å†™å…¥'</span> <span class="token operator">+</span> SEARCH_KEY_WORD <span class="token operator">+</span> <span class="token string">'å›¾ç‰‡ä¸­ï¼Œè¯·ç¨å...'</span><span class="token punctuation">)</span> file <span class="token operator">=</span> open<span class="token punctuation">(</span>outputFile<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> index <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">for</span> val <span class="token keyword">in</span> outputSet<span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># ä¿å­˜urlåˆ°txtæ–‡ä»¶</span>     file<span class="token punctuation">.</span>write<span class="token punctuation">(</span>val <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>     index <span class="token operator">+=</span> <span class="token number">1</span>     r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>val<span class="token punctuation">)</span>     img_name <span class="token operator">=</span> str<span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.png'</span>     <span class="token comment" spellcheck="true"># ä¿å­˜å›¾ç‰‡</span>     <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'photo/'</span> <span class="token operator">+</span> SEARCH_KEY_WORD <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> img_name<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>         f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">)</span>      file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><blockquote><p>è¿™é‡Œæˆ‘ä¿å­˜äº†é“¾æ¥ï¼Œä¹Ÿä¿å­˜äº†å›¾ç‰‡ï¼Œæ‰€ä»¥å›¾ç‰‡ç›®å½•è¦é¢„å…ˆåˆ›å»ºå¥½ã€‚æ¯”å¦‚â€˜è·¯é£â€™ç›®å½•ç­‰  </p></blockquote></li></ol><p><img src="https://i.loli.net/2019/06/07/5cfa8195c2de963551.png" alt="ç”Ÿæˆç›®å½•">  </p><ol start="3"><li>ç¯å¢ƒå®‰è£…<br>é™¤äº†å¼•ç”¨çš„é‚£äº›ç±»åº“éœ€è¦pipå®‰è£…å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒè¦é…ç½®ã€‚å°±æ˜¯è¿™ä¸ªç”¨åˆ°äº†å…¶å®ç«ç‹æµè§ˆå™¨æ£€ç´¢ï¼ˆå¿…é¡»è¦å®‰è£…ç«ç‹ï¼‰ï¼Œè¿è¡Œä¼šè‡ªåŠ¨æ‰“å¼€ç«ç‹æµè§ˆå™¨ï¼Œè¿™éœ€è¦ç±»ä¼¼ä¸€ä¸ªé©±åŠ¨æ”¯æŒã€‚<br>éœ€è¦ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„<a href="https://github.com/mozilla/geckodriver/releases" target="_blank" rel="noopener">mozilla/geckodriver</a>ï¼Œæ”¾åˆ°æµè§ˆå™¨çš„å®‰è£…è·¯å¾„ä¸‹ã€‚æ¯”å¦‚windowsçš„<em>C:\Program Files\Mozilla Firefox</em>ç›®å½•ä¸‹ã€‚å¹¶ä¸ºæ­¤æ·»åŠ ç¯å¢ƒå˜é‡åˆ°<em>path</em></li></ol>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢éƒ¨åˆ†404å¤§å°å†™é—®é¢˜</title>
      <link href="/2019/06/01/za-ji/hexo-bo-ke-bu-fen-404-da-xiao-xie-wen-ti/"/>
      <url>/2019/06/01/za-ji/hexo-bo-ke-bu-fen-404-da-xiao-xie-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ä¸çŸ¥é“ä¸ºå•¥ï¼Œçªç„¶éƒ¨åˆ†åšå®¢404ï¼Œå»çœ‹äº†github.ioä»“åº“æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¯¹åº”è·¯å¾„çš„index.htmléƒ½æœ‰ã€‚ä½†æ˜¯ç»†ç»†å‘ç°ï¼Œç›®å½•æ–‡ä»¶å¤¹å¤§å°å†™ä¸ä¸€æ ·ã€‚<br><img src="/2019/06/01/za-ji/hexo-bo-ke-bu-fen-404-da-xiao-xie-wen-ti/medias/images/Hexo/404problem1.png" alt="github.ioä»“åº“"><br>è¿™æ˜¯chgl16.github.ioæƒ…å†µï¼Œçº¢è‰²æ¡†çš„æ˜¯æœ‰é—®é¢˜æ—¶å€™çš„ï¼Œéƒ½æ˜¯ç›®å½•éƒ½æ˜¯å¤§å†™ã€‚è¿™è¯´æ˜æ˜¯æŒ‰ç…§æˆ‘æœ¬åœ°ç›®å½•åæäº¤çš„ï¼Œæˆ‘æœ¬åœ°çš„éƒ½æ˜¯å¤§å†™ç›®å½•åã€‚</p><pre class=" language-yml"><code class="language-yml"># URL## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'url: https://cglzwz.xyzroot: /permalink: :year/:month/:day/:title/permalink_defaults:</code></pre><blockquote><p>è¿™æ˜¯hexoåšå®¢æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶çš„urlé…ç½®ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p></blockquote><p>ä¹‹å‰ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä¼°è®¡æ˜¯æˆ‘ä¹‹å‰è®¿é—®çš„URLä¹Ÿæ˜¯å¤§å†™çš„ï¼Œæ‰€ä»¥ç›®å½•åæ‰å¯¹ä¸Šã€‚ä½†æ˜¯ä¸çŸ¥é“ä¸ºå•¥æœ€è¿‘æ–°å†™åšå®¢ï¼Œå‘ç°URLå˜æˆå°å†™äº†ã€‚æäº¤åˆ°github.ioçš„æ–°æ–‡ç« ä¹Ÿæ˜¯å°å†™ç›®å½•ï¼ˆæœ¬åœ°å‘½åå¤§å†™ç›®å½•ï¼‰ã€‚å¾ˆå¥‡æ€ªã€‚</p><pre class=" language-bash"><code class="language-bash">hexo cleanhexo d -g</code></pre><blockquote><p>è¿™äº›éƒ½æ— æ•ˆã€‚ä½†æ˜¯æœ¬åœ°<em>.deploy_git</em>ç›®å½•ä¸‹å´ç”Ÿæˆå°å†™çš„ï¼ˆæ‰€ä»¥ä½¿ç”¨hexo sæœ¬åœ°æµ‹è¯•ä¸å­˜åœ¨404é—®é¢˜ï¼‰ã€‚å°±æ˜¯æäº¤ä¸ä¸Šä»“åº“ã€‚ã€‚å®Œå…¨ä¸ç†è§£</p></blockquote><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>è¿™ä¸ªå¤§å°å†™é—®é¢˜å¾ˆä¹±ï¼Œä½†æ˜¯ä¹Ÿå‘ç°äº†è§£å†³æ–¹æ³•ã€‚<br>ä¿®æ”¹<em>.deploy_git/.git/</em>ç›®å½•ä¸‹çš„confiæ–‡ä»¶<br><img src="/2019/06/01/za-ji/hexo-bo-ke-bu-fen-404-da-xiao-xie-wen-ti/medias/images/Hexo/å¤§å°å†™config.png" alt="configæ–‡ä»¶"><br>æŠŠ<em>ignorecase</em>å±æ€§æ”¹ä¸º<em>false</em>ï¼Œç„¶åé‡æ–°<em>hexo d -g</em>å°±å¯ä»¥äº†ï¼Œè™½ç„¶æœ¬åœ°ç›®å½•å¤§å†™ï¼Œä½†æ˜¯githu.ioä»“åº“ä¼šç”Ÿæˆå°å†™çš„ï¼Œå¯¹åº”å°å†™çš„URLã€‚å›¾ç‰‡1é»„è‰²æ¡†å°±æ˜¯åæ¥ç”Ÿæˆå¯ç”¨çš„ã€‚å½“ç„¶é‡å¤çš„å¯ä»¥åˆ é™¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 404 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TensorFlowå®‰è£…</title>
      <link href="/2019/06/01/tensorflow/tensorflow-an-zhuang/"/>
      <url>/2019/06/01/tensorflow/tensorflow-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h2 id="TensorFlowåˆ†ç±»"><a href="#TensorFlowåˆ†ç±»" class="headerlink" title="TensorFlowåˆ†ç±»"></a>TensorFlowåˆ†ç±»</h2><p>TensorFlowåˆ†ä¸ºçº¯CPUå’Œä½¿ç”¨GPUï¼ˆæ¯”å¦‚æœ‰NVIDIAæ˜¾å¡ï¼‰ä¸¤ç§ï¼Œç±»åº“ä¼šä¸ä¸€æ ·ã€‚  </p><p>ç”µè„‘æ²¡æœ‰è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼Œè¿™é‡Œå®‰è£…ä»…æ”¯æŒCPUçš„TensorFlowã€‚</p><h2 id="TensorFlowå®‰è£…"><a href="#TensorFlowå®‰è£…" class="headerlink" title="TensorFlowå®‰è£…"></a>TensorFlowå®‰è£…</h2><p>å®‰è£…è¦å…ˆä¿è¯å·²ç»å®‰è£…äº†pythonç¯å¢ƒï¼Œpip</p><ol><li><p>ä½¿ç”¨pipåŸç”Ÿå®‰è£…</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># çº¯CPUç‰ˆ</span>pip3 <span class="token function">install</span> --upgrade tensorflow</code></pre><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># GPUç‰ˆ</span>pip3 <span class="token function">install</span> --upgrade tensorflow-gpu</code></pre><p><img src="/2019/06/01/tensorflow/tensorflow-an-zhuang/medias/images/TensorFlow/TensorFlowå®‰è£….png" alt="å®‰è£…"></p><blockquote><p>ä¼šè‡ªåŠ¨ä¸‹è½½å…¶ä»–ä¾èµ–</p></blockquote></li><li><p>ä½¿ç”¨Anacondaè¿›è¡Œå®‰è£…</p><blockquote><p>è¿™ä¸ªè¦å»å…¶å®˜ç½‘ä¸‹è½½è¿™ä¸ªå·¥å…·ï¼Œç„¶åä½¿ç”¨å®ƒå®‰è£…TensorFlow</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> TensorFlow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®‰è£… </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQä½¿ç”¨</title>
      <link href="/2019/05/20/rabbitmq/rabbitmq-shi-yong/"/>
      <url>/2019/05/20/rabbitmq/rabbitmq-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æœåŠ¡ç«¯"><a href="#1-æœåŠ¡ç«¯" class="headerlink" title="1. æœåŠ¡ç«¯"></a>1. æœåŠ¡ç«¯</h2><p>å…ˆå¯åŠ¨æœåŠ¡å™¨</p><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> rabbitmq-server start</code></pre><p><img src="https://raw.githubusercontent.com/chgl16/chgl16.github.io/master/medias/images/rabbitmq-overview.png" alt="Overview"><br>è¿™é‡Œå¯ä»¥çœ‹åˆ°æ¶ˆæ¯çš„æƒ…å†µï¼Œç°åœ¨æ˜¯å•ä¸ªNodeï¼Œæ˜¾ç¤ºäº†æœåŠ¡å™¨ç«¯çš„ä¸€äº›é…ç½®ä¿¡æ¯ã€‚</p><p><img src="https://raw.githubusercontent.com/chgl16/chgl16.github.io/master/medias/images/rabbitmq-exchange.png" alt="Exchange"><br>è‡ªå¸¦8ç§äº¤æ¢æœºï¼Œå¯ä»¥åœ¨è¿™é‡Œç›´æ¥æ·»åŠ è‡ªå®šä¹‰çš„äº¤æ¢æœºï¼Œé…ç½®åå­—ï¼Œå¯æŒä¹…åŒ–ç­‰å±æ€§ï¼›<br>ä¹Ÿå¯ä»¥ç‚¹å‡»äº¤æ¢æœºåˆ—è¡¨è¿›å…¥æŒ‡å®šäº¤æ¢æœºæŸ¥çœ‹è¯¦æƒ…ï¼Œé‡Œé¢å¯ä»¥ç»‘å®šé˜Ÿåˆ—(éœ€è¦æŒ‡å®šrouting key)ï¼Œé…ç½®ç­‰ç­‰ã€‚  </p><p><img src="https://raw.githubusercontent.com/chgl16/chgl16.github.io/master/medias/images/rabbitmq-queue.png" alt="Queue"><br>é˜Ÿåˆ—é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œå¯ä»¥ç‚¹å‡»æ·»åŠ ï¼Œé˜Ÿåˆ—è¡¨æ ¼ä¹Ÿæœ‰å„ä¸ªç°å­˜é˜Ÿåˆ—çš„ä¿¡æ¯ï¼Œæ¶ˆæ¯æƒ…å†µï¼Œç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°å…·ä½“çš„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å¾€é˜Ÿåˆ—å‘æ¶ˆæ¯ï¼Œpurgeæ¸…ç©ºé˜Ÿåˆ—ç­‰ç­‰ã€‚</p><h2 id="2-æ¶ˆè´¹è€…"><a href="#2-æ¶ˆè´¹è€…" class="headerlink" title="2. æ¶ˆè´¹è€…"></a>2. æ¶ˆè´¹è€…</h2><p>å…ˆå†™æ¶ˆè´¹è€…ï¼Œæ˜¯å› ä¸ºæ¶ˆè´¹è€…ç»‘å®šé˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…å¯ä»¥ç›´æ¥æ³¨å†Œé˜Ÿåˆ—äº¤æ¢æœºç­‰éœ€è¦çš„ä¿¡æ¯ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºã€‚  </p><blockquote><p>å…¶å®å¾ˆå¥½ç†è§£ï¼Œç±»ä¼¼å‘ä¿¡ä»¶ï¼Œ<em>æ¯ä¸ªæ”¶ä»¶äººéƒ½æœ‰ä¸€ä¸ªé‚®ç®±</em>ï¼Œç›¸å½“äºé˜Ÿåˆ—ã€‚è¿™æ˜¯ç»‘å®šçš„é˜Ÿåˆ—ï¼Œäº¤æ¢æœºæ˜¯ä¸€ä¸ªé‚®é€’å‘˜ï¼Œè´Ÿè´£æ ¹æ®ä¿¡ä»¶çš„ç›®çš„åœ°å€ï¼ˆRouting key)è·¯ç”±åˆ†å‘ã€‚è€Œé‚®ç®±å’Œå¿«é€’å‘˜ç­‰æˆ‘ä»¬å¯ä»¥æŠ½å‡ºæ¥æˆä¸ºæœåŠ¡å™¨ç«¯ï¼Œæˆ‘è¦å¯„ä»¶å»æ‰¾ä¸“é—¨çš„é‚®é€’å‘˜ï¼ˆäº¤æ¢æœºï¼‰æŠ•é€’å³å¯ã€‚  </p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æ¥æ”¶æ¶ˆè´¹è®¢å•æ¶ˆæ¯ * @author chgl16 * @date 2019-05-17 10:04 * @version 1.0 */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderReceiver</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>            value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"order-queue"</span><span class="token punctuation">,</span> durable <span class="token operator">=</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"order-exchange"</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"topic"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            key <span class="token operator">=</span> <span class="token string">"order.*"</span>        <span class="token punctuation">)</span>    <span class="token punctuation">)</span>    <span class="token annotation punctuation">@RabbitHandler</span>  <span class="token comment" spellcheck="true">// æ ‡è¯†ä¸ºæ¶ˆæ¯æ¶ˆè´¹è€…</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> Order order<span class="token punctuation">,</span>                        Channel channel<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// æ‰‹åŠ¨ç¡®è®¤éœ€è¦ä½¿ç”¨channel</span>                        <span class="token annotation punctuation">@Headers</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> headers                        <span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------æ¥æ”¶æ¶ˆæ¯ï¼Œå¼€å§‹æ¶ˆè´¹-------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è®¢å•ID: "</span> <span class="token operator">+</span> order<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä»Headerè·å–ç¡®è®¤æ ‡è¯†</span>        Long deliveryTag <span class="token operator">=</span> <span class="token punctuation">(</span>Long<span class="token punctuation">)</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>AmqpHeaders<span class="token punctuation">.</span>DELIVERY_TAG<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ‰‹åŠ¨ç¡®è®¤ACK</span>        channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>æ³¨æ„è¿™é‡Œæ˜¯æ‰‹åŠ¨ç¡®è®¤ï¼Œè¿™ä¸ªæ–¹æ³•æ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç›‘å¬å™¨ï¼Œæ”¶åˆ°æ¶ˆæ¯è‡ªåŠ¨è§¦å‘ã€‚</p></blockquote><h2 id="3-ç”Ÿäº§è€…"><a href="#3-ç”Ÿäº§è€…" class="headerlink" title="3. ç”Ÿäº§è€…"></a>3. ç”Ÿäº§è€…</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ç”Ÿæˆæ¶ˆæ¯ï¼Œå‘é€ * @author chgl16 * @date 2019-05-16 21:27 * @version 1.0 */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderSender</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * ä½¿ç”¨æä¾›çš„é›†æˆæ¨¡æ¿æ“ä½œ     */</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> RabbitTemplate rabbitTemplate<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>Order order<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è®¾ç½®ç›¸å…³æ¶ˆæ¯å”¯ä¸€æ ‡è¯†</span>        CorrelationData correlationData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorrelationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        correlationData<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getMessageId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>                <span class="token string">"order-exchange"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// exchange</span>                <span class="token string">"order.chgl16"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// routing key</span>                order<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// message</span>                correlationData  <span class="token comment" spellcheck="true">// å”¯ä¸€æ ‡è¯†</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç›´æ¥ä½¿ç”¨æ¨¡æ¿ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> RabbitMQ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitæ’¤é”€commit</title>
      <link href="/2019/05/20/git/git-che-xiao-commit/"/>
      <url>/2019/05/20/git/git-che-xiao-commit/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜1ï¼šæ— æ³•commit"><a href="#é—®é¢˜1ï¼šæ— æ³•commit" class="headerlink" title="é—®é¢˜1ï¼šæ— æ³•commit"></a>é—®é¢˜1ï¼šæ— æ³•commit</h2><pre class=" language-bash"><code class="language-bash">error: pathspec <span class="token string">'fix:ä¿®å¤æ’ç‰ˆ'</span> did not match any file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> known to</code></pre><p>å…¶å®åŸå› å¾ˆæ˜æ˜¾ï¼Œè™½ç„¶git statusçœ‹åˆ°äº†ä¿®æ”¹çš„æ–‡ä»¶ï¼Œä½†æ˜¯å´æ²¡æœ‰åŒ¹é…çš„ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰ä¿å­˜ï¼Œè®°å¾—Crtl + S</p><blockquote><p>ä¹Ÿæœ‰ç½‘å‹çš„æ˜¯å› ä¸º<em>git commit â€˜xxâ€™</em>ä½¿ç”¨äº†å•å¼•å·çš„ç¼˜æ•…</p></blockquote><h2 id="é—®é¢˜2ï¼šæ’¤é”€commit"><a href="#é—®é¢˜2ï¼šæ’¤é”€commit" class="headerlink" title="é—®é¢˜2ï¼šæ’¤é”€commit"></a>é—®é¢˜2ï¼šæ’¤é”€commit</h2><p>æœ‰æ—¶å€™æ²¡æœ‰commitäº†ï¼Œä½†æ˜¯ä¸æƒ³æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œæˆ–è€…pullçš„æ—¶å€™éœ€è¦æäº¤ï¼Œæˆ‘ä»¬ä¸æƒ³ï¼Œå¯ä»¥å¦‚ä¸‹æ“ä½œ</p><ol><li>æ‰¾åˆ°ä¸Šæ¬¡æäº¤çš„commit-id<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> log</code></pre></li><li>ç‰ˆæœ¬å›é€€,åŒæ—¶ä¹Ÿæœ‰æ’¤é”€çš„æ•ˆæœ<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> reset --hard commit-id</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</title>
      <link href="/2019/05/19/jian-zhi-offer/ba-shu-zu-pai-cheng-zui-xiao-de-shu/"/>
      <url>/2019/05/19/jian-zhi-offer/ba-shu-zu-pai-cheng-zui-xiao-de-shu/</url>
      
        <content type="html"><![CDATA[<p>##<br><a href="https://www.nowcoder.com/practice/8fecd3f8ba334add803bf2a06af1b993?tpId=13&amp;tqId=11185&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">é¢˜ç›®</a>  </p><p>è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚ä¾‹å¦‚è¾“å…¥æ•°ç»„{3ï¼Œ32ï¼Œ321}ï¼Œåˆ™æ‰“å°å‡ºè¿™ä¸‰ä¸ªæ•°å­—èƒ½æ’æˆçš„æœ€å°æ•°å­—ä¸º321323ã€‚  </p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å…¶å®å°±æ˜¯ä¸€ç§æ’åºï¼Œä½†æ˜¯ä¼šé™·å…¥ä¸€ç§æƒ³æ³•ï¼šæ¯”è¾ƒæ¯ä¸ªæ•°çš„ç¬¬ä¸€ä½ï¼Œå°çš„æ’å‰é¢ï¼Œç›¸åŒçš„æ¯”è¾ƒä¸‹ä¸€ä½ï¼Œå°çš„å‰é¢ã€‚ä½†æ˜¯è¿™æ ·æ¯”è¾ƒæ„Ÿè§‰æ˜¯ä¸€æ¬¡å…¨éƒ¨æ¯”è¾ƒã€‚æ¢ä¸ªæ€æƒ³  </p><ul><li>å…¶å®å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªé‚£ä¸ªå¤§å°å°±å¯ä»¥äº†ã€‚é‚£ä¹ˆå¯ä»¥ç”¨abå’Œbaä¸åŒæ‹¼æ¥é¡ºåºæ¯”è¾ƒå³å¯ã€‚å‰©ä½™å°±æ˜¯æ’åºäº†ã€‚ </li></ul><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> String <span class="token function">PrintMinNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> numbers<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        StringBuilder ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            ans<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ans<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>low <span class="token operator">>=</span> high<span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> low<span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> high<span class="token punctuation">;</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> <span class="token function">compare</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> pivot<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>                j<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> <span class="token function">compare</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> pivot<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">^</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">^</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">^</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        arr<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> pivot<span class="token punctuation">;</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> low<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        StringBuilder s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        StringBuilder s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        s1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>        s1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>        s2<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>        s2<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>        String p1 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String p2 <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> p1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol><li>Stringç±»å®ç°Comparable<t>çš„compareToæ–¹æ³•ï¼Œåˆ†åˆ«è¿”å›-1ã€0ã€1ã€‚Stringbuilderæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯å…¶æºç <br><code>`</code>java<br>/**</t></li></ol><ul><li>Compares two strings lexicographically.</li><li>The comparison is based on the Unicode value of each character in</li><li>the strings. The character sequence represented by this</li><li>{@code String} object is compared lexicographically to the</li><li>character sequence represented by the argument string. The result is</li><li>a negative integer if this {@code String} object</li><li>lexicographically precedes the argument string. The result is a</li><li>positive integer if this {@code String} object lexicographically</li><li>follows the argument string. The result is zero if the strings</li><li>are equal; {@code compareTo} returns {@code 0} exactly when</li><li>the {@link #equals(Object)} method would return {@code true}.</li><li><p></p></li><li>This is the definition of lexicographic ordering. If two strings are</li><li>different, then either they have different characters at some index</li><li>that is a valid index for both strings, or their lengths are different,</li><li>or both. If they have different characters at one or more index</li><li>positions, let <i>k</i> be the smallest such index; then the string</li><li>whose character at position <i>k</i> has the smaller value, as</li><li>determined by using the &lt; operator, lexicographically precedes the</li><li>other string. In this case, {@code compareTo} returns the</li><li>difference of the two character values at position {@code k} in</li><li>the two string â€“ that is, the value:</li><li><blockquote><pre></pre></blockquote></li><li>this.charAt(k)-anotherString.charAt(k)</li><li></li><li>If there is no index position at which they differ, then the shorter</li><li>string lexicographically precedes the longer string. In this case,</li><li>{@code compareTo} returns the difference of the lengths of the</li><li>strings â€“ that is, the value:</li><li><blockquote><pre></pre></blockquote></li><li>this.length()-anotherString.length()</li><li><br>*</li><li>@param   anotherString   the {@code String} to be compared.</li><li>@return  the value {@code 0} if the argument string is equal to</li><li>this string; a value less than {@code 0} if this string</li><li>is lexicographically less than the string argument; and a</li><li>value greater than {@code 0} if this string is</li><li><p>lexicographically greater than the string argument.<br>*/<br>public int compareTo(String anotherString) {<br>int len1 = value.length;<br>int len2 = anotherString.value.length;<br>int lim = Math.min(len1, len2);<br>char v1[] = value;<br>char v2[] = anotherString.value;</p><p>int k = 0;<br>while (k &lt; lim) {<br>char c1 = v1[k];<br>char c2 = v2[k];<br>if (c1 != c2) {<br> return c1 - c2;<br>}<br>k++;<br>}<br>return len1 - len2;<br>}<br><code>`</code></p></li></ul><ol start="2"><li>å…¶å®å¯ä»¥ä¸å†™æ’åºï¼Œç”¨è‡ªå¸¦çš„å¿«æ’ã€‚ä½†æ˜¯è¦è‡ªå†™ä¸€ä¸ªæ¯”è¾ƒå™¨ã€‚ä½¿ç”¨çš„æ³›å‹æ˜¯Integerï¼Œç”¨Arraysçš„public static <t> void sort(T[] a, Comparator&lt;? super T&gt; c) æ¯”è¾ƒéº»çƒ¦ï¼Œæ•°ç»„ä¹Ÿè¦æ˜¯Integer  </t></li></ol><p>å¯ä»¥åŠ å…¥listç„¶åå†™è¿‡ï¼Œä¸Šå‡ä¸ºé›†åˆï¼Œä½¿ç”¨ Collections.sort(list, new Comparator<integer>(){â€¦}</integer></p>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡offer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
            <tag> compareæ¯”è¾ƒå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaåºåˆ—åŒ–é—®é¢˜</title>
      <link href="/2019/05/19/java/java-xu-lie-hua-wen-ti/"/>
      <url>/2019/05/19/java/java-xu-lie-hua-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="1-åºåˆ—åŒ–"><a href="#1-åºåˆ—åŒ–" class="headerlink" title="1. åºåˆ—åŒ–"></a>1. åºåˆ—åŒ–</h2><pre><code>åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬ä¸ºæ–‡ä»¶ï¼Œæ–¹ä¾¿ä¼ è¾“å…±äº«ï¼Œæ¯”å¦‚æ¶ˆæ¯é˜Ÿåˆ—ä¼ è¾“çš„æ¶ˆæ¯</code></pre><p>&emsp;&emsp;Javaå®ç°åºåˆ—åŒ–åªéœ€è¦å®ç°Serializableæ¥å£å³å¯ï¼Œè¯¥æ¥å£æºç å†…å®¹åªæœ‰ä¸€ä¸ªSerialVersionUIDå¸¸é‡ï¼Œå†æ·±å…¥ä¸ºNativeäº†ã€‚</p><pre class=" language-java"><code class="language-java">Class <span class="token class-name">MyClass</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>2926828973935247000L<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/*      ...    */</span><span class="token punctuation">}</span></code></pre><blockquote><p>serialVersionUIDé»˜è®¤æ˜¯1Lï¼Œè¿™ä¸ªæ˜¯åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æ¯”å¯¹çš„å…³é”®ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨æ’ä»¶GenerateSerialVersionUIDéšæœºç”Ÿæˆã€‚ä¸€èˆ¬éƒ½æ˜¯20ä¸ªæ•°ã€‚</p></blockquote><h2 id="2-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–é—®é¢˜"><a href="#2-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–é—®é¢˜" class="headerlink" title="2. åºåˆ—åŒ–ä¸ååºåˆ—åŒ–é—®é¢˜"></a>2. åºåˆ—åŒ–ä¸ååºåˆ—åŒ–é—®é¢˜</h2><h4 id="2-1-åˆ¤æ–­åŸç†"><a href="#2-1-åˆ¤æ–­åŸç†" class="headerlink" title="2.1 åˆ¤æ–­åŸç†"></a>2.1 åˆ¤æ–­åŸç†</h4><p>&emsp;&emsp;åºåˆ—åŒ–ä¸ååºåˆ—åŒ–éœ€è¦åˆ¤æ–­å¾ˆå¤šï¼Œä»¥ä¸‹ä¸¾RabbitMQæ¶ˆæ¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¼ é€’çš„æ¶ˆæ¯Orderå¯¹è±¡ä¸ºä¾‹å­ã€‚ </p><ul><li>é¦–å…ˆSerialVersionUIDå°±éœ€è¦ä¸€è‡´ï¼Œå°±æ˜¯ä¸¤è¾¹çš„Orderç±»éƒ½ä½¿ç”¨åŒä¸€ä¸ªSerialVersionUIDã€‚</li><li>ç±»çš„å±æ€§æ–¹æ³•ç­‰ä¸€è‡´ï¼Œ<strong>åŒ…åä¸€è‡´</strong>ï¼ˆé‡ç‚¹ï¼‰ï¼Œæˆ‘ä»¬åºåˆ—åŒ–ä¸ååºåˆ—åŒ–å¸¸å¸¸æ˜¯è·¨é¡¹ç›®çš„ï¼Œä½†æ˜¯OrderåŒ…åä¸ä¸€æ ·æ˜¯ä¸èƒ½ååºåˆ—åŒ–çš„ï¼Œä¼šæŠ¥é”™ClassNotFoundï¼Œå› æ­¤æˆ‘ä»¬å¸¸ç”¨çš„è§£å†³æ–¹æ³•æ˜¯ä¿è¯åŒ…åä¸€è‡´ï¼Œæ¯”å¦‚xyz.cglzwz.common.entity.Orderï¼Œå¤šå†™ä¸€ä¸ªã€‚æˆ–è€…å°†è¿™ä¸ªç±»ä½¿ç”¨JaråŒ…ä½œä¸ºä¾èµ–å…±äº«ã€‚</li></ul><h4 id="2-2-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è½¬æ¢å®ç°ï¼š"><a href="#2-2-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è½¬æ¢å®ç°ï¼š" class="headerlink" title="2.2 åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è½¬æ¢å®ç°ï¼š"></a>2.2 åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è½¬æ¢å®ç°ï¼š</h4><p>&emsp;&emsp;å¯ä»¥æ‰‹å†™å®ç°ï¼Œä¸»è¦ä½¿ç”¨FileOutputStream, ObjectOutputStream,FileInputStream,ObjectInputStreamã€‚</p><blockquote><p>å½“ç„¶å¦‚æœæ˜¯å†…éƒ¨å°è£…å¥½äº†çš„ååºåˆ—åŒ–ï¼Œæ¯”å¦‚ä¸Šé¢çš„RabbitMQæ¶ˆè´¹è€…é‚£é‡Œå¯¹æ¶ˆæ¯çš„ååºåˆ—åŒ–å°±æ˜¯Springå†…éƒ¨å®Œæ•´çš„ï¼Œæˆ‘ä»¬å°±æ— æ³•ä¿®æ”¹äº†ã€‚</p></blockquote><p>ä»£ç åç»­è¡¥ä¸Šï¼Œ<a href="https://www.jianshu.com/p/1bae21fa2cd6" target="_blank" rel="noopener">å‚è€ƒ</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Serializableæ¥å£ </tag>
            
            <tag> åºåˆ—åŒ–ä¸ååºåˆ—åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisæ‚è®°</title>
      <link href="/2019/05/19/redis/redis-za-ji/"/>
      <url>/2019/05/19/redis/redis-za-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>redisç›®å‰æ”¯æŒLinuxï¼Œä¹Ÿæ”¯æŒäº†<a href="https://github.com/MSOpenTech/redis/releases" target="_blank" rel="noopener">Windows</a>ã€‚<br>å¦‚æœä¸æ˜¯é›†ç¾¤ï¼ŒåŸºæœ¬é…ç½®å°±IPå’Œportã€‚<br>redisæ˜¯å•çº¿ç¨‹çš„ï¼Œé€Ÿåº¦å®˜æ–¹ç»™å‡ºè¯»å†™æœ‰10w/sã€‚redisæœ¬èº«ä¹Ÿæœ‰æä¾›æµ‹è¯•çš„æ¨¡å—ã€‚    </p><p>å¯¹æ¯”å¸¸è§çš„key-valueæ–¹å¼çš„NOSQLï¼Œæ¯”å¦‚ä¹‹å‰çš„Memcachedã€‚redisæ›´ä¼˜ç§€ã€‚å…¶æ”¯æŒçš„æ•°æ®ç±»å‹æ›´å¤šï¼Œä¸ä»…ä»…æ˜¯Stringï¼Œé€‚ç”¨åœºæ™¯ä¹Ÿæ›´å¤§ã€‚è€Œä¸”æ”¯æŒæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œä¹Ÿæ”¯æŒä¸»ä»å¤‡ä»½ã€‚  </p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>redisæ”¯æŒå¾ˆå¤šæ•°æ®ç±»å‹ï¼Œkey-valueæ–¹å¼ã€‚keyéƒ½æ˜¯Stringã€‚æˆ‘ä»¬è¯´çš„æ•°æ®ç±»å‹æŒ‡çš„æ˜¯valueã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ã€‚</p><h4 id="1-String"><a href="#1-String" class="headerlink" title="1. String"></a>1. String</h4><p>Stringæ˜¯æœ€å¸¸ç”¨çš„ï¼Œå¦‚æœæ˜¯æ•°å€¼å‹çš„è¿˜å¯ä»¥åšå››åˆ™è¿ç®—ã€‚è€Œä¸”redisçš„Stringæ›´å¼ºå¤§ï¼Œæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œå¯ä»¥å­˜å‚¨åºåˆ—åŒ–çš„å¯¹è±¡æˆ–è€…å›¾ç‰‡å•¥çš„ï¼Œæœ€å¤§æ”¯æŒ512MBã€‚    </p><p>åº”ç”¨åœºæ™¯ï¼š<br>å¯ä»¥å­˜å‚¨åºåˆ—åŒ–çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨åšå­˜å‚¨å¸¸ç”¨çš„éªŒè¯ç ï¼Œæ·»åŠ ä¸€ä¸ªexpireè¶…æ—¶è‡ªåŠ¨åˆ é™¤keyå³å¯ã€‚ç»´æŠ¤ä¸€è‡´æ€§ã€‚</p><p>ä¹Ÿå°±æ˜¯å¸¸ç”¨çš„ set key value å’Œ get valueæ“ä½œã€‚ </p><h4 id="2-list"><a href="#2-list" class="headerlink" title="2. list"></a>2. list</h4><p>é˜Ÿåˆ—åˆ—è¡¨ï¼ŒFIFLã€‚åŸºæœ¬æ“ä½œå‘½ä»¤å¦‚ä¸‹   </p><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th style="text-align:center">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:center">LPUSH listkey value</td><td style="text-align:center">æ·»åŠ ä¸€ä¸ª</td></tr><tr><td style="text-align:center">BPUSH listkey value1 value2â€¦</td><td style="text-align:center">æ·»åŠ å¤šä¸ª</td></tr><tr><td style="text-align:center">LPOP listkey</td><td style="text-align:center">è·å–ç¬¬ä¸€ä¸ªå¹¶å¾—å€¼</td></tr><tr><td style="text-align:center">LINDEX listkey index</td><td style="text-align:center">ç´¢å¼•è·å–å€¼</td></tr><tr><td style="text-align:center">LLEN listkey</td><td style="text-align:center">é˜Ÿåˆ—é•¿åº¦</td></tr></tbody></table><p>listå…¶å®ä¸»è¦æ˜¯æœ‰åºçš„  </p><ol><li>æ¯”å¦‚ç”¨redisç¼“å­˜åº“å­˜åšç§’æ€çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆå¤šæ¬¡ LPUSH goodsId 1 æ¥è¾¾åˆ°å•†å“åº“å­˜æ•°é‡ã€‚å¼€å§‹ç§’æ€çš„æ—¶å€™ä¾æ¬¡LPOP goodsId å‡ºé˜Ÿï¼Œå¦‚æœä¸ä¸ºç©ºç§’æ€æˆåŠŸï¼Œè®°å½•ç”¨æˆ·è´­ä¹°ä¿¡æ¯å‘åˆ°å¼‚æ­¥çš„MQå³å¯ã€‚<br>æˆ–è€…ä¸€å¼€å§‹å°±LPUSH goodsId userIdå…¥é˜Ÿï¼Œç§’æ€ä¸­åˆ¤æ–­ LLEN goodsId == åº“å­˜ ï¼Ÿ å·²åˆ¤æ–­ç§’æ€ç»“æŸä¸å¦ã€‚<br>åæ­£ç§’æ€è¿‡ç¨‹ä¸­æ˜¯ä¸ä¼šç­‰åˆ°æ‰€æœ‰ç”¨æˆ·éƒ½è®°å½•äº†åœ¨å‘åˆ°mqçš„ï¼Œé‚£ä¸åˆ‡å®ã€‚</li></ol><h4 id="3-Set"><a href="#3-Set" class="headerlink" title="3. Set"></a>3. Set</h4><p>setå¯¹æ¯”listï¼Œå…¶æ˜¯æ— åºçš„ã€‚è€Œä¸”æ˜¯å…ƒç´ å”¯ä¸€çš„ã€‚å†…éƒ¨é€šè¿‡å“ˆæ–¯è¡¨å®ç°ã€‚å› æ­¤å­˜å‚¨æŸ¥æ‰¾é€Ÿåº¦éƒ½æ˜¯O(1)ã€‚   </p><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th style="text-align:center">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:center">SADD key member1 [member2]</td><td style="text-align:center">æ·»åŠ å¤šä¸ª</td></tr><tr><td style="text-align:center">SPOP key</td><td style="text-align:center">éšæœºç§»é™¤ä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:center">SCARD key</td><td style="text-align:center">é›†åˆå¤§å°</td></tr></tbody></table><p>setæœ€ç‰›çš„åœ°æ–¹åœ¨äºï¼Œå¯ä»¥å¯¹ä¸¤ä¸ªsetæä¾›äº¤é›†ã€å¹¶é›†ã€å·®é›†æ“ä½œã€‚ä¾‹å¦‚ï¼šæŸ¥æ‰¾ä¸¤ä¸ªäººå…±åŒçš„å¥½å‹ç­‰ã€‚</p><h4 id="4-Sorted-set"><a href="#4-Sorted-set" class="headerlink" title="4.Sorted set"></a>4.Sorted set</h4><p>æ¯”æ™®é€šçš„setå¤šäº†ä¸€ä¸ªæƒé‡çš„å­—æ®µã€‚ç”¨äºæ’åºã€‚å…¶ä½™å’Œsetç±»ä¼¼ã€‚<br>å¦‚ï¼š </p><pre class=" language-shell"><code class="language-shell">ZADD sortedSetKey 1 aaZADD sortedSetKey 2 bb...# è·å–å‰å‡ åå¹¶ä¸”è¾“å‡ºæƒé‡ZRANGE sortedSetKey 0 5 WITHSCORES</code></pre><p>å¯ä»¥è·å–å‰å‡ åæ•°æ®ã€‚æ¯”å¦‚åšé‚£ç§ç”¨æˆ·æ¦œå•æ’åã€‚</p><h4 id="5-Hash"><a href="#5-Hash" class="headerlink" title="5. Hash"></a>5. Hash</h4><pre class=" language-shell"><code class="language-shell">HMSET key name "redis tutorial" description "redis basic commands for caching" likes 20 visitors  3333# è·å–å…¶ä¸­çš„æŸä¸ªå­—æ®µå€¼HGET key name </code></pre><p>å®Œå…¨å¯ä»¥å­˜å…¥ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯</p><h4 id="6-HypeLogLog"><a href="#6-HypeLogLog" class="headerlink" title="6.HypeLogLog"></a>6.HypeLogLog</h4><p>ä¸»è¦æ˜¯ç”¨æ¥åšåŸºæ•°è®¡ç®—çš„ï¼Œç±»ä¼¼set</p><pre class=" language-shell"><code class="language-shell">redis 127.0.0.1:6379> PFADD runoobkey "redis"1) (integer) 1redis 127.0.0.1:6379> PFADD key "mongodb"1) (integer) 1redis 127.0.0.1:6379> PFADD key "mysql"1) (integer) 1redis 127.0.0.1:6379> PFCOUNT key(integer) 3</code></pre><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><p>redisæ˜¯æ”¯æŒäº‹åŠ¡çš„ã€‚éƒ½æ˜¯å¹¶ä¸èƒ½ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ã€‚åªæ˜¯æ¯ä¸ªæ“ä½œæ˜¯åŸå­çš„ï¼Œå› ä¸ºå•çº¿ç¨‹ã€‚<br>æŠŠäº‹åŠ¡æ”¾åœ¨ MULTIå’Œ EXECé‡Œé¢å³å¯ã€‚</p><p>å®˜æ–¹çš„è§£é‡Šæ˜¯ï¼Œredisä¸ä¿è¯äº‹åŠ¡åŸå­æ€§æ˜¯å› ä¸ºrediså¾ˆå¿«ï¼Œä¸€èˆ¬å¦‚æœä¸æ˜¯è¯­æ³•é”™è¯¯éƒ½æ²¡æœ‰é—®é¢˜ã€‚è€Œä¸”ä¹Ÿæ˜¯ä¸ºäº†è¿½æ±‚å¿«ã€‚ä¸ä¿è¯äº‹åŠ¡åŸå­æ€§  </p><h2 id="å‘å¸ƒè®¢é˜…"><a href="#å‘å¸ƒè®¢é˜…" class="headerlink" title="å‘å¸ƒè®¢é˜…"></a>å‘å¸ƒè®¢é˜…</h2><p>redisè™½ç„¶æ˜¯ç¼“å­˜ï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒMQçš„å‘å¸ƒè®¢é˜…æ¨¡å‹</p><p>å‘å¸ƒè®¢é˜…å’Œç‚¹å¯¹ç‚¹å¯¹æ¯”ä¸»è¦æ˜¯</p><ul><li>æ”¯æŒå¤šç”¨æˆ·è®¢é˜…æ¶ˆè´¹åŒä¸€æ¡æ¶ˆæ¯</li><li>æ¶ˆæ¯ä¸èƒ½ç¼“å­˜ï¼Œç¦»çº¿å†æ¬¡ä¸Šçº¿æ”¶ä¸åˆ°ç¦»çº¿æ¶ˆæ¯  </li></ul><p>æ¯”è¾ƒç®€å•</p><pre class=" language-shell"><code class="language-shell">redis 127.0.0.1:6379> SUBSCRIBE redisChatReading messages... (press Ctrl-C to quit)1) "subscribe"2) "redisChat"3) (integer) 1</code></pre><p>è®¢é˜…äº†ä¸€ä¸ªåä¸º redisChat çš„é¢‘é“ï¼Œï¼ˆä¸å­˜åœ¨ä¼šåˆ›å»ºï¼‰ï¼Œå¯ä»¥å¼€å¤šä¸ªç»ˆç«¯è®¢é˜…åŒä¸€ä¸ªé¢‘é“ã€‚  </p><p>ä¹Ÿå¯ä»¥å¼€å¤šä¸ªç»ˆç«¯å‘é€æ¶ˆæ¯åˆ°åŒä¸€ä¸ªé¢‘é“</p><pre class=" language-shell"><code class="language-shell">127.0.0.1:6379> publish redisChat "hello"(integer) 1127.0.0.1:6379></code></pre><blockquote><p>è¡¥å……ä¸‹ï¼Œredisæ¯ä¸ªå‘½ä»¤æ“ä½œæˆåŠŸéƒ½ä¼šè¿”å›ä¸€ä¸ª (integer 1), å¤±è´¥æ˜¯ (integer 0)</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.runoob.com/redis/redis-pub-sub.html" target="_blank" rel="noopener">èœé¸Ÿredisæ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEAä¸€ä¸ªçª—å£å¤šä¸ªé¡¹ç›®</title>
      <link href="/2019/05/17/kai-fa-gong-ju/idea-yi-ge-chuang-kou-duo-ge-xiang-mu/"/>
      <url>/2019/05/17/kai-fa-gong-ju/idea-yi-ge-chuang-kou-duo-ge-xiang-mu/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šä¸ªå¹¶åˆ—-æ¨è"><a href="#å¤šä¸ªå¹¶åˆ—-æ¨è" class="headerlink" title="å¤šä¸ªå¹¶åˆ—(æ¨è)"></a>å¤šä¸ªå¹¶åˆ—(æ¨è)</h2><p>å¹³æ—¶IDEAéƒ½æ˜¯é»˜è®¤ä¸€ä¸ªçª—å£ä¸€ä¸ªé¡¹ç›®ï¼Œå½“å¼€å‘åˆ°Spring Cloudæˆ–è€…ä¸­é—´ä»¶è¿™ç§æˆ‘ä»¬è¦æ¶ˆè´¹è€…æä¾›è€…ç­‰ç­‰çš„æ—¶å€™ï¼Œå¹¶ä¸æ–¹ä¾¿ã€‚å¹¶åˆ—ä¹Ÿå¾ˆç®€å•ã€‚<br>æ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸€ä¸ªModuleã€‚<br>æ“ä½œï¼š<br>&emsp;&emsp;æˆ‘ä»¬åœ¨åªæœ‰ä¸€ä¸ªé¡¹ç›®çš„çª—å£ï¼Œé€‰æ‹©new -&gt; Module from existing sourceså³å¯ã€‚ç„¶åå¼€å‘å°±å¾ˆæ–¹ä¾¿ã€‚</p><h2 id="çˆ¶å­é¡¹ç›®-ä¸æ¨è"><a href="#çˆ¶å­é¡¹ç›®-ä¸æ¨è" class="headerlink" title="çˆ¶å­é¡¹ç›®(ä¸æ¨è)"></a>çˆ¶å­é¡¹ç›®(ä¸æ¨è)</h2><p><img src="https://raw.githubusercontent.com/chgl16/chgl16.github.io/master/medias/images/IDEA1.png" alt="éª¨æ¶"></p><p>æ¡ˆä¾‹ï¼š<br>&emsp;&emsp;åˆ›å»ºçš„çˆ¶é¡¹ç›®æ˜¯ç©ºçš„åŸºæœ¬ï¼Œæ¯”å¦‚ä¸€å¼€å§‹åšçš„é‚£ä¸ªRabbitMQçš„demo, æˆ‘æƒ³çˆ¶é¡¹ç›®å‘½åä¸ºrabbitmq-demoï¼Œç„¶åpom.xmlåŠ è½½spring-boot-starter-amqpä¾èµ–ï¼Œä»¥åå†å†™ä¸¤ä¸ªå­é¡¹ç›®</p><p>&emsp;&emsp;åˆ†åˆ«æ˜¯producerå’Œcunsumerï¼Œæ­£å¥½ä¸¤ä¸ªéƒ½ç»§æ‰¿çˆ¶é¡¹ç›®çš„ä¾èµ–ï¼Œå°±ä¸ç”¨å†å¯¼å…¥amqpä¾èµ–äº†ã€‚</p><p>æ“ä½œï¼š</p><ol><li>å…ˆä½¿ç”¨Spring Initializråˆ›å»ºä¸€ä¸ªçˆ¶é¡¹ç›®ï¼Œç„¶åæŠŠå®ƒçš„srcåˆ é™¤ï¼Œé…ç½®å¥½pom.xml</li><li>åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªå­é¡¹ç›®ï¼Œä½¿ç”¨new -&gt; Moduleåˆ›å»ºï¼Œä¸€æ ·ä½¿ç”¨Spring Initialzrã€‚ç„¶åè¿™ä¸¤ä¸ªé¡¹ç›®çš„pom.xmlå†æ”¹ä¸ºå°±ç»§æ‰¿çˆ¶é¡¹ç›®çš„å³å¯</li></ol><p>å¼Šç«¯ï¼š</p><ol><li>ä¸‹æ¬¡å¯¼å…¥IDEAçš„è¯ï¼Œæˆ–è€…ä»Gitå¯¼å…¥çš„è¯å¾ˆéº»çƒ¦ã€‚å› ä¸ºé‡æ–°æ‰“å¼€é»˜è®¤äº†çˆ¶é¡¹ç›®æ˜¯ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢çš„ä¸¤ä¸ªå­é¡¹ç›®å˜æˆäº†çº¯æ–‡ä»¶å¤¹ï¼Œè™½ç„¶å¯ä»¥æ”¹Project Structureï¼Œä½†æ˜¯ä»ç„¶ä¸ä¹è§‚ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>grepå‘½ä»¤</title>
      <link href="/2019/05/16/linux/grep-ming-ling/"/>
      <url>/2019/05/16/linux/grep-ming-ling/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>&emsp;&emsp;Linuxç³»ç»Ÿä¸­grepå‘½ä»¤æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹ é…çš„è¡Œæ‰“å°å‡ºæ¥ã€‚grepå…¨ç§°æ˜¯Global Regular Expression Printï¼Œè¡¨ç¤ºå…¨å±€æ­£åˆ™è¡¨è¾¾å¼ç‰ˆæœ¬ï¼Œå®ƒçš„ä½¿ç”¨æƒé™æ˜¯æ‰€æœ‰ç”¨æˆ·ã€‚</p><p>&emsp;&emsp;grepçš„å·¥ä½œæ–¹å¼æ˜¯è¿™æ ·çš„ï¼Œå®ƒåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸­æœç´¢å­—ç¬¦ä¸²æ¨¡æ¿ã€‚å¦‚æœæ¨¡æ¿åŒ…æ‹¬ç©ºæ ¼ï¼Œåˆ™å¿…é¡»è¢«å¼•ç”¨ï¼Œæ¨¡æ¿åçš„æ‰€æœ‰å­—ç¬¦ä¸²è¢«çœ‹ä½œæ–‡ä»¶åã€‚æœç´¢çš„ç»“æœè¢«é€åˆ°æ ‡å‡†è¾“å‡ºï¼Œä¸å½±å“åŸæ–‡ä»¶å†…å®¹ã€‚</p><p>&emsp;&emsp;grepå¯ç”¨äºshellè„šæœ¬ï¼Œå› ä¸ºgrepé€šè¿‡è¿”å›ä¸€ä¸ªçŠ¶æ€å€¼æ¥è¯´æ˜æœç´¢çš„çŠ¶æ€ï¼Œå¦‚æœæ¨¡æ¿æœç´¢æˆåŠŸï¼Œåˆ™è¿”å›0ï¼Œå¦‚æœæœç´¢ä¸æˆåŠŸï¼Œåˆ™è¿”å›1ï¼Œå¦‚æœæœç´¢çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›2ã€‚æˆ‘ä»¬åˆ©ç”¨è¿™äº›è¿”å›å€¼å°±å¯è¿›è¡Œä¸€äº›è‡ªåŠ¨åŒ–çš„æ–‡æœ¬å¤„ç†å·¥ä½œã€‚</p><h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><pre class=" language-bash"><code class="language-bash">^  <span class="token comment" spellcheck="true">#é”šå®šè¡Œçš„å¼€å§‹ å¦‚ï¼š'^grep'åŒ¹é…æ‰€æœ‰ä»¥grepå¼€å¤´çš„è¡Œã€‚    </span>$  <span class="token comment" spellcheck="true">#é”šå®šè¡Œçš„ç»“æŸ å¦‚ï¼š'grep$'åŒ¹é…æ‰€æœ‰ä»¥grepç»“å°¾çš„è¡Œã€‚    </span><span class="token keyword">.</span>  <span class="token comment" spellcheck="true">#åŒ¹é…ä¸€ä¸ªéæ¢è¡Œç¬¦çš„å­—ç¬¦ å¦‚ï¼š'gr.p'åŒ¹é…gråæ¥ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚    </span>*  <span class="token comment" spellcheck="true">#åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ˆå‰å­—ç¬¦ å¦‚ï¼š'*grep'åŒ¹é…æ‰€æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼åç´§è·Ÿgrepçš„è¡Œã€‚    </span>.*   <span class="token comment" spellcheck="true">#ä¸€èµ·ç”¨ä»£è¡¨ä»»æ„å­—ç¬¦ã€‚   </span><span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true">#åŒ¹é…ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚'[Gg]rep'åŒ¹é…Grepå’Œgrepã€‚    </span><span class="token punctuation">[</span>^<span class="token punctuation">]</span>  <span class="token comment" spellcheck="true">#åŒ¹é…ä¸€ä¸ªä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚ï¼š'[^A-FH-Z]rep'åŒ¹é…ä¸åŒ…å«A-Rå’ŒT-Zçš„ä¸€ä¸ªå­—æ¯å¼€å¤´ï¼Œç´§è·Ÿrepçš„è¡Œã€‚    </span>\<span class="token punctuation">(</span><span class="token punctuation">..</span>\<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#æ ‡è®°åŒ¹é…å­—ç¬¦ï¼Œå¦‚'\(love\)'ï¼Œloveè¢«æ ‡è®°ä¸º1ã€‚    </span>\<span class="token operator">&lt;</span>      <span class="token comment" spellcheck="true">#é”šå®šå•è¯çš„å¼€å§‹ï¼Œå¦‚:'\&lt;grep'åŒ¹é…åŒ…å«ä»¥grepå¼€å¤´çš„å•è¯çš„è¡Œã€‚    </span>\<span class="token operator">></span>      <span class="token comment" spellcheck="true">#é”šå®šå•è¯çš„ç»“æŸï¼Œå¦‚'grep\>'åŒ¹é…åŒ…å«ä»¥grepç»“å°¾çš„å•è¯çš„è¡Œã€‚    </span>x\<span class="token punctuation">{</span>m\<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">#é‡å¤å­—ç¬¦xï¼Œmæ¬¡ï¼Œå¦‚ï¼š'0\{5\}'åŒ¹é…åŒ…å«5ä¸ªoçš„è¡Œã€‚    </span>x\<span class="token punctuation">{</span>m,\<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">#é‡å¤å­—ç¬¦x,è‡³å°‘mæ¬¡ï¼Œå¦‚ï¼š'o\{5,\}'åŒ¹é…è‡³å°‘æœ‰5ä¸ªoçš„è¡Œã€‚    </span>x\<span class="token punctuation">{</span>m,n\<span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">#é‡å¤å­—ç¬¦xï¼Œè‡³å°‘mæ¬¡ï¼Œä¸å¤šäºnæ¬¡ï¼Œå¦‚ï¼š'o\{5,10\}'åŒ¹é…5--10ä¸ªoçš„è¡Œã€‚   </span>\w    <span class="token comment" spellcheck="true">#åŒ¹é…æ–‡å­—å’Œæ•°å­—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯[A-Za-z0-9]ï¼Œå¦‚ï¼š'G\w*p'åŒ¹é…ä»¥Gåè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªæ–‡å­—æˆ–æ•°å­—å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚   </span>\W    <span class="token comment" spellcheck="true">#\wçš„åç½®å½¢å¼ï¼ŒåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéå•è¯å­—ç¬¦ï¼Œå¦‚ç‚¹å·å¥å·ç­‰ã€‚   </span>\b    <span class="token comment" spellcheck="true">#å•è¯é”å®šç¬¦ï¼Œå¦‚: '\bgrep\b'åªåŒ¹é…grepã€‚  </span></code></pre><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li><p>æ£€ç´¢æ–‡ä»¶ä¸­çš„å…³é”®ä¿¡æ¯<br><strong>grep pattern file</strong></p><pre class=" language-bash"><code class="language-bash">chgl16@chgl16-laptop:~/Blog/hexo-blog$ <span class="token function">grep</span> <span class="token string">"ta"</span> README.mdâ”œâ”€â”€ _data  â””â”€â”€ tags </code></pre><blockquote><p>è¿™é‡Œçš„â€taâ€è¡¨ç¤ºåŒ…å«â€taâ€çš„è¡Œï¼Œå¯ä»¥ä¸åŠ åŒå¼•å·ï¼Œä¹Ÿå¯ä»¥åŠ å•å¼•å·ï¼Œä¸»è¦æ˜¯ä¸ºäº†åŒºåˆ†ã€‚</p></blockquote></li><li><p>åšè¾“å‡ºè¿‡æ»¤ç®¡é“</p><pre class=" language-bash"><code class="language-bash">chgl16@chgl16-laptop:~/Blog/hexo-blog$ <span class="token function">netstat</span> -tnpl <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"80"</span><span class="token punctuation">(</span>Not all processes could be identified, non-owned process infowill not be shown, you would have to be root to see it all.<span class="token punctuation">)</span>tcp        0      0 127.0.0.1:1080          0.0.0.0:*               LISTEN      2809/python     </code></pre><p>æŠŠå‰é¢çš„ä¸€ä¸ªè¾“å‡ºåšâ€80â€è¿‡æ»¤</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grep </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿›ç¨‹ç›‘æ§å‘½ä»¤</title>
      <link href="/2019/05/16/linux/jin-cheng-jian-kong-ming-ling/"/>
      <url>/2019/05/16/linux/jin-cheng-jian-kong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ps"><a href="#1-ps" class="headerlink" title="1. ps"></a>1. ps</h2><p>æ˜¾ç¤ºçš„æ˜¯ä¸€ä¸ªå½“å‰è¿›ç¨‹çš„å¿«ç…§ï¼Œä¸æ˜¯å®æ—¶ç›‘å¬çš„ï¼Œé‚£ä¸ªè¦ç”¨top</p><pre class=" language-bash"><code class="language-bash">chgl16@chgl16-laptop:~$ <span class="token function">ps</span> -ef<span class="token comment" spellcheck="true"># ç”¨æˆ·     è¿›ç¨‹ID çˆ¶è¿›ç¨‹        ç»ˆç«¯ID   è¿›ç¨‹ä½¿ç”¨CPUçš„æ—¶é—´</span>UID        PID  PPID  C STIME TTY          TIME CMDroot         1     0  0 5æœˆ15 ?       00:00:30 /sbin/init splashroot         2     0  0 5æœˆ15 ?       00:00:00 <span class="token punctuation">[</span>kthreadd<span class="token punctuation">]</span>root         4     2  0 5æœˆ15 ?       00:00:00 <span class="token punctuation">[</span>kworker/0:0H<span class="token punctuation">]</span>root         6     2  0 5æœˆ15 ?       00:00:00 <span class="token punctuation">[</span>mm_percpu_wq<span class="token punctuation">]</span>root         7     2  0 5æœˆ15 ?       00:00:01 <span class="token punctuation">[</span>ksoftirqd/0<span class="token punctuation">]</span>root         8     2  0 5æœˆ15 ?       00:01:41 <span class="token punctuation">[</span>rcu_sched<span class="token punctuation">]</span>root         9     2  0 5æœˆ15 ?       00:00:00 <span class="token punctuation">[</span>rcu_bh<span class="token punctuation">]</span><span class="token punctuation">..</span><span class="token punctuation">..</span></code></pre><p>å¸¸ç”¨-efå‚æ•°ï¼Œ-eè¡¨ç¤ºeveryï¼Œç­‰ä»·-Aã€‚-fæ˜¯æ˜¾ç¤ºæ›´å¤šçš„å­—æ®µï¼Œæ¯”å¦‚UIDï¼ŒPPIDç­‰è¿™äº›éƒ½æ˜¯ä¸å¸¦å‚æ•°çš„psæ²¡æœ‰çš„ã€‚</p><h2 id="2-top"><a href="#2-top" class="headerlink" title="2. top"></a>2. top</h2><p>topå¯ä»¥å®æ—¶ç›‘æ§ï¼Œå¯¹åº”kill pidå³å¯</p><h2 id="3-netstat"><a href="#3-netstat" class="headerlink" title="3. netstat"></a>3. netstat</h2><p>å¸¸ç”¨ netstat -tpln; </p><ul><li>-tï¼š tcp</li><li>-p: æ˜¾ç¤ºPID</li><li>-l: æ˜¾ç¤ºç›‘å¬çš„æœåŠ¡sockets</li><li>-n: åºåˆ—åŒ–ï¼Œä¸è§£ææ˜¾ç¤ºä¸»æœºåï¼ˆå¤ªæ…¢äº†ï¼‰</li></ul><h2 id="4-lsof"><a href="#4-lsof" class="headerlink" title="4. lsof"></a>4. lsof</h2><p>lsof - list open files<br>ä¹Ÿå¯ä»¥çœ‹çœ‹è¿›ç¨‹ç«¯å£æƒ…å†µ</p><pre class=" language-bash"><code class="language-bash">chgl16@chgl16-laptop:~$ <span class="token function">lsof</span> -i:15672COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAMEchrome  2893 chgl16   90u  IPv4 582906      0t0  TCP localhost:58926-<span class="token operator">></span>localhost:15672 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ps </tag>
            
            <tag> top </tag>
            
            <tag> netstat </tag>
            
            <tag> lsof </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQæ¶æ„å’Œæ ¸å¿ƒæ¦‚å¿µ</title>
      <link href="/2019/05/15/rabbitmq/rabbitmq-jia-gou-he-he-xin-gai-nian/"/>
      <url>/2019/05/15/rabbitmq/rabbitmq-jia-gou-he-he-xin-gai-nian/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h2><p><img src="https://raw.githubusercontent.com/chgl16/chgl16.github.io/master/medias/images/RabbitMQ.png" alt="æ¶æ„"></p><h2 id="AMQPæ ¸å¿ƒæ¦‚å¿µ"><a href="#AMQPæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="AMQPæ ¸å¿ƒæ¦‚å¿µ"></a>AMQPæ ¸å¿ƒæ¦‚å¿µ</h2><ul><li>Server: åˆç§°Brokerï¼Œæ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå®ç°AMQPå®ä½“æœåŠ¡</li><li>Connection: è¿æ¥ï¼Œåº”ç”¨ç¨‹åºä¸Brokerçš„ç½‘ç»œè¿æ¥</li><li>Channel: ç½‘ç»œä¿¡é“ï¼Œå‡ ä¹æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åœ¨Channelä¸­è¿›è¡Œï¼ŒChannelæ˜¯<strong>è¿›è¡Œæ¶ˆæ¯è¯»å†™</strong>çš„é€šé“ã€‚å®¢æˆ·ç«¯å¯å»ºç«‹å¤šä¸ªChannelï¼Œæ¯ä¸ªChannelä»£è¡¨ä¸€ä¸ªä¼šè¯ä»»åŠ¡</li><li>Message: æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯å’Œåº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€çš„æ•°æ®ã€‚ç”±Propertieså’ŒBodyç»„æˆã€‚Propertieså¯ä»¥å¯¹æ¶ˆæ¯è¿›è¡Œä¿®é¥°ï¼Œæ¯”å¦‚ä¼˜å…ˆçº§ã€å»¶è¿Ÿç­‰é«˜çº§åŠŸèƒ½ï¼ŒBodyåˆ™å°±æ˜¯æ¶ˆæ¯å†…å®¹ã€‚</li><li>Virtual host: è™šæ‹Ÿä¸»æœºï¼Œç”¨äºè¿›è¡Œé€»è¾‘éš”ç¦»ï¼Œæœ€ä¸Šå±‚çš„æ¶ˆæ¯è·¯ç”±ã€‚ä¸€ä¸ªVirtual hosté‡Œé¢å¯ä»¥æœ‰è‹¥å¹²ä¸ªExchangeå’ŒQueueï¼ŒåŒä¸€ä¸ªVirtual hostå†…ä¸èƒ½æœ‰ç›¸åŒåå­—çš„Exchangeæˆ–Queue</li><li>Exchangeï¼š äº¤æ¢æœºï¼Œæ¥æ”¶æ¶ˆæ¯ï¼Œæ ¹æ®è·¯ç”±é”®ï¼ˆrouting key)è½¬å‘åˆ°ç›¸åº”ç»‘å®šçš„é˜Ÿåˆ—ï¼Œå¸¸ç”¨çš„æœ‰ç›´è¿ã€ä¸»é¢˜ã€å¹¿æ’­</li><li>Binding: Exchangeå’ŒQueueä¹‹é—´çš„è™šæ‹Ÿè¿æ¥ï¼ŒBindingä¸­åŒ…å«Routing key</li><li>Routing key: ä¸€ä¸ªè·¯ç”±è§„åˆ™ï¼Œæ¯”å¦‚å…³é”®è¯</li><li>Queueï¼š æ¶ˆæ¯é˜Ÿåˆ—</li><li>Publisher: ç”Ÿäº§è€…ï¼Œé€šè¿‡Channelå‘é€æ¶ˆæ¯åˆ°æœåŠ¡ç«¯çš„Exchangeï¼Œå³æŒ‡å®šäº†Exchangeå’ŒRouting key</li><li>Cunsumer: æ¶ˆè´¹è€…ï¼Œç›‘å¬æŸä¸ªå¯¹è±¡ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> RabbitMQ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQä»‹ç»&amp;å®‰è£…</title>
      <link href="/2019/05/15/rabbitmq/rabbitmq-an-zhuang/"/>
      <url>/2019/05/15/rabbitmq/rabbitmq-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><img src="https://blog.huitu.club/images/201809/exchanges-topic-fanout-direct.png" alt="RabbitMQ"></p><ul><li>RabbitMQæ˜¯ä¸€ç§åŸºäºAMQPï¼ˆé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</li><li>åˆ†ä¸ºæ¶ˆæ¯ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…</li><li>æœåŠ¡ç«¯æ˜¯ä¸€ä¸ªbrokerï¼Œé‡Œé¢å°±æ˜¯ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œè™šæ‹Ÿä¸»æœºé‡Œé¢æœ‰ä¸‰ç§äº¤æ¢æœºå’Œç»‘å®šçš„é˜Ÿåˆ—</li><li>ç›´è¿ã€ä¸»é¢˜ã€å¹¿æ’­ä¸‰ç§äº¤æ¢æœºï¼Œæ ¹æ®å…³é”®å­—å•è¯åŒ¹é…</li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®‰è£…æ¯”è¾ƒç¹çï¼Œå› ä¸ºRabbitMQæ˜¯åŸºäºErlangè¯­è¨€ç¼–å†™çš„ï¼Œéœ€è¦å®‰è£…é‚£ä¸ªè¯­è¨€çš„ç¯å¢ƒï¼Œç±»ä¼¼å®‰è£…Tomcatéœ€è¦å®‰è£…JDKã€‚  </p><p>å¯ä»¥å»å®˜ç½‘ä¸‹è½½æœ€æ–°åŒ…æˆ–è€…æºç å®‰è£…ï¼Œä»¥ä¸‹ç›´æ¥ä½¿ç”¨shellè‡ªå¸¦çš„æºå®‰è£…ï¼Œä¼°è®¡ä¼šæœ‰äº›è€ç‰ˆæœ¬ï¼ŒåæœŸé…ç½®éº»çƒ¦ç‚¹ã€‚</p><p><br></p><ol><li><p>å®‰è£…Erlangè¯­è¨€ç¯å¢ƒ</p><pre class=" language-shell"><code class="language-shell">sudo apt-get install erlang-nox</code></pre></li><li><p>å®‰è£…RabbitMQ</p><pre class=" language-shell"><code class="language-shell">sudo apt updatesudo apt install rabbitmq-server</code></pre></li></ol><h2 id="å¯åŠ¨ä½¿ç”¨"><a href="#å¯åŠ¨ä½¿ç”¨" class="headerlink" title="å¯åŠ¨ä½¿ç”¨"></a>å¯åŠ¨ä½¿ç”¨</h2><pre class=" language-shell"><code class="language-shell">sudo rabbitmq-server start</code></pre><p>ä½†æ˜¯åˆšåˆšå®‰è£…å®Œå·²ç»å¯åŠ¨äº†ï¼Œä¼šæŠ¥é”™</p><pre class=" language-shell"><code class="language-shell">ERROR: node with name "rabbit" already running on "chgl16-laptop"</code></pre><p>ä½¿ç”¨restartä¹Ÿä¸€æ ·æŠ¥è¿™ä¸ªé”™è¯¯ã€‚è§£å†³æ–¹æ³•ä½¿ç”¨topæŸ¥çœ‹åˆ°rabbitmqè¿›ç¨‹æŠŠå®ƒ<em>sudo kill pid</em>ï¼Œå†å¯åŠ¨å³å¯</p><p>æˆåŠŸå¯åŠ¨åå¦‚ä¸‹</p><pre class=" language-bash"><code class="language-bash">chgl16@chgl16-laptop:~$ <span class="token function">sudo</span> rabbitmq-server restart  RabbitMQ 3.6.10. Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> 2007-2017 Pivotal Software, Inc.  <span class="token comment" spellcheck="true">##  ##   Licensed under the MPL.  See http://www.rabbitmq.com/</span>  <span class="token comment" spellcheck="true">##  ##</span>  <span class="token comment" spellcheck="true">##########  Logs: /var/log/rabbitmq/rabbit@chgl16-laptop.log</span>  <span class="token comment" spellcheck="true">######  ##        /var/log/rabbitmq/rabbit@chgl16-laptop-sasl.log</span>  <span class="token comment" spellcheck="true">##########</span>    Starting broker<span class="token punctuation">..</span>. completed with 0 plugins.</code></pre><p>æ‰“å¼€é»˜è®¤<em>localhost:15672</em> æ‰“ä¸å¼€ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢å®Œæˆäº†0ä¸ªæ’ä»¶ï¼Œå°±æ˜¯å› ä¸ºæ’ä»¶æ²¡æœ‰é…ç½®åŠ è½½é€ æˆçš„ã€‚</p><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åŠ è½½å‘½ä»¤ï¼Œè®°å¾—ä½¿ç”¨æƒé™ï¼Œä¸ç„¶æŠ¥é”™</p><pre class=" language-shell"><code class="language-shell">sudo rabbitmq-plugins enable rabbitmq_management</code></pre><blockquote><p>å‘½ä»¤å¯ä»¥æ‰“å‡ºå‰é¢ä¸€éƒ¨åˆ†ç„¶ååŒå‡»tabé”®ï¼Œä¼šæ˜¾ç¤ºå¯ç”¨çš„åŒ¹é…å‘½ä»¤ã€‚</p></blockquote><p>  é‡å¯æˆåŠŸ  </p><p><img src="http://openskill.cn/uploads/article/20160330/53bd1da79ef61e9cfa95fd130c0d73ac.png" alt="ç™»å½•"></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä½¿ç”¨åŒtabè¡¥å…¨rabbitå¯ç”¨çœ‹åˆ°å¦‚ä¸‹å‘½ä»¤</p><pre class=" language-bash"><code class="language-bash">rabbitmqadmin     rabbitmqctl       rabbitmq-plugins  rabbitmq-server</code></pre><p>ä¸€å¼€å§‹æ˜¯æ²¡æœ‰è´¦å·çš„ï¼Œéœ€è¦ä½¿ç”¨rabbitmqctlé…ç½®</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ç”¨æˆ·åä¸ºroot, å¯†ç ä¸ºmima</span><span class="token function">sudo</span> rabbitmqctl add_user root mima<span class="token comment" spellcheck="true"># è®¾ç½®rootä¸ºç®¡ç†å‘˜</span><span class="token function">sudo</span> rabbitmqctl set_user_tags root administrator<span class="token comment" spellcheck="true"># èµ‹äºˆæ“ä½œè™šæ‹Ÿæœºå†…å®¹çš„æƒé™</span><span class="token function">sudo</span> rabbitmqctl set_permissions -p / root <span class="token string">'.*'</span> <span class="token string">'.*'</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> RabbitMQ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
            <tag> å®‰è£… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPå¸¸è§çŠ¶æ€ç </title>
      <link href="/2019/05/12/http/http-chang-jian-zhuang-tai-ma/"/>
      <url>/2019/05/12/http/http-chang-jian-zhuang-tai-ma/</url>
      
        <content type="html"><![CDATA[<h2 id="304"><a href="#304" class="headerlink" title="304"></a>304</h2><p>è¿™ä¸ªæ˜¯å› ä¸ºç¼“å­˜é—®é¢˜ï¼Œå¯¹äºé™æ€èµ„æºï¼Œæµè§ˆå™¨æ˜¯æœ‰ç¼“å­˜çš„ã€‚å¦‚æœè¯·æ±‚çš„èµ„æºæ²¡æœ‰æ›´æ”¹ã€‚åˆ™ä¸ä¼šå»æœåŠ¡å™¨åŠ è½½ã€‚æœ¬åœ°ç¼“å­˜æ‹¿å‡ºæ¥å³å¯ã€‚  </p><p>å¦‚æœç¼“å­˜ä¸­å‘ç°äº†è¿™äº›èµ„æºï¼Œæµè§ˆå™¨ä¼šç»™è¯·æ±‚æ·»åŠ ä¸Š<br>If Modified Sinceå­—æ®µã€‚ç„¶åå†å‘ç»™æœåŠ¡å™¨ç«¯ã€‚æœåŠ¡ç«¯åªè¦åˆ¤æ–­è¿™ä¸ªæ—¶é—´å’Œå½“å‰è¯·æ±‚çš„æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å°±å¯ä»¥ç¡®å®šæ˜¯è¿”å› 304 è¿˜æ˜¯ 200 ã€‚</p><p>å¸¸è§æƒ…å†µ</p><ol><li>æ‰“å¼€æ–°é¡µé¢ 200</li><li>F5åˆ·æ–° 304</li><li>Ctrl + F5 åˆ é™¤ç¼“å­˜åˆ·æ–° 200</li></ol><h2 id="505"><a href="#505" class="headerlink" title="505"></a>505</h2><p>5xxæ˜¯æœåŠ¡å™¨ç«¯é”™è¯¯ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºæœåŠ¡å™¨ç«¯æ— æ³•è¯†åˆ«è¯·æ±‚çš„HTTPç‰ˆæœ¬é€ æˆçš„ï¼Œä¸€èˆ¬æˆ‘ä»¬çš„æ˜¯HTTP 1.1ã€‚<br>å…¶å®å¤§éƒ¨åˆ†åŸå› éƒ½æ˜¯HTTPè¯·æ±‚æ ¼å¼ä¸æ­£ç¡®é€ æˆçš„ã€‚  </p><p>æ¯”å¦‚ï¼š</p><pre class=" language-xml"><code class="language-xml">GET  /search/keyword/http HTTP/1.1è¯·æ±‚å¤´éƒ¨</code></pre><p>GETå’Œurlå¤šäº†ä¸ªç©ºæ ¼ï¼Œå°±ä¼šæŠ¥é”™505ã€‚è¦æ±‚å¾ˆä¸¥æ ¼ã€‚</p><p>è¡¥å……:</p><blockquote><p>HTTP/1.0 å·²ç»è¢«åºŸå¼ƒï¼Œä¸»è¦æ˜¯å› ä¸ºä¸æ”¯æŒé•¿è¿æ¥ï¼Œæ¯æ¬¡å‘é€éƒ½è¦é‡æ–°TCPè¿æ¥å¾ˆè€—è´¹èµ„æº<br>HTTP/1.1 å¼•å…¥é•¿è¿æ¥ï¼Œç°åœ¨ä¸€ç›´åœ¨ç”¨<br><a href="https://juejin.im/post/5b88a4f56fb9a01a0b31a67e" target="_blank" rel="noopener">HTTP/2</a> æ–°ä¸€ä»£çš„HTTPåè®®ï¼Œå¥½å¤„å¾ˆå¤šï¼Œæ¯”å¦‚äºŒè¿›åˆ¶åˆ†å¸§æ•°ï¼Œå¤šè·¯å¤ç”¨ï¼Œé¦–éƒ¨å‹ç¼©ç­‰ã€‚<br>HTTPS HTTP + SSL</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 304 </tag>
            
            <tag> 505 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEAä¸€äº›å¿«æ·æŠ€å·§</title>
      <link href="/2019/05/12/kai-fa-gong-ju/idea-kai-fa-yi-xie-kuai-jie-jian-ji-qiao/"/>
      <url>/2019/05/12/kai-fa-gong-ju/idea-kai-fa-yi-xie-kuai-jie-jian-ji-qiao/</url>
      
        <content type="html"><![CDATA[<h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><p><strong>å†…å®¹æ“ä½œå¿«æ·é”®</strong></p><ul><li>å¤åˆ¶å½“å‰è¡Œ Crtl + D</li><li>åˆ é™¤å½“å‰è¡Œ Crtl + X æˆ–è€… Crtl + Y</li><li>æœ¬æ–‡ä»¶å†…å®¹æœç´¢ Crtl + F</li><li>æœ¬æ–‡ä»¶å†…å®¹æœç´¢æ›¿æ¢ Crtl + R</li><li><p>é¡¹ç›®å…¨å±€æ–‡ä»¶å†…å®¹æœç´¢ Crtl + Shift + F</p></li><li><p>å†…å®¹å³å¯¹é½ Tab</p></li><li>å†…å®¹å·¦å¯¹é½ Shift + Tab</li></ul><hr><p><strong>çª—å£å¿«æ·é”®</strong></p><ul><li>æ‰“å¼€/éšè—å·¦ä¾§é¡¹ç›®ç›®å½•ç»“æœ Alt + 1  (å°é”®ç›˜æ•°å­—æ— æ•ˆ)</li><li>è¿è¡Œçª—å£ Alt + 4</li><li>å‘½ä»¤è¡Œç»ˆç«¯ Alt + F12</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoä½¿ç”¨æœ¬åœ°å›¾ç‰‡</title>
      <link href="/2019/05/04/za-ji/hexo-shi-yong-ben-di-tu-pian/"/>
      <url>/2019/05/04/za-ji/hexo-shi-yong-ben-di-tu-pian/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å…ˆä¿å­˜è‡ªå·±æœ¬åœ°ä½¿ç”¨çš„å›¾ç‰‡ï¼Œå‘ç°æ”¾åˆ°GitHubä»“åº“çš„æ˜¯publicæ–‡ä»¶å¤¹ï¼Œæˆ‘é‚£æ—¶å€™è¯•äº†åœ¨æœ¬åœ°publicä¸‹ç›´æ¥åˆ›å»ºä¸€ä¸ªimagesæ–‡ä»¶å¤¹æ”¾å›¾ç‰‡ï¼ŒURLä½¿ç”¨ä»“åº“å›¾ç‰‡åœ°å€ã€‚æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯<em>hexo clean</em>ååŒ–ä¸ºä¹Œæœ‰ã€‚<br><br></p><p>å› æ­¤æˆ‘å°è¯•åœ¨æœ¬åœ°çš„themes/å½“å‰ä¸»é¢˜ä¸‹/source/medias/åˆ›å»ºimagesæ–‡ä»¶å¤¹ï¼Œå› ä¸ºå‘ç°ä¸»é¢˜çš„å›¾ç‰‡ä¸ä¼šè¢«åˆ æ‰ï¼Œè€Œä¸”æ˜¯åœ¨é‡Œé¢å¼•ç”¨ã€‚ä¼šè¢«è§£æåˆ°publicï¼Œæ¢å…¶ä»–ä¸»é¢˜ï¼Œåªéœ€è¦æŠŠå…¶æ‹·è´<br><img src="/2019/05/04/za-ji/hexo-shi-yong-ben-di-tu-pian/medias/images/tree.png" alt="tree"><br><br></p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p>themes/ä¸»é¢˜/sourceä¸‹çš„ç›®å½•ä¼šæŠ•å½±åˆ°GitHubä»“åº“çš„æ ¹ç›®å½•ï¼Œå› æ­¤mediaså°±æ˜¯ä¸€ä¸ªæ›´ç›®å½•ï¼Œè€Œæˆ‘ä»¬æ——ä¸‹çš„imagesç›¸å¯¹è·¯å¾„å¼•ç”¨å°±ç®€å•äº†</p><pre class=" language-bash"><code class="language-bash">url: <span class="token string">'/medias/images/tree.png'</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒæ­¥å¼‚æ­¥é˜»å¡éé˜»å¡</title>
      <link href="/2019/05/01/za-ji/tong-bu-he-yi-bu/"/>
      <url>/2019/05/01/za-ji/tong-bu-he-yi-bu/</url>
      
        <content type="html"><![CDATA[<h2 id="åŒæ­¥"><a href="#åŒæ­¥" class="headerlink" title="åŒæ­¥"></a>åŒæ­¥</h2><p>ç¨‹åºæ‰€æœ‰æ“ä½œç»“æŸï¼Œæ‰è¿”å›ç»™ç”¨æˆ·ã€‚ç”¨æˆ·éœ€è¦ä¸€ç›´ç­‰å¾…ã€‚è€Œä¸”ä¸èƒ½åšå…¶ä»–äº‹æƒ…ã€‚ä½“éªŒå¾ˆå·®ã€‚ä½†æ˜¯å¯ä»¥ä¿è¯æ‰§è¡Œçš„é¡ºåºã€‚</p><p>æ¯”å¦‚é“¶è¡Œçš„è½¬è´¦ç³»ç»Ÿï¼Œéœ€è¦ä¸€ç›´åœ¨é‚£ä¸ªç•Œé¢ç­‰å¾…æˆåŠŸã€‚</p><h2 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h2><p>ä¸¤è€…åŒºåˆ«ä¸»è¦æ˜¯ç”¨æˆ·ä¸éœ€è¦ç­‰å¾…ï¼Œå¼‚æ­¥ç¨‹åºç»™ç”¨æˆ·ä¸€ä¸ªåé¦ˆè¡¨ç¤ºè¯·æ±‚å·²ç»å¼€å§‹å¤„ç†å³å¯ã€‚ç”¨æˆ·å¯ä»¥å»å¹²å…¶ä»–çš„äº‹æƒ…ã€‚æœ€åå‡ºç»“æœå†å‘ŠçŸ¥ç”¨æˆ·å³å¯ã€‚å¯ä»¥å¤§å¤§æé«˜ç³»ç»Ÿçš„ååé‡ã€‚</p><p>æ¯”å¦‚å¸¸ç”¨çš„MQï¼Œå…ˆå°†è¯·æ±‚æ•°æ®æ”¾åˆ°é˜Ÿåˆ—ã€‚å“åº”äº†ç”¨æˆ·è¯·æ±‚åæ…¢æ…¢å¤„ç†ï¼Œä¹Ÿæœ‰ç¼“å­˜å‰Šå³°çš„æ•ˆæœã€‚  </p><p>åˆæ¯”å¦‚å¸¸è§Ajaxäº¤äº’ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥çš„ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 1</span>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    type<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>    url<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    contentType<span class="token punctuation">:</span> <span class="token string">"application/json; charset=utf-8"</span><span class="token punctuation">,</span>    dataType<span class="token punctuation">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>    success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¤„ç†</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    error<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2</span></code></pre><p>è¿™async: trueæ˜¯é»˜è®¤çš„ï¼Œå³å¼‚æ­¥ã€‚å½“ä»1åˆ°Ajaxæ—¶ï¼Œç¨‹åºå¯ä»¥ç»§ç»­2æ“ä½œã€‚è€Œä¸ç”¨é˜»å¡ç­‰å¾…è¿›å…¥successæˆ–è€…erroræ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªå›è°ƒæ–¹æ³•ä¼šåœ¨ç»“æœè¿”å›åå†è°ƒç”¨ã€‚  </p><h2 id="é˜»å¡-amp-éé˜»å¡"><a href="#é˜»å¡-amp-éé˜»å¡" class="headerlink" title="é˜»å¡ &amp; éé˜»å¡"></a>é˜»å¡ &amp; éé˜»å¡</h2><p>å¾ˆå®¹æ˜“å’ŒåŒæ­¥å¼‚æ­¥æ··æ·†ï¼Œé˜»å¡å’Œéé˜»å¡ä¸»è¦å¯¹åŒæ­¥è€Œè¨€çš„ã€‚éé˜»å¡å°±æ˜¯å»è¯·æ±‚æ•°æ®æœåŠ¡æ—¶ï¼Œå¦‚æœè¿˜æ²¡å‡†å¤‡å¥½æœªæˆåŠŸï¼Œä¹Ÿä¼š<strong>ç«‹å³è¿”å›ç»“æœ</strong>ã€‚é‡è¦çš„æ˜¯é©¬ä¸Šæœ‰ç»“æœï¼Œå“ªæ€•æ˜¯æœªå®Œæˆçš„ç»“æœã€‚è€Œéé˜»å¡æ„Ÿè§‰å°±æ˜¯æ²¡æœ‰è¿›åº¦æ¡é‚£ç§ï¼Œä¸€ç›´ç­‰å¾…æœŸé—´æ²¡æœ‰ä»»ä½•ç»“æœè¯´æ˜ã€‚</p><p>æ¯”å¦‚AjaxåŒæ­¥æ—¶ï¼ŒæœåŠ¡å™¨è¿˜æ²¡æœ‰å¤„ç†å®Œã€‚é‚£ä¹ˆè¯·æ±‚ä¸€æ¬¡æœªæœå°±è¿”å›ã€‚è¿‡æ®µæ—¶é—´å†å»è¯·æ±‚ã€‚  </p><p>æ¯”å¦‚ç…®å¼€æ°´çš„ä¾‹å­ã€‚</p><ol><li>ä¸€ç›´åœ¨é‚£é‡Œç­‰åˆ°ç…®å¼€æ‰èµ°å°±æ˜¯åŒæ­¥é˜»å¡BIOã€‚  </li><li>è€Œå‘ç°æ²¡ç…®å¼€èµ°å¼€ä¸€æ®µæ—¶é—´ï¼ˆè¿”å›æœªç…®å¼€çš„ç»“æœï¼‰ï¼Œè¿‡æ®µæ—¶é—´å†å»çœ‹ã€‚å³åŒæ­¥éé˜»å¡NIOã€‚</li><li><p>å¦‚æœç»™ç…®æ°´å™¨åŠ ä¸ªç…®å¼€è‡ªåŠ¨æé†’åŠŸèƒ½ã€‚å°±ç­‰äºæŠŠç…®æ°´è¿™ä¸ªä»»åŠ¡æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—é‡Œå¤„ç†ã€‚ç»“æŸä¼šè‡ªåŠ¨å‘ŠçŸ¥ç”¨æˆ·ï¼ˆç…®å¼€æç¤ºéŸ³ä¹‹ç±»çš„ï¼‰ã€‚ç”¨æˆ·åªéœ€è¦æ”¾æ°´å»ç…®å°±å¯ä»¥å»å¹²å…¶ä»–äº‹æƒ…ã€‚è¿™å°±æ˜¯å¼‚æ­¥éé˜»å¡AIOã€‚</p></li><li><p>è‡³äºå¼‚æ­¥é˜»å¡ï¼Œé‚£åŸºæœ¬å¤ªå‚»äº†ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŒæ­¥å¼‚æ­¥ </tag>
            
            <tag> é˜»å¡éé˜»å¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>internæ–¹æ³•åŠå­—ç¬¦ä¸²æ‹¼æ¥</title>
      <link href="/2019/04/27/java/intern-fang-fa-ji-zi-fu-chuan-pin-jie/"/>
      <url>/2019/04/27/java/intern-fang-fa-ji-zi-fu-chuan-pin-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="1-intern-æ–¹æ³•"><a href="#1-intern-æ–¹æ³•" class="headerlink" title="1. intern()æ–¹æ³•"></a>1. intern()æ–¹æ³•</h2><blockquote><p>Returns a canonical representation for the string object.<br>A pool of strings, initially empty, is maintained privately by the class String. </p></blockquote><blockquote><p>When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals(Object) method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned. </p></blockquote><blockquote><p>It follows that for any two strings s and t, s.intern() == t.intern() is true if and only if s.equals(t) is true. </p></blockquote><blockquote><p>All literal strings and string-valued constant expressions are interned. String literals are defined in section 3.10.5 of the The Javaâ„¢ Language Specification.  </p></blockquote><blockquote><p>Returns:a string that has the same contents as this string, but is guaranteed to be from a pool of unique strings.    </p></blockquote><p>è¿™æ˜¯æ–¹æ³•åŸæ–‡è§£æï¼Œè¿™æ˜¯ä¸ªnativeæœ¬åœ°æ–¹æ³•ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">native</span> String <span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥è¿”å›è°ƒç”¨å¯¹è±¡æˆ–è€…å¼•ç”¨åœ¨å¸¸é‡æ± ä¸­çš„åœ°å€ã€‚åœ¨è¾“å‡ºä¸Šæ²¡æœ‰ç‰¹åˆ«ï¼Œä¸»è¦æ˜¯åœ°å€é—®é¢˜ã€‚æ¯”å¦‚ï¼š</p><pre class=" language-java"><code class="language-java">String str1 <span class="token operator">=</span> <span class="token string">"ab"</span><span class="token punctuation">;</span>str1<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// "ab"</span></code></pre><ol><li>è¿™ç§æ˜¯â€abâ€å·²ç»åœ¨å¸¸é‡æ± æœ‰äº†ï¼Œæ‰€ä»¥è°ƒç”¨internæ˜¯ç›´æ¥è¿”å›è¿™ä¸ªåœ°å€çš„ï¼Œstr1è¿™ä¸ªå˜é‡æœ¬æ¥å°±æ˜¯æŒ‡å‘å¸¸é‡æ± â€abâ€çš„åœ°å€çš„ã€‚</li></ol><pre class=" language-java"><code class="language-java">String str2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"cd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>str2<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// "cd"</span></code></pre><ol start="2"><li>è¿™ä¸ªå¦‚æœå¸¸é‡æ± æ²¡æœ‰â€cdâ€ä¼šåœ¨å¸¸é‡æ± åˆ›å»ºï¼Œç„¶åå†å †åŒºåˆ›å»ºï¼ŒæŒ‡å‘å¸¸é‡æ± ï¼Œä½œä¸ºå¼•ç”¨str2æ˜¯æŒ‡å‘å †åŒºçš„ï¼Œstr2.internæ˜¯æŒ‡å‘å¸¸é‡æ± çš„ã€‚</li></ol><h2 id="2-å­—ç¬¦ä¸²æ‹¼æ¥é—®é¢˜"><a href="#2-å­—ç¬¦ä¸²æ‹¼æ¥é—®é¢˜" class="headerlink" title="2. å­—ç¬¦ä¸²æ‹¼æ¥é—®é¢˜"></a>2. å­—ç¬¦ä¸²æ‹¼æ¥é—®é¢˜</h2><pre class=" language-java"><code class="language-java">String str<span class="token operator">=</span><span class="token string">"ab"</span><span class="token punctuation">;</span>String str1 <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">;</span>  String str2 <span class="token operator">=</span> <span class="token string">"b"</span><span class="token punctuation">;</span>  String combo1 <span class="token operator">=</span> <span class="token string">"a"</span> <span class="token operator">+</span> <span class="token string">"b"</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ç¬¬ä¸€ç§æƒ…å†µ</span>String combo2 <span class="token operator">=</span> str1 <span class="token operator">+</span> str2<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// ç¬¬äºŒç§æƒ…å†µ</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str <span class="token operator">==</span> combo1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// true</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str <span class="token operator">==</span> combo2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// false</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>combo1 <span class="token operator">==</span> combo2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// false</span></code></pre><p>è¿™ä¸ªæ‹¼æ¥ä¸åŒæ˜¯å› ä¸ºå¦‚æœæ˜¯å˜é‡çš„æ‹¼æ¥ï¼ˆç¬¬äºŒç§æƒ…å†µï¼‰æ˜¯ä½¿ç”¨StringBufferï¼ˆæˆ–è€…StringBuilderï¼‰å®ç°çš„ï¼Œæœ¬åœ°æœ‰åˆ›å»ºå¯¹è±¡ï¼Œè¿”å›çš„æ˜¯å †åŒºåœ°å€ã€‚<br>è€Œå¸¸é‡æ‹¼æ¥æ˜¯ç›´æ¥åœ¨å¸¸é‡æ± åˆ›å»ºçš„ï¼Œåœ°å€æ˜¯å¸¸é‡æ± ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> intern() </tag>
            
            <tag> str1 + str2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Objectå¯¹è±¡æ–¹æ³•</title>
      <link href="/2019/04/24/java/object-dui-xiang-fang-fa/"/>
      <url>/2019/04/24/java/object-dui-xiang-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="Objectå¯¹è±¡æ–¹æ³•"><a href="#Objectå¯¹è±¡æ–¹æ³•" class="headerlink" title="Objectå¯¹è±¡æ–¹æ³•"></a>Objectå¯¹è±¡æ–¹æ³•</h1><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">native</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">)</span><span class="token keyword">protected</span> <span class="token keyword">native</span> Object <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> CloneNotSupportedException<span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token keyword">int</span> nanos<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span> <span class="token punctuation">}</span></code></pre><p>ä¸€å…±11ä¸ªï¼Œ3ä¸ªé‡è½½çš„waitæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥è¯´æ˜¯9ä¸ª</p><ol><li><p>è°¨è®°å­ç±»çš„equals()æ–¹æ³•ä¹Ÿæ˜¯Objectå‚æ•°ï¼Œbooleanè¿”å›å€¼ï¼ŒStringç±»é‡å†™çš„ä¹Ÿæ˜¯ã€‚ä»¥ä¸‹æ˜¯Stringé‡å†™equalsçš„æºç </p><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span>Object anObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> anObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>anObject <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         String anotherString <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span>anObject<span class="token punctuation">;</span>         <span class="token keyword">int</span> n <span class="token operator">=</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> anotherString<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>             <span class="token keyword">char</span> v1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>             <span class="token keyword">char</span> v2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> anotherString<span class="token punctuation">.</span>value<span class="token punctuation">;</span>             <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>             <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token operator">--</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                 <span class="token keyword">if</span> <span class="token punctuation">(</span>v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                     <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                 i<span class="token operator">++</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>             <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>     <span class="token punctuation">}</span>     <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>clone()æ–¹æ³•è¿™é‡Œå¯ä»¥é‡å†™ï¼Œä¸ç„¶åªæ˜¯æµ…æ‹·è´ï¼Œå› ä¸ºæ¶‰åŠåˆ°å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚</p></li><li><p>hashCode()ï¼šåœ¨Objectç±»é‡Œé¢æ˜¯nativeä¿®é¥°çš„æ–¹æ³•ï¼Œå°±æ²¡æ³•çœ‹äº†ï¼Œå¯ä»¥çœ‹çœ‹Stringå¯¹å…¶çš„é‡å†™ï¼Œå¾ˆç®€å•çš„å¯¹å­—ç¬¦è½¬ä¸ºASCIIç åŠ ä¹˜ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">int</span> h <span class="token operator">=</span> hash<span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">char</span> val<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            h <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> h <span class="token operator">+</span> val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>      hash <span class="token operator">=</span> h<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">return</span> h<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li><li>finalize(): æ˜¯ä¸€ä¸ªå»ºè®®GCçš„æ–¹æ³•</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Object </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CASæœºåˆ¶åˆè¯†</title>
      <link href="/2019/04/23/duo-xian-cheng-bing-fa-bian-cheng/cas-chu-shi/"/>
      <url>/2019/04/23/duo-xian-cheng-bing-fa-bian-cheng/cas-chu-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æå‡º"><a href="#é—®é¢˜æå‡º" class="headerlink" title="é—®é¢˜æå‡º"></a>é—®é¢˜æå‡º</h1><p>å¯¹äºcount++çš„å¤šçº¿ç¨‹é—®é¢˜ï¼Œä¸‰æ­¥éœ€è¦ä¿è¯åŸå­æ€§ï¼Œvolatileå…³é”®å­—åšä¸åˆ°ï¼Œsynchronizedæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯synchronizedæ˜¯æ‚²è§‚é”ï¼Œä»¥æœ€åçš„åŠ é”åšä¿è¯ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œé˜»å¡çš„èŠ±é”€å¾ˆå¤§ï¼Œè™½ç„¶åæœŸjdkå¯¹å…¶åšäº†ä¼˜åŒ–ã€‚ä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€ç§æ›´å¥½çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å°±æ˜¯CASï¼Œä¸€ç§ä¹è§‚é”æœºåˆ¶ã€‚</p><h1 id="CAS"><a href="#CAS" class="headerlink" title="CAS"></a>CAS</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CAS </tag>
            
            <tag> ä¹è§‚é”&amp;æ‚²è§‚é” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</title>
      <link href="/2019/04/21/jvm/lei-jia-zai-guo-cheng/"/>
      <url>/2019/04/21/jvm/lei-jia-zai-guo-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="ç±»åŠ è½½è¿‡ç¨‹"><a href="#ç±»åŠ è½½è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½è¿‡ç¨‹"></a>ç±»åŠ è½½è¿‡ç¨‹</h1><p>ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œåˆ°å¸è½½å‡ºå†…å­˜ä¸ºæ­¢ï¼Œå®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šåŠ è½½ï¼ˆLoadingï¼‰ã€éªŒè¯ï¼ˆVerificationï¼‰ã€å‡†å¤‡(Preparation)ã€è§£æ(Resolution)ã€åˆå§‹åŒ–(Initialization)ã€ä½¿ç”¨(Using)å’Œå¸è½½(Unloading)7ä¸ªé˜¶æ®µã€‚å…¶ä¸­å‡†å¤‡ã€éªŒè¯ã€è§£æ3ä¸ªéƒ¨åˆ†ç»Ÿç§°ä¸ºè¿æ¥ï¼ˆLinkingï¼‰ã€‚å¦‚å›¾æ‰€ç¤ºã€‚<br><img src="https://img-blog.csdn.net/20160308184325593" alt></p><p>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€åˆå§‹åŒ–å’Œå¸è½½è¿™5ä¸ªé˜¶æ®µçš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œç±»çš„åŠ è½½è¿‡ç¨‹å¿…é¡»æŒ‰ç…§è¿™ç§é¡ºåºæŒ‰éƒ¨å°±ç­åœ°å¼€å§‹ï¼Œè€Œè§£æé˜¶æ®µåˆ™ä¸ä¸€å®šï¼šå®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åå†å¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒJavaè¯­è¨€çš„è¿è¡Œæ—¶ç»‘å®šï¼ˆä¹Ÿç§°ä¸ºåŠ¨æ€ç»‘å®šæˆ–æ™šæœŸç»‘å®šï¼‰ã€‚ä»¥ä¸‹é™ˆè¿°çš„å†…å®¹éƒ½å·²HotSpotä¸ºåŸºå‡†ã€‚</p><h2 id="1-åŠ è½½"><a href="#1-åŠ è½½" class="headerlink" title="1. åŠ è½½"></a>1. åŠ è½½</h2><p>åœ¨åŠ è½½é˜¶æ®µï¼ˆå¯ä»¥å‚è€ƒjava.lang.ClassLoaderçš„loadClass()æ–¹æ³•ï¼‰ï¼Œè™šæ‹Ÿæœºéœ€è¦å®Œæˆä»¥ä¸‹3ä»¶äº‹æƒ…ï¼š</p><ol><li>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼ˆå¹¶æ²¡æœ‰æŒ‡æ˜è¦ä»ä¸€ä¸ªClassæ–‡ä»¶ä¸­è·å–ï¼Œå¯ä»¥ä»å…¶ä»–æ¸ é“ï¼Œè­¬å¦‚ï¼šç½‘ç»œã€åŠ¨æ€ç”Ÿæˆã€æ•°æ®åº“ç­‰ï¼‰ï¼›</li><li>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼›</li><li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ï¼›(å¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨åŒäº²å§”æ´¾æœºåˆ¶åŠ è½½) </li></ol><p>åŠ è½½é˜¶æ®µå’Œè¿æ¥é˜¶æ®µï¼ˆLinkingï¼‰çš„éƒ¨åˆ†å†…å®¹ï¼ˆå¦‚ä¸€éƒ¨åˆ†å­—èŠ‚ç æ–‡ä»¶æ ¼å¼éªŒè¯åŠ¨ä½œï¼‰æ˜¯äº¤å‰è¿›è¡Œçš„ï¼ŒåŠ è½½é˜¶æ®µå°šæœªå®Œæˆï¼Œè¿æ¥é˜¶æ®µå¯èƒ½å·²ç»å¼€å§‹ï¼Œä½†è¿™äº›å¤¹åœ¨åŠ è½½é˜¶æ®µä¹‹ä¸­è¿›è¡Œçš„åŠ¨ä½œï¼Œä»ç„¶å±äºè¿æ¥é˜¶æ®µçš„å†…å®¹ï¼Œè¿™ä¸¤ä¸ªé˜¶æ®µçš„å¼€å§‹æ—¶é—´ä»ç„¶ä¿æŒç€å›ºå®šçš„å…ˆåé¡ºåºã€‚</p><h2 id="2-éªŒè¯"><a href="#2-éªŒè¯" class="headerlink" title="2. éªŒè¯"></a>2. éªŒè¯</h2><p>éªŒè¯æ˜¯è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼ˆç‰ˆæœ¬ç±»å‹ä¹‹ç±»çš„ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹è™šæ‹Ÿæœºï¼‰ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚<br>éªŒè¯é˜¶æ®µå¤§è‡´ä¼šå®Œæˆ4ä¸ªé˜¶æ®µçš„æ£€éªŒåŠ¨ä½œï¼š</p><ol><li>æ–‡ä»¶æ ¼å¼éªŒè¯ï¼šéªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆClassæ–‡ä»¶æ ¼å¼çš„è§„èŒƒï¼›ä¾‹å¦‚ï¼šæ˜¯å¦ä»¥é­”æœ¯0xCAFEBABEå¼€å¤´ã€ä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹Ÿæœºçš„å¤„ç†èŒƒå›´ä¹‹å†…ã€å¸¸é‡æ± ä¸­çš„å¸¸é‡æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„ç±»å‹ã€‚</li><li>å…ƒæ•°æ®éªŒè¯ï¼šå¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼ˆæ³¨æ„ï¼šå¯¹æ¯”javacç¼–è¯‘é˜¶æ®µçš„è¯­ä¹‰åˆ†æï¼‰ï¼Œä»¥ä¿è¯å…¶æè¿°çš„ä¿¡æ¯ç¬¦åˆJavaè¯­è¨€è§„èŒƒçš„è¦æ±‚ï¼›ä¾‹å¦‚ï¼šè¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ï¼Œé™¤äº†java.lang.Objectä¹‹å¤–ã€‚</li><li>å­—èŠ‚ç éªŒè¯ï¼šé€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ˜¯åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚</li><li>ç¬¦å·å¼•ç”¨éªŒè¯ï¼šç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£ç¡®æ‰§è¡Œã€‚<br>éªŒè¯é˜¶æ®µæ˜¯éå¸¸é‡è¦çš„ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ï¼Œå®ƒå¯¹ç¨‹åºè¿è¡ŒæœŸæ²¡æœ‰å½±å“ï¼Œå¦‚æœæ‰€å¼•ç”¨çš„ç±»ç»è¿‡åå¤éªŒè¯ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘é‡‡ç”¨-Xverifynoneå‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œä»¥ç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´ã€‚</li></ol><h2 id="3-å‡†å¤‡"><a href="#3-å‡†å¤‡" class="headerlink" title="3. å‡†å¤‡"></a>3. å‡†å¤‡</h2><p>å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚è¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…åŒ…æ‹¬ç±»å˜é‡ï¼ˆè¢«staticä¿®é¥°çš„å˜é‡ï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨å †ä¸­ã€‚å…¶æ¬¡ï¼Œè¿™é‡Œæ‰€è¯´çš„åˆå§‹å€¼â€œé€šå¸¸æƒ…å†µâ€ä¸‹æ˜¯æ•°æ®ç±»å‹çš„é›¶å€¼ï¼Œå‡è®¾ä¸€ä¸ªç±»å˜é‡çš„å®šä¹‰ä¸ºï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> value<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span></code></pre><p>é‚£å˜é‡valueåœ¨å‡†å¤‡é˜¶æ®µè¿‡åçš„åˆå§‹å€¼ä¸º0è€Œä¸æ˜¯123ã€‚å› ä¸ºè¿™æ—¶å€™å°šæœªå¼€å§‹æ‰§è¡Œä»»ä½•Javaæ–¹æ³•ï¼Œè€ŒæŠŠvalueèµ‹å€¼ä¸º123çš„putstaticæŒ‡ä»¤æ˜¯ç¨‹åºè¢«ç¼–è¯‘åï¼Œå­˜æ”¾äºç±»æ„é€ å™¨()æ–¹æ³•ä¹‹ä¸­ï¼Œæ‰€ä»¥æŠŠvalueèµ‹å€¼ä¸º123çš„åŠ¨ä½œå°†åœ¨åˆå§‹åŒ–é˜¶æ®µæ‰ä¼šæ‰§è¡Œã€‚<br>è‡³äºâ€œç‰¹æ®Šæƒ…å†µâ€æ˜¯æŒ‡ï¼špublic static final int value=123ï¼Œå³å½“ç±»å­—æ®µçš„å­—æ®µå±æ€§æ˜¯ConstantValueæ—¶ï¼Œä¼šåœ¨å‡†å¤‡é˜¶æ®µåˆå§‹åŒ–ä¸ºæŒ‡å®šçš„å€¼ï¼Œæ‰€ä»¥æ ‡æ³¨ä¸ºfinalä¹‹åï¼Œvalueçš„å€¼åœ¨å‡†å¤‡é˜¶æ®µåˆå§‹åŒ–ä¸º123è€Œé0ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯åªä¼šç»™staticçš„ç±»å˜é‡æˆ–è€…è¯­å¥å—åˆå§‹åŒ–ï¼Œèµ‹äºˆçš„è¿˜æ˜¯é»˜è®¤å€¼ã€‚final staticçš„ä¼šç›´æ¥åœ¨å¸¸é‡æ± åˆ›å»ºï¼Œæœ‰åº”è¯¥çš„å€¼ã€‚</p></blockquote><h2 id="4-è§£æ"><a href="#4-è§£æ" class="headerlink" title="4. è§£æ"></a>4. è§£æ</h2><p>è§£æé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ã€æ–¹æ³•å¥æŸ„å’Œè°ƒç”¨ç‚¹é™å®šç¬¦7ç±»ç¬¦å·å¼•ç”¨è¿›è¡Œã€‚</p><h2 id="5-åˆå§‹åŒ–"><a href="#5-åˆå§‹åŒ–" class="headerlink" title="5. åˆå§‹åŒ–"></a>5. åˆå§‹åŒ–</h2><p>ç±»åˆå§‹åŒ–é˜¶æ®µæ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„æœ€åä¸€æ­¥ï¼Œåˆ°äº†åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„javaç¨‹åºä»£ç ã€‚åœ¨å‡†å¤‡æç«¯ï¼Œå˜é‡å·²ç»ä»˜è¿‡ä¸€æ¬¡ç³»ç»Ÿè¦æ±‚çš„åˆå§‹å€¼ï¼Œè€Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œåˆ™æ ¹æ®ç¨‹åºçŒ¿é€šè¿‡ç¨‹åºåˆ¶å®šçš„ä¸»ç®¡è®¡åˆ’å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æºï¼Œæˆ–è€…è¯´ï¼šåˆå§‹åŒ–é˜¶æ®µæ˜¯æ‰§è¡Œç±»æ„é€ å™¨\<clinit>()æ–¹æ³•çš„è¿‡ç¨‹ã€‚<br>\<clinit>()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—static{}ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ï¼Œç¼–è¯‘å™¨æ”¶é›†çš„é¡ºåºæ˜¯ç”±è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ‰€å†³å®šçš„ï¼Œé™æ€è¯­å¥å—åªèƒ½è®¿é—®åˆ°å®šä¹‰åœ¨é™æ€è¯­å¥å—ä¹‹å‰çš„å˜é‡ï¼Œå®šä¹‰åœ¨å®ƒä¹‹åçš„å˜é‡ï¼Œåœ¨å‰é¢çš„é™æ€è¯­å¥å—å¯ä»¥èµ‹å€¼ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®</clinit></clinit></p><p>å‰©ä¸‹çš„å°±æ˜¯ä½¿ç”¨å’Œå¸è½½äº†</p><h2 id="å‚è€ƒé™„å½•"><a href="#å‚è€ƒé™„å½•" class="headerlink" title="å‚è€ƒé™„å½•"></a>å‚è€ƒé™„å½•</h2><ol><li><a href="http://www.importnew.com/18548.html" target="_blank" rel="noopener">Javaè™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</a></li><li><a href="https://www.cnblogs.com/chanshuyi/p/the_java_class_load_mechamism.html" target="_blank" rel="noopener">ä¸¤é“é¢è¯•é¢˜ï¼Œå¸¦ä½ è§£æJavaç±»åŠ è½½æœºåˆ¶</a></li><li><a href="https://blog.csdn.net/ns_code/article/details/17881581" target="_blank" rel="noopener">ã€æ·±å…¥Javaè™šæ‹Ÿæœºã€‘ä¹‹å››ï¼šç±»åŠ è½½æœºåˆ¶</a></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> ç±»åŠ è½½æœºåˆ¶ </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡å®šå‘å’Œè½¬å‘</title>
      <link href="/2019/04/21/http/qing-qiu-he-chong-ding-xiang/"/>
      <url>/2019/04/21/http/qing-qiu-he-chong-ding-xiang/</url>
      
        <content type="html"><![CDATA[<h2 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h2><ul><li>åœ¨Serverç«¯sendRedirecté‡å®šå‘</li><li>åœ¨Serverç«¯ä½¿ç”¨jspæˆ–RequestDispatcherè¿›è¡Œforwardè½¬å‘</li><li>åœ¨Browserç«¯ä½¿ç”¨Javascriptè¿›è¡Œé‡å®šå‘</li><li>åœ¨Browserç«¯ä½¿ç”¨htmlæ ‡ç­¾è¿›è¡Œé‡å®šå‘</li></ul><p>è¿™æ˜¯æœ€å¸¸ç”¨çš„å››ç§æƒ…å†µï¼Œä¹Ÿæ˜¯å­˜åœ¨çš„å››ç§ã€‚</p><h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><ol><li>é‡å®šå‘sendRedirectæ›´åƒæ˜¯å®¢æˆ·ç«¯çš„è¡Œä¸ºï¼ŒURLä¼šå‘ç”Ÿæ”¹å˜ï¼Œå½“ç„¶æœåŠ¡ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨response.sendRedirect(url);æ¥å®Œæˆé‡å®šå‘ï¼Œæ•ˆæœä¸€æ ·ã€‚</li><li>è·³è½¬forwardè¿™é‡Œåªèƒ½æ˜¯æœåŠ¡ç«¯çš„è¡Œä¸ºï¼Œæ¯”å¦‚<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>jsp<span class="token operator">:</span>forward page<span class="token operator">=</span><span class="token string">"url"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token keyword">return</span> <span class="token string">"forward:/url"</span><span class="token punctuation">;</span></code></pre></li></ol><h2 id="å¸¸è§çŠ¶æ€ç "><a href="#å¸¸è§çŠ¶æ€ç " class="headerlink" title="å¸¸è§çŠ¶æ€ç "></a>å¸¸è§çŠ¶æ€ç </h2><table><thead><tr><th>çŠ¶æ€ç </th><th>å…·ä½“</th></tr></thead><tbody><tr><td>301ï¼ˆæ°¸ä¹…è½¬ç§»ï¼‰</td><td>è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚æ‚¨åº”ä½¿ç”¨æ­¤ä»£ç å‘Šè¯‰ Googlebot æŸä¸ªç½‘é¡µæˆ–ç½‘ç«™å·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚</td></tr><tr><td>302ï¼ˆä¸´æ—¶è½¬ç§»ï¼‰</td><td>æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥å“åº”ä»¥åçš„è¯·æ±‚ã€‚æ­¤ä»£ç ä¸å“åº” GET å’Œ HEAD è¯·æ±‚çš„ 301 ä»£ç ç±»ä¼¼ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°ä¸åŒçš„ä½ç½®ï¼Œä½†æ‚¨ä¸åº”ä½¿ç”¨æ­¤ä»£ç æ¥å‘Šè¯‰ Googlebot æŸä¸ªç½‘é¡µæˆ–ç½‘ç«™å·²ç»ç§»åŠ¨ï¼Œå› ä¸º Googlebot ä¼šç»§ç»­æŠ“å–åŸæœ‰ä½ç½®å¹¶ç¼–åˆ¶ç´¢å¼•ã€‚<em>ä¹Ÿæ˜¯å¸¸è§çš„serverçš„sendRedirect</em></td></tr><tr><td>303ï¼ˆæŸ¥çœ‹å…¶å®ƒä½ç½®ï¼‰</td><td>è¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤ä»£ç ã€‚å¯¹äºé™¤ HEAD ä¹‹å¤–çš„æ‰€æœ‰è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨è½¬åˆ°å…¶ä»–ä½ç½®ã€‚</td></tr><tr><td>304ï¼ˆæœªä¿®æ”¹ï¼‰</td><td>è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚å¦‚æœç½‘é¡µè‡ªè¯·æ±‚è€…ä¸Šæ¬¡è¯·æ±‚åå†ä¹Ÿæ²¡æœ‰æ›´æ”¹è¿‡ï¼Œæ‚¨åº”å°†æœåŠ¡å™¨é…ç½®ä¸ºè¿”å›æ­¤å“åº”ï¼ˆç§°ä¸º If-Modified-Since HTTP æ ‡å¤´ï¼‰ã€‚æœåŠ¡å™¨å¯ä»¥å‘Šè¯‰ Googlebot è‡ªä»ä¸Šæ¬¡æŠ“å–åç½‘é¡µæ²¡æœ‰å˜æ›´ï¼Œè¿›è€ŒèŠ‚çœå¸¦å®½å’Œå¼€é”€ã€‚å…¶å®å°±æ˜¯ç¼“å­˜ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šè¯·æ±‚æœåŠ¡ç«¯ï¼Œä¸è¿‡å“åº”å¤´çš„å­—æ®µæ˜¯æœªä¿®æ”¹ã€‚ <em>å¯ä»¥ä½¿ç”¨F5å’ŒCtrl + F5çœ‹network</em></td></tr><tr><td>305ï¼ˆä½¿ç”¨ä»£ç†ï¼‰</td><td>è¯·æ±‚è€…åªèƒ½ä½¿ç”¨ä»£ç†è®¿é—®è¯·æ±‚çš„ç½‘é¡µã€‚å¦‚æœæœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼Œè¿˜è¡¨ç¤ºè¯·æ±‚è€…åº”ä½¿ç”¨ä»£ç†ã€‚</td></tr></tbody></table><blockquote><p>æ›´å¤šè§å‚è€ƒé™„å½•çš„ã€ŠHTTP 304çŠ¶æ€ç çš„è¯¦ç»†è®²è§£ã€‹</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://blog.csdn.net/radic_feng/article/details/6798378" target="_blank" rel="noopener">å®ç°é¡µé¢é‡å®šå‘ï¼ˆè·³è½¬ï¼‰çš„4ç§æ–¹å¼</a></li><li><a href="https://blog.csdn.net/meiyalei/article/details/2129120" target="_blank" rel="noopener">HTTPä¸­çš„é‡å®šå‘å’Œè¯·æ±‚è½¬å‘çš„åŒºåˆ«</a></li><li><a href="https://blog.csdn.net/huwei2003/article/details/70139062" target="_blank" rel="noopener">HTTP 304çŠ¶æ€ç çš„è¯¦ç»†è®²è§£</a></li><li><a href="https://blog.csdn.net/reliveIT/article/details/50776984" target="_blank" rel="noopener">httpé‡å®šå‘301/302/303/307</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é‡å®šå‘sendRedirect </tag>
            
            <tag> è½¬å‘forward </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>surrounded-regionsæœç´¢</title>
      <link href="/2019/04/21/leetcode/surrounded-regions-sou-suo/"/>
      <url>/2019/04/21/leetcode/surrounded-regions-sou-suo/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><a href="https://www.nowcoder.com/practice/c159db5028034aa595043a1a220a62dd?tpId=46&amp;tqId=29050&amp;tPage=2&amp;rp=2&amp;ru=/ta/leetcode&amp;qru=/ta/leetcode/question-ranking" target="_blank" rel="noopener">é¢˜ç›®åœ°å€</a><br>Given a 2D board containingâ€™Xâ€™andâ€™Oâ€™, capture all regions surrounded byâ€™Xâ€™.<br>A region is captured by flipping allâ€™Oâ€™s intoâ€™Xâ€™s in that surrounded region .</p><p>For example,</p><blockquote><p>X X X X<br>X O O X<br>X X O X<br>X O X X  </p></blockquote><p>After running your function, the board should be:</p><blockquote><p>X X X X<br>X X X X<br>X X X X<br>X O X X</p></blockquote><p>å°±æ˜¯å¦‚æœä¸å…¨è¢«åŒ…æ‹¬ï¼ˆå››ä¸ªæ–¹å‘ï¼‰çš„â€™Oâ€™å°±ä¿ç•™ï¼Œæ‰€ä»¥ä»è¾¹ç¼˜å‡ºå‘æ·±åº¦ä¼˜å…ˆæœç´¢å¾ˆå®¹æ˜“è§£å†³ï¼ŒæŠŠæ»¡è¶³æ¡ä»¶çš„æ›¿æ¢ä¸ºâ€™Dâ€™ï¼Œå°±æ˜¯åˆ†å—äº†ï¼Œåˆ°ä¸äº†çš„è¿˜æ˜¯â€™Oâ€™æœ€åæ›¿æ¢ä¸ºâ€™Xâ€™ï¼Œè€Œâ€™Dâ€™æœ€åæ›¿æ¢ä¸ºâ€™Oâ€™ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åº”è¯¥æœ€å…ˆåˆ¤æ–­</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>board <span class="token operator">==</span> null <span class="token operator">||</span> board<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rlen <span class="token operator">=</span> board<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> clen <span class="token operator">=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æœç´¢å››è¾¹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> clen<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> rlen <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// å»æ‰é‡åˆçš„ä¸¤ä¸ªç‚¹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rlen <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> clen <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rlen<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>             <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> clen<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'O'</span><span class="token punctuation">)</span>                     board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'X'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'D'</span><span class="token punctuation">)</span>                    board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'O'</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>row <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> row <span class="token operator">>=</span> board<span class="token punctuation">.</span>length <span class="token operator">||</span> col <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> col <span class="token operator">>=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">||</span> board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'O'</span><span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'D'</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¸Šå³ä¸‹å·¦é¡ºæ—¶é’ˆæ–¹å‘</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol><li>å…»æˆæœ€å…ˆå¤„ç†è¾¹ç•Œã€ç©ºå€¼æ˜¯ä¹ æƒ¯</li><li>äºŒç»´æ•°ç»„çš„board.lengthæ˜¯è¡Œæ•°ï¼Œboard[0].lengthæ˜¯åˆ—æ•°</li></ol>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DFS </tag>
            
            <tag> çŸ©é˜µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸ</title>
      <link href="/2019/04/19/qian-duan/kua-yu/"/>
      <url>/2019/04/19/qian-duan/kua-yu/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯è·¨åŸŸ"><a href="#ä»€ä¹ˆæ˜¯è·¨åŸŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¨åŸŸ"></a>ä»€ä¹ˆæ˜¯è·¨åŸŸ</h2><p>å¸¸è§çš„è°ƒç”¨æ¥å£è¢«é˜»ç¢äº†ï¼Œçˆ†è·¨åŸŸé—®é¢˜ã€‚ä¹Ÿå°±æ˜¯ä»ä¸€ä¸ªæºä¸‹è½½çš„æ–‡æ¡£æˆ–è€…è„šæœ¬ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’è¢«é™åˆ¶äº†ã€‚</p><h2 id="è·¨åŸŸçš„åŸå› "><a href="#è·¨åŸŸçš„åŸå› " class="headerlink" title="è·¨åŸŸçš„åŸå› "></a>è·¨åŸŸçš„åŸå› </h2><p>å‡ºç°è·¨åŸŸå®Œå…¨æ˜¯æµè§ˆå™¨æçš„ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener">æµè§ˆå™¨çš„åŒæºç­–ç•¥</a>ï¼Œå…¶å®æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œç”¨æ¥éš”ç¦»æ½œåœ¨çš„æ¶æ„æ–‡ä»¶çš„å®‰å…¨æœºåˆ¶ã€‚æ˜¯è¯ä¸‰åˆ†æ¯’ï¼Œæ‰€ä»¥å¯¹äºæˆ‘ä»¬çš„ä¸€äº›è°ƒç”¨æœ‰æ—¶å€™ä¹Ÿä¼šè¢«éš”ç¦»äº†ã€‚ä½†æ˜¯å®ƒæ•´ä½“æ˜¯ä¸ªå¥½ä¸œè¥¿ã€‚è€Œä¸”å¯¹äºæˆ‘ä»¬è‡ªå·±éœ€è¦è°ƒç”¨çš„å¥½ä¸œè¥¿è·¨åŸŸäº†ï¼Œæˆ‘ä»¬æ˜¯æœ‰æ­£ç¡®çš„è§£å†³æ–¹æ³•çš„ã€‚ä¸»è¦æ˜¯æ¥å£è¯·æ±‚å’ŒDOMæŸ¥è¯¢ã€‚</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ol><li><a href="https://segmentfault.com/a/1190000015597029" target="_blank" rel="noopener">ä¸è¦å†é—®æˆ‘è·¨åŸŸçš„é—®é¢˜äº†</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è·¨åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­çš„volatileå…³é”®å­—</title>
      <link href="/2019/04/18/duo-xian-cheng-bing-fa-bian-cheng/java-zhong-de-volatile-guan-jian-zi/"/>
      <url>/2019/04/18/duo-xian-cheng-bing-fa-bian-cheng/java-zhong-de-volatile-guan-jian-zi/</url>
      
        <content type="html"><![CDATA[<h2 id="1-volatileæ¦‚è¿°"><a href="#1-volatileæ¦‚è¿°" class="headerlink" title="1. volatileæ¦‚è¿°"></a>1. volatileæ¦‚è¿°</h2><p>&emsp;&emsp;volatileæ˜¯Javaçš„ä¸€ä¸ªå…³é”®å­—ï¼Œåªèƒ½ç”¨äºä¿®é¥°å˜é‡ï¼Œ<strong>ç›®çš„æ˜¯è§£å†³å…±äº«å˜é‡å†…å­˜å¯è§æ€§é—®é¢˜ï¼Œä¿è¯äº†å¯è§æ€§ï¼ˆæ¯æ¬¡è¯»å†™éƒ½åˆ·æ–°å†…å­˜ï¼‰ï¼Œä½†æ˜¯ä¸ä¿è¯åŸå­æ€§</strong>ã€‚å¯¹æ¯”ç¬¨é‡çš„é”æœºåˆ¶ï¼ˆçº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢å¼€é”€å¤§ï¼‰ï¼Œå¦‚synchronizedå†…ç½®é”ï¼Œè¿™ä¸ªvolatileå°±æ˜¯Javaæä¾›çš„ä¸€ç§å¼±å½¢å¼çš„åŒæ­¥ã€‚</p><h2 id="2-ä¾‹å­"><a href="#2-ä¾‹å­" class="headerlink" title="2. ä¾‹å­"></a>2. ä¾‹å­</h2><p>ä»¥ä¸‹è¿™ä¸ªä»£ç æ²¡æœ‰ä½¿ç”¨ä»»ä½•åŒæ­¥æªæ–½ï¼Œå†å¤šçº¿ç¨‹ä¸‹çš„valueçš„è¯»å†™æ˜¯ä¸å®‰å…¨çš„ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> vlass ThreadSafeInteger <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        reutrn value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> </code></pre><p>ä»¥ä¸‹ä½¿ç”¨synchronizedå…³é”®å­—ï¼Œå£°æ˜ä¸ºéšå¼å¯¹è±¡é”ï¼Œå¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¼€é”€æ˜¯é—®é¢˜ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> vlass ThreadSafeInteger <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        reutrn value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> </code></pre><p>çœ‹çœ‹ä¸‹é¢çš„ä½¿ç”¨volatileï¼Œä¹Ÿæ˜¯å¯ä»¥çš„</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> vlass ThreadSafeInteger <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        reutrn value<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> </code></pre><blockquote><p>å‰é¢æåˆ°volatileåªèƒ½ä¿è¯å˜é‡åœ¨å¤šçº¿ç¨‹ç¯å¢ƒçš„å¯è§æ€§ï¼Œè¿™é‡Œçš„ä½œç”¨å’Œsynchronizedæ˜¯ç­‰ä»·çš„ï¼Œåªæ˜¯é”æœ‰å¼€é”€ï¼Œå‰åé˜»å¡å•¥çš„ï¼Œvolatileå°±ä¸ä¼šé˜»å¡</p></blockquote><h2 id="3-ä¿è¯å¯è§æ€§-amp-ä¸ä¿è¯åŸå­æ€§"><a href="#3-ä¿è¯å¯è§æ€§-amp-ä¸ä¿è¯åŸå­æ€§" class="headerlink" title="3. ä¿è¯å¯è§æ€§ &amp; ä¸ä¿è¯åŸå­æ€§"></a>3. ä¿è¯å¯è§æ€§ &amp; ä¸ä¿è¯åŸå­æ€§</h2><p>&emsp;&emsp;å¯è§æ€§å¥½ç†è§£ï¼Œæ¯æ¬¡éƒ½å•¥åˆ·æ–°å†…å­˜ã€‚åŸå­æ€§æ˜¯æŒ‡ä¸€äº›åˆ—æ“ä½œæ—¶ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œä¸ä¼šåªæ‰§è¡Œä¸€éƒ¨åˆ†ã€‚å¸¸è§çš„æ˜¯count++;</p><blockquote><p>count++;   //  æ˜¯ä¸‰æ­¥ï¼šè·å–-è®¡ç®—-å†™å…¥</p></blockquote><p>å¦‚ä¸‹ä»£ç </p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> xyz<span class="token punctuation">.</span>cglzwz<span class="token punctuation">.</span>thread_concurrency<span class="token punctuation">.</span>other<span class="token punctuation">.</span>_volatile<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * éªŒè¯volatileå…³é”®å­—çš„å¯è§æ€§ * volatileåªèƒ½ä¿è¯ä»–ä»¬æ“ä½œçš„countæ˜¯åŒä¸€å—å†…å­˜ï¼Œä½†ä¾ç„¶å¯èƒ½å‡ºç°å†™å…¥è„æ•°æ®çš„æƒ…å†µã€‚ * @author chgl16 * @date 2019-04-16 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VolatileDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">volatile</span> <span class="token keyword">static</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>        Runnable r <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç»“æœä»ç„¶æ˜¯ &lt; 20000, å¤§çº¦15000å·¦å³ã€‚</p><blockquote><p>æ—¶æœ‰synchronizedå¯ä»¥è§£å†³è¿™é‡Œçš„åŸå­æ€§é—®é¢˜ï¼Œä½†æ˜¯å¹¶å‘é‡é«˜çš„æ—¶å€™æ˜¯ä¸ªå¤§å¼€é”€ã€‚è¿™ç§é—®é¢˜å¯ä»¥<em>CAS</em>æ“ä½œè§£å†³</p></blockquote><p>è€Œ<strong>volatileä¸ä¿è¯åŸå­æ€§</strong>ï¼Œæ‰€ä»¥ä¸€èˆ¬å°±ä»¥ä¸‹ä¸¤ç§æƒ…å†µæ—¶æœ‰volatileå…³é”®å­—ï¼š</p><ol><li>ä¸éœ€è¦åŸå­æ€§çš„åŒæ­¥æ“ä½œå˜é‡ï¼›</li><li>æ²¡æœ‰åŠ é”çš„ï¼Œå› ä¸ºåŠ é”å·²ç»ä¿è¯äº†åŒæ­¥äº†ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> volatile </tag>
            
            <tag> å¯è§æ€§&amp;åŸå­æ€§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘</title>
      <link href="/2019/04/14/jian-zhi-offer/cong-shang-wang-xia-da-yin-er-cha-shu/"/>
      <url>/2019/04/14/jian-zhi-offer/cong-shang-wang-xia-da-yin-er-cha-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><p>ä»ä¸Šå¾€ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ŒåŒå±‚èŠ‚ç‚¹ä»å·¦è‡³å³æ‰“å°ã€‚  </p><p><a href="https://www.nowcoder.com/practice/7fe2212963db4790b57431d9ed259701?tpId=13&amp;tqId=11175&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">=&gt;é¢˜ç›®åœ°å€</a></p><hr><h1 id="ACä»£ç "><a href="#ACä»£ç " class="headerlink" title="ACä»£ç "></a>ACä»£ç </h1><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>LinkedList<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Queue<span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    TreeNode left <span class="token operator">=</span> null<span class="token punctuation">;</span>    TreeNode right <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">TreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">PrintFromTopToBottom</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Integer<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç©ºè¿”å›</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> null<span class="token punctuation">)</span>            <span class="token keyword">return</span> list<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å®šä¹‰é˜Ÿåˆ—</span>        Queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span>TreeNode<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            TreeNode temp <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span>                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span>                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>ä½¿ç”¨é˜Ÿåˆ—å®ç°ï¼ŒJavaçš„Queueå¯ä»¥å‚è€ƒ<a href="http://www.runoob.com/java/data-queue.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a></p></blockquote><ol><li>offer()æ˜¯æ’å…¥å…ƒç´ åˆ°é˜Ÿå°¾</li><li>poll()æ˜¯è¿”å›é˜Ÿå¤´å…ƒç´ ï¼Œå¹¶ä»é˜Ÿä¼åˆ å»ï¼Œpeek()å’Œelement()æ–¹æ³•ä¸ä¼šåˆ é™¤</li><li>æ³¨æ„äºŒå‰æ ‘ä¸ºç©ºçš„å¤„ç†</li></ol>]]></content>
      
      
      <categories>
          
          <category> å‰‘æŒ‡offer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> Javaé˜Ÿåˆ—Queue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²åˆ†å‰²ä¸ºå›æ–‡ä¸²çš„æœ€å°åˆ‡å‰²æ•°</title>
      <link href="/2019/02/26/leetcode/zi-fu-chuan-fen-ge-wei-hui-wen-chuan-de-zui-xiao-qie-ge-shu/"/>
      <url>/2019/02/26/leetcode/zi-fu-chuan-fen-ge-wei-hui-wen-chuan-de-zui-xiao-qie-ge-shu/</url>
      
        <content type="html"><![CDATA[<p>è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’æ–¹æ³•ï¼š</p><pre class=" language-shell"><code class="language-shell">dp[i]  # è¡¨ç¤ºåŒ…æ‹¬s.chatAt(i)å‰çš„å­—ä¸²æœ€å°åˆ‡å‰²æ•°  dp[0] = 0  # ç¬¬ä¸€ä¸ªä¸ç”¨åˆ‡å‰²æœ‰   dp[i] = min {dp[i-1] + 1, dp[j-1] + 1}  # dp[j-1] + 1è¡¨ç¤º[j-i]ä¸ºå›æ–‡ä¸²ï¼Œæ‰€æœ‰åªéœ€åŠ ä¸Šä¹‹å‰çš„dp[j-1]å³å¯ã€‚ï¼ˆj < i, è‹¥j -1 = -1è¡¨ç¤ºæ•´ä¸ªéƒ½æ˜¯å›æ–‡ä¸²ï¼Œå³ä¸º1ï¼‰</code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MinCut</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        MinCut instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String t1 <span class="token operator">=</span> <span class="token string">"aabab"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">minCut</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">isPalindrome</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minCut</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// åˆå§‹åŒ–</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// åˆ¤æ–­ [j, i]æ˜¯å¦ä¸ºå›æ–‡ä¸²</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPalindrome</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>                        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">else</span>                         dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                         <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç»Ÿè®¡æ•°å­—åœ¨æœ‰åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°</title>
      <link href="/2019/02/21/leetcode/tong-ji-shu-zi-zai-you-xu-shu-zu-zhong-chu-xian-de-ci-shu/"/>
      <url>/2019/02/21/leetcode/tong-ji-shu-zi-zai-you-xu-shu-zu-zhong-chu-xian-de-ci-shu/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æœ‰åºæ•°ç»„ï¼Œç›´æ¥éå†ä¹Ÿå°±O(n)  </p><p>æœ‰åºå¯ä»¥è€ƒè™‘æŠ˜åŠæŸ¥æ‰¾ã€‚æ‰¾åˆ°ç¬¬ä¸€ä¸ªï¼Œç„¶åå‘ä¸¤è¾¹æ‰©æ•£å³å¯ã€‚  </p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Findk</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Findk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetNumberOfK</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">GetNumberOfK</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>array <span class="token operator">==</span> null <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>           <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> high <span class="token operator">=</span> array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>                count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>                i <span class="token operator">=</span> j <span class="token operator">=</span> mid<span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">++</span>i <span class="token operator">&lt;=</span> high <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> k<span class="token punctuation">)</span>                    count<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>j <span class="token operator">>=</span> low <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> k<span class="token punctuation">)</span>                    count<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> count<span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>                high <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                low <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æµ‹è¯•</title>
      <link href="/2019/01/14/za-ji/ce-shi/"/>
      <url>/2019/01/14/za-ji/ce-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="æµ‹è¯•æ˜¾ç¤º"><a href="#æµ‹è¯•æ˜¾ç¤º" class="headerlink" title="æµ‹è¯•æ˜¾ç¤º"></a>æµ‹è¯•æ˜¾ç¤º</h2><pre><code>åŠ é‡å†…å®¹</code></pre><p>æ­£æ–‡â€¦. </p><p>==ä½¿ç”¨é¢œè‰²æ ‡å¿—==</p><p><strong>åŠ ç²—</strong></p><p><em>æ–œä½“</em></p><blockquote><p>å¼•ç”¨â€¦</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ...</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Java ä»£ç "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Hexoæ­å»ºåšå®¢æ€»ç»“</title>
      <link href="/2019/01/04/za-ji/hexo-bo-ke-da-jian-zong-jie/"/>
      <url>/2019/01/04/za-ji/hexo-bo-ke-da-jian-zong-jie/</url>
      
        <content type="html"><![CDATA[<hr><h3 id="é‡è¦æ“ä½œ"><a href="#é‡è¦æ“ä½œ" class="headerlink" title="é‡è¦æ“ä½œ"></a>é‡è¦æ“ä½œ</h3><ol><li>å°†sourceä¸‹çš„ä¸ªäººmdåšå®¢æ–‡ä»¶ç”Ÿæˆhtmlã€cssã€jsåˆ°publicç›®å½•ä¸‹<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># generate å¯ç¼©å†™ä¸ºgï¼Œæ‰“å¼€localhost:4000</span>hexo generate</code></pre></li></ol><ol start="2"><li><p>éƒ¨ç½²åˆ°æœ¬åœ°æœåŠ¡å™¨ï¼Œå¯åšæµ‹è¯•</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># server å¯ç¼©å†™ä¸ºs</span>hexo server</code></pre></li><li><p>å…³è”åˆ°github.ioä»“åº“</p><ol><li>å®‰è£…deploy git<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è¿™ä¸ªæ˜¯ï¼šhexo å’Œgitè‡ªåŠ¨å¯¹æ¥ä¸Šä¼ çš„å…³é”®ç»„ä»¶</span><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save</code></pre></li><li>ä¿®æ”¹_config.ymlå…¨å±€é…ç½®æ–‡ä»¶çš„éƒ¨ç½²ä»“åº“åœ°å€<pre class=" language-yml"><code class="language-yml">deploy:type: gitrepository: https://github.com/chgl16/chgl16.github.io.gitbranch: maste</code></pre></li></ol></li><li><p>å°†æœ¬åœ°åšå®¢(ä¸»è¦æ˜¯publicæ–‡ä»¶å¤¹çš„å†…å®¹)éƒ¨ç½²åˆ°github.io</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># deploy å¯ç¼©å†™ä¸ºd, éœ€è¦æ¸…ç©ºç¼“å­˜ï¼Œä¸ç„¶æäº¤çš„ä¸æ˜¯æ›´æ–°çš„</span>hexo clean  hexo deploy -g</code></pre></li><li><p>hexoåšå®¢ç«™ç‚¹ç¾åŒ–</p></li></ol><hr><h3 id="å‚è€ƒé™„å½•"><a href="#å‚è€ƒé™„å½•" class="headerlink" title="å‚è€ƒé™„å½•"></a>å‚è€ƒé™„å½•</h3><ol><li><a href="https://mp.weixin.qq.com/s?__biz=MzI5ODM3MjcxNQ==&amp;mid=2247485963&amp;idx=1&amp;sn=c3270696be894c4223a7c12597661ff9&amp;chksm=eca7910fdbd0181968206615164974f6e854939ba91028765858f334029e7a68201da84a8e53&amp;mpshare=1&amp;scene=1&amp;srcid=0119dZMVcTeSV7PulcRmBvRg#rd" target="_blank" rel="noopener">5åˆ†é’Ÿ 0å…ƒæ­å»ºä¸ªäººç‹¬ç«‹åšå®¢ç½‘ç«™ï¼ˆä¸€ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzI5ODM3MjcxNQ==&amp;mid=2247486088&amp;idx=1&amp;sn=c61da14fa2a56771761e15b0415c9f54&amp;chksm=eca7918cdbd0189a0a0a3394ee078aa360befd9846815a7977e3e92996d9e37ddcf654341822&amp;mpshare=1&amp;scene=1&amp;srcid=0119FWZ2doO1svr2XoplVu79#rd" target="_blank" rel="noopener">5åˆ†é’Ÿ 0å…ƒæ­å»ºä¸ªäººç‹¬ç«‹åšå®¢ç½‘ç«™ï¼ˆäºŒï¼‰</a></li><li><a href="http://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noopener">Node.jsã€npm</a></li><li><a href="http://jeffyang.top/Hexo/Hexo%E4%B8%BB%E9%A2%98Next%E7%BE%8E%E5%8C%96/" target="_blank" rel="noopener">hexoä½¿ç”¨nextä¸»é¢˜ç¾åŒ–</a>  </li><li><a href="https://blinkfox.github.io/2018/09/28/qian-duan/hexo-bo-ke-zhu-ti-zhi-hexo-theme-matery-de-jie-shao/" target="_blank" rel="noopener">hexoä½¿ç”¨hexo-themes-materyä¸»é¢˜ã€€</a>  </li><li><a href="https://rua.kim/2019/02/26/mogai/" target="_blank" rel="noopener">materyä¸»é¢˜æŠ˜è…¾åšå®¢</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
